{"version":3,"sources":["js/index.js"],"names":["catnmb","kywords","srtOrd","desc","srchRef","previewLim","cats","nxtp","paglast","page","allChk","initSrch","stAf","allCats","slice","urlSrch","get","split","document","getElementById","value","replace","concat","forEach","itm","idx","str","toLowerCase","rmDiacs","splice","all","i","indexOf","checked","selected","undefined","cookiesFSRef","where","orderBy","startAfter","limit","shwSrch","promises","notSrchd","p","firebase","database","ref","transaction","search","count","push","length","Promise","then","set","catch","err","console","log","innerHTML","snap","docs","a","createElement","classes","med","bod","appendChild","doc","divi","href","data","url","img","style","width","height","src","picUrl","tit","title","descr","description","dates","dledit","dl","ledit","toDate","innerText","getDate","getMonth","getFullYear","d","published","auhtTxt","authors","classList","remove","removeAttribute","setAttribute","reSrch","np","scrollIntoView","prepCatBtns","onclick","shwCalMain","calendarsFSRef","descriptionShort","showEl","window","loaded","addEventListener","event","preventDefault","send","srchStr","wordArr","location"],"mappings":"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","file":"js.04701b39.js","sourceRoot":"../src","sourcesContent":["import '../styles/index.scss';\n\nvar catnmb;\nconst previewLim = 20;\n\n//Get search params\nvar cats = [], kywords, srtOrd, desc, srchRef;\nvar nxtp = false, paglast = [null], page = 1;\nvar allChk = false;\nfunction initSrch(stAf) {\n    cats = allCats.slice();\n    kywords = [''];\n    if (urlSrch.get('c') != null) {\n        cats = urlSrch.get('c').split('+');\n        cats = cats[0].split(' ');\n    }\n    if (urlSrch.get('k') != null) {\n        kywords = urlSrch.get('k').split('+');\n        document.getElementById('srcBox').value = urlSrch.get('k').replace('+', ' ');\n    };\n    kywords = cats.concat(kywords);\n    kywords.forEach(function (itm, idx) {\n        let str = itm.toLowerCase();\n        str = rmDiacs(str);\n        kywords.splice(idx, 1, str);\n    });\n    let all = true;\n    for (let i = 0; i < catnmb; i++) {\n        if (kywords.indexOf(document.getElementById('cat' + i).value) != -1) {\n            document.getElementById('cat' + i).checked = true;\n        } else all = false;\n    }\n    if (all) {\n        allChk = true;\n        document.getElementById('catA').checked = true;\n    }\n    document.getElementById(\"inSrchOrd1\").selected = false;\n    document.getElementById(\"inSrchOrd2\").selected = false;\n    document.getElementById(\"inSrchOrd3\").selected = false;\n    srtOrd = urlSrch.get('o');\n    if (srtOrd != null) {\n        if (srtOrd == 'new') {\n            srtOrd = 'ledit';\n            desc = true;\n            document.getElementById(\"inSrchOrd1\").selected = true;\n        }\n        if (srtOrd == 'old') {\n            srtOrd = 'ledit';\n            desc = false;\n            document.getElementById(\"inSrchOrd2\").selected = true;\n        }\n        if (srtOrd == 'pop') {\n            desc = true;\n            document.getElementById(\"inSrchOrd3\").selected = true;\n        }\n    } else {\n        srtOrd = 'ledit';\n        desc = true;\n    }\n    if (page > 1 && stAf && paglast[page - 1] != null && paglast[page - 1] != undefined) {\n        if (!desc) {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n        } else {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n        }\n    } else {\n        if (!desc) {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd).limit(previewLim);\n        } else {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd, 'desc').limit(previewLim);\n        }\n    }\n    shwSrch();\n    const promises = [];\n    let notSrchd = [], allP = null;\n    for (let i = 0; i < kywords.length; i++) {\n        let itm = kywords[i];\n        if (itm == '' || itm == ' ') continue;\n        const p = firebase.database().ref('searchQs/' + itm).transaction(search => {\n            if (search) {\n                notSrchd.splice(notSrchd.indexOf(itm), 1);\n                search.count++;\n            } else {\n                notSrchd.push(itm);\n            }\n            return search;\n        });\n        promises.push(p);\n    }\n    allP = Promise.all(promises);\n    allP.then(() => {\n        notSrchd.forEach((itm) => {\n            firebase.database().ref('searchQs/' + itm).set({\n                count: 1\n            });\n        })\n    }).catch(err => { console.log('err') });\n}\nfunction shwSrch() {\n    document.getElementById('cookiesCont').innerHTML = \"\";\n    srchRef.get().then(snap => {\n        let docs = snap.docs;\n        nxtp = false;\n        if (docs.length == 0) {\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            bod.innerHTML = '<h5 class=\"mt-0 text-center\">No se han encontrado resultados</h5>';\n            a.appendChild(med);\n            med.appendChild(bod);\n            document.getElementById('cookiesCont').appendChild(a);\n        }\n        docs.forEach((doc, idx) => {\n            if (idx != 0) {\n                let divi = document.createElement('div');\n                classes(divi, \"dropdown-divider d-md-none\");\n                document.getElementById('cookiesCont').appendChild(divi);\n            }\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            a.href = doc.data().url;\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let img = document.createElement('img');\n            classes(img, \"align-self-center mr-3\");\n            img.style.width = \"64px\";\n            img.style.height = \"64px\";\n            img.src = doc.data().picUrl;\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            let tit = document.createElement('h5');\n            classes(tit, \"mt-0\");\n            tit.innerHTML = doc.data().title;\n            bod.appendChild(tit);\n            let descr = document.createElement('p');\n            descr.innerHTML = doc.data().description;\n            bod.appendChild(descr);\n            let dates = document.createElement('p');\n            classes(dates, \"my-0\");\n            if (doc.data().dledit) {\n                let dl = doc.data().ledit.toDate();\n                dates.innerText = 'Actualizado: ' + dl.getDate() + '/' + (dl.getMonth() + 1) + '/' + dl.getFullYear();\n            } else {\n                let d = doc.data().published.toDate();\n                dates.innerText = 'Publicado: ' + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();\n            }\n            bod.appendChild(dates);\n            let auhtTxt = document.createElement('p');\n            classes(auhtTxt, \"mt-0\");\n            auhtTxt.innerText = ' Autor(es):' + doc.data().authors;\n            bod.appendChild(auhtTxt);\n            a.appendChild(med);\n            med.appendChild(img);\n            med.appendChild(bod);\n            document.getElementById('cookiesCont').appendChild(a);\n            if (idx == previewLim - 1) {\n                if (paglast[page] == undefined || paglast[page] == null) {\n                    paglast.push(docs[docs.length - 1]);\n                } else if (paglast[page] != docs[docs.length - 1]) {\n                    paglast.splice(page, 1, docs[docs.length - 1]);\n                }\n                nxtp = true;\n                document.getElementById(\"pgNavT\").classList.remove('d-none');\n                document.getElementById(\"pgNavB\").classList.remove('d-none');\n            }\n        });\n        if (!nxtp) {\n            document.getElementById(\"pgTNxt\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBNxt\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTNxt\").removeAttribute('disabled');\n            document.getElementById(\"pgBNxt\").removeAttribute('disabled');\n        }\n        if (page == 1) {\n            document.getElementById(\"pgTPrv\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBPrv\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTPrv\").removeAttribute('disabled');\n            document.getElementById(\"pgBPrv\").removeAttribute('disabled');\n        }\n    }).catch(err => { console.log(err) });\n}\n\ndocument.getElementById(\"pgTPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgBPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgTNxt\").onclick = function () { reSrch(1); };\ndocument.getElementById(\"pgBNxt\").onclick = function () { reSrch(1); };\nfunction reSrch(np) {\n    if (page < 1 && np == -1) return;\n    if (!nxtp && np == 1) return;\n    page += np;\n    document.getElementById('disPgT').innerText = page;\n    document.getElementById('disPgB').innerText = page;\n    initSrch(true);\n    document.getElementById(\"cookCnt\").scrollIntoView();\n}\n\nfunction prepCatBtns() {\n    //Submit search\n    document.getElementById('catA').onclick = function () {\n        if (!allChk) {\n            for (let i = 0; i < catnmb; i++) {\n                document.getElementById('cat' + i).checked = true;\n            }\n        } else {\n            for (let i = 0; i < catnmb; i++) {\n                document.getElementById('cat' + i).checked = false;\n            }\n        }\n        allChk = !allChk;\n    };\n    for (let i = 0; i < catnmb; i++) {\n        document.getElementById('cat' + i).onclick = function () {\n            if (allChk) {\n                document.getElementById('catA').checked = false;\n                allChk = false;\n            }\n            else {\n                let all = true;\n                for (let i = 0; i < catnmb; i++) {\n                    if (document.getElementById('cat' + i).checked == false) {\n                        all = false;\n                        break;\n                    }\n                }\n                if (all) {\n                    allChk = true;\n                    document.getElementById('catA').checked = true;\n                }\n            }\n        };\n    }\n}\nfunction shwCalMain() {\n    calendarsFSRef.where(\"public\", \"==\", true).orderBy('published', 'desc').limit(1).get().then(snap => {\n        let docs = snap.docs;\n        docs.forEach(doc => {\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            a.href = doc.data().url;\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let img = document.createElement('img');\n            classes(img, \"align-self-center mr-3\");\n            img.style.width = \"64px\";\n            img.style.height = \"64px\";\n            img.src = doc.data().picUrl;\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            let tit = document.createElement('h5');\n            classes(tit, \"mt-0\");\n            tit.innerHTML = doc.data().title;\n            bod.appendChild(tit);\n            let descr = document.createElement('p');\n            descr.innerHTML = doc.data().descriptionShort;\n            bod.appendChild(descr);\n            let dates = document.createElement('p');\n            classes(dates, \"my-0\");\n            a.appendChild(med);\n            med.appendChild(img);\n            med.appendChild(bod);\n            document.getElementById('calMain').appendChild(a);\n            showEl(document.getElementById('calMain'));\n        });\n    }).catch(err => { console.log(err) });\n}\n\nwindow.loaded = function loaded() {\n    catnmb = allCats.length;\n    prepCatBtns();\n    initSrch(false);\n    shwCalMain();\n    function send() {\n        let srchStr = '?c=';\n        if (document.getElementById('cat0').checked) srchStr = srchStr + document.getElementById('cat0').value;\n        for (let i = 1; i < catnmb; i++) {\n            if (document.getElementById('cat' + i).checked) {\n                srchStr = srchStr + '+' + document.getElementById('cat' + i).value;\n            }\n        }\n        srchStr = srchStr + '&k=';\n        let wordArr = document.getElementById('srcBox').value.split(' ');\n        srchStr = srchStr + wordArr[0];\n        for (let i = 1; i < wordArr.length; i++) {\n            srchStr = srchStr + '+' + wordArr[i];\n        }\n        srchStr = srchStr + '&o=' + document.getElementById('inOrd').value;\n        window.location.href = srchStr;\n    }\n    document.getElementById(\"frmSrch\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        send();\n    });\n}"]}