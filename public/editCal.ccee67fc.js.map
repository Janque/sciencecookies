{"version":3,"sources":["js/editCal.js","../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/css-loader.js","../../../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["store","firebase","storage","rtDb","database","docDat","docId","docRef","lastSave","Date","now","saved","newMedia","newMedSrc","eventToShow","daysOfWeek","longDay","fullMonth","n","l","window","loaded","calendarsFSRef","doc","urlSrch","get","onSnapshot","exists","location","href","data","id","document","getElementById","innerHTML","title","src","picUrl","value","picCapt","picAlt","description","descriptionShort","render","public","hideEl","showEl","pastDue","revised","includes","uid","url","substr","err","console","log","descFrm","trim","normSave","addEventListener","event","preventDefault","onclick","ori","db","collection","then","translateSimple","lang","catch","addMed","ref","put","on","progress","snap","setprog","bytesTransferred","totalBytes","error","alertTop","code","$","modal","complete","getDownloadURL","medUrl","resetChgImg","addExtMed","setAttribute","oninput","picDesc","picDescShort","savedInterval","saveDoc","promises","langs","forEach","syncUpt","published","finished","sentMail","translations","push","update","Promise","all","showEvent","clearInterval","setInterval","minutes","Math","floor","innerText","bar","style","width","Object","keys","events","key","date","enable","orderedKeys","slice","sort","a","b","Number","substring","indexOf","disable","length","weeks","week","wIdx","weekRow","createElement","height","appendChild","i","day","dayCell","classes","num","fontSize","maxHeight","idx","btnEvent","backgroundColor","borderColor","name","btnPlusEvent","visibilidad","horario","entries","changed","form","bod","fsec","fg0","in0","fg1","in1","fg2","in2","visOpts","itm","opt","fg3","in3","reverBtn","selLangCC","selLangC","selLang","btnTrans","sect","cont","item","type","html","text","titleTxt","alt","caption","tsec","eveTit","eveDesc","eveVis","eveTime","eveTimeLst","time","li","foot","delBtn","splice","editBtn","saveBtn","split","getElementsByName","cloneNode","uncheck","checked","removeAttribute","toggleEl","e","target","files","prevMed","read","FileReader","readAsDataURL","onload","e2","result","ultraClean","onchange","timePrev","firestore","Timestamp","fromMillis","getTime","validateRevision","revLangs","rev","newCal","nextCalID","transaction","nCal","days","getMonth","getFullYear","bDay","getDay","j","newC","fromDate","nextCal","priorCal","intId","parseInt","year","nYear","pYear","month","nMonth","toLowerCase","pMonth","calsText","abs","toString","set","admin","pop","setTimeout","open","focus","bundleURL","getBundleURLCached","getBundleURL","Error","matches","stack","match","getBaseURL","replace","exports","bundle","require","updateLink","link","newLink","remove","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","overlay","createErrorOverlay","body","stackTrace","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"editCal.ccee67fc.js","sourceRoot":"../src","sourcesContent":["import '../styles/editCal.scss';\n\nvar store = firebase.storage();\nvar rtDb = firebase.database();\n\nlet docDat, docId, docRef;\nlet lastSave = Date.now(), saved = false;\n\nlet newMedia = null;\nlet newMedSrc = null;\n\nlet eventToShow = null;\n\nconst daysOfWeek = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'], longDay = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sabado'];\nfunction fullMonth(n, l) {\n    if (l == \"es\") {\n        switch (n) {\n            case 1:\n                return \"Enero\";\n            case 2:\n                return \"Febrero\";\n            case 3:\n                return \"Marzo\";\n            case 4:\n                return \"Abril\";\n            case 5:\n                return \"Mayo\";\n            case 6:\n                return \"Junio\";\n            case 7:\n                return \"Julio\";\n            case 8:\n                return \"Agosto\";\n            case 9:\n                return \"Septiembre\";\n            case 10:\n                return \"Octubre\";\n            case 11:\n                return \"Noviembre\";\n            case 12:\n                return \"Diciembre\";\n            case 0:\n                return \"Diciembre\";\n            case 13:\n                return \"Enero\";\n        }\n    } else if (l == \"en\") {\n        switch (n) {\n            case 1:\n                return \"January\";\n            case 2:\n                return \"February\";\n            case 3:\n                return \"March\";\n            case 4:\n                return \"April\";\n            case 5:\n                return \"May\";\n            case 6:\n                return \"June\";\n            case 7:\n                return \"July\";\n            case 8:\n                return \"August\";\n            case 9:\n                return \"September\";\n            case 10:\n                return \"October\";\n            case 11:\n                return \"November\";\n            case 12:\n                return \"December\";\n            case 0:\n                return \"December\";\n            case 13:\n                return \"January\";\n        }\n    }\n}\n\nwindow.loaded = function loaded() {\n    docRef = calendarsFSRef.doc(urlSrch.get('id'));\n    calendarsFSRef.doc(urlSrch.get('id')).onSnapshot(doc => {\n        if (!doc.exists) {\n            window.location.href = '../404';\n            return;\n        }\n        docDat = doc.data();\n        docId = doc.id;\n        document.getElementById('title').innerHTML = docDat.title;\n        document.getElementById('prevMed').src = docDat.picUrl;\n        document.getElementById('inPicCapt').value = docDat.picCapt;\n        document.getElementById('inPicAlt').value = docDat.picAlt;\n        document.getElementById('inDesc').value = docDat.description;\n        document.getElementById('inDescShort').value = docDat.descriptionShort;\n        render();\n        if (docDat.public) {\n            hideEl(document.getElementById('btnAprove'));\n            hideEl(document.getElementById('btnPub'));\n        } else {\n            showEl(document.getElementById('btnAprove'));\n            if (docDat.pastDue) showEl(document.getElementById('btnPub'));\n        }\n        if (docDat.revised.includes(uid)) {\n            document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n        } else {\n            document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n        }\n        document.getElementById('btnPrevCal').href = docDat.url;\n        document.getElementById('btnPrevMail').href = '/vista-email-calendario/' + docId;\n        document.getElementById('btnSrcCal').href = `https://in-the-sky.org/newscal.php?month=${urlSrch.get('id').substr(5, 6)}&year=${urlSrch.get('id').substr(0, 4)}&maxdiff=7&country=1484&reg1=3527646&reg2=8379372&town=3530597`;\n        document.getElementById('btnSrcCal2').href = `https://in-the-sky.org/newscal.php?month=${urlSrch.get('id').substr(5, 6)}&year=${urlSrch.get('id').substr(0, 4)}&maxdiff=7&country=1170&reg1=3688685&reg2=9609540&town=3688689`;\n        document.getElementById('btnSrcCal3').href = `https://in-the-sky.org/newscal.php?month=${urlSrch.get('id').substr(5, 6)}&year=${urlSrch.get('id').substr(0, 4)}&maxdiff=7&country=1724&reg1=3117732&reg2=6355233&town=3117735`;\n    }, err => console.log(err))\n\n    function descFrm() {\n        docDat.description = document.getElementById('inDesc').value.trim();\n        docDat.descriptionShort = document.getElementById('inDescShort').value.trim();\n        normSave();\n    }\n    document.getElementById(\"frmText\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        descFrm();\n    });\n    document.getElementById('btnFileTrans').onclick = function () {\n        let ori = document.getElementById('selFileTrans').value\n        db.collection('calendars/langs/' + ori).doc(docId).get().then(async function (doc) {\n            docDat.picCapt = document.getElementById('inPicCapt').value = await translateSimple(doc.data().picCapt, ori, lang);\n            docDat.picAlt = document.getElementById('inPicAlt').value = await translateSimple(doc.data().picAlt, ori, lang);\n            docDat.description = document.getElementById('inDesc').value = await translateSimple(doc.data().description, ori, lang);\n            docDat.descriptionShort = document.getElementById('inDescShort').value = await translateSimple(doc.data().descriptionShort, ori, lang);\n            descFrm();\n        }).catch(err => console.log(err));\n    }\n\n    function addMed() {\n        let ref = store.ref('calendarMedia/' + docId + '/pic');\n        ref.put(newMedia).on('state_changed',\n            function progress(snap) {\n                setprog(document.getElementById('barChgImg'), (snap.bytesTransferred / snap.totalBytes) * 100);\n            },\n            function error(err) {\n                if (lang = \"es\") {\n                    alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n                } else if (lang = \"en\") {\n                    alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n                }\n                console.log(err);\n                $('#mdlAddMed').modal('hide');\n            },\n            function complete() {\n                ref.getDownloadURL().then(medUrl => {\n                    docDat.picUrl = medUrl;\n                    normSave();\n                    resetChgImg(true);\n                    hideEl(document.getElementById(\"frmChgImg\"));\n                }).catch(err => { console.log(err) });\n            }\n        );\n    }\n    function addExtMed() {\n        docDat.picUrl = document.getElementById('inChgImgUrl').value;\n        normSave();\n        resetChgImg(true);\n        hideEl(document.getElementById(\"frmChgImg\"));\n    }\n    document.getElementById(\"frmChgImg\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        setprog(document.getElementById('barChgImg'), 0);\n        showEl(document.getElementById(\"barChgImgCont\"));\n        hideEl(document.getElementById(\"frmChgImg\"));\n        document.getElementById(\"btnCnfChgImg\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanChgImg\").setAttribute('disabled', 'true');\n        if (newMedSrc == \"home\") addMed();\n        else addExtMed();\n    });\n}\n\ndocument.getElementById('inPicCapt').oninput = () => {\n    docDat.picCapt = document.getElementById('inPicCapt').value.trim();\n}\ndocument.getElementById('inPicAlt').oninput = () => {\n    docDat.picAlt = document.getElementById('inPicAlt').value.trim();\n}\ndocument.getElementById('inDesc').oninput = () => {\n    docDat.picDesc = document.getElementById('inDesc').value.trim();\n}\ndocument.getElementById('inDescShort').oninput = () => {\n    docDat.picDescShort = document.getElementById('inDescShort').value.trim();\n}\n\nlet savedInterval;\nfunction saveDoc() {\n    console.log('Saving...');\n\n    const promises = [];\n    langs.forEach(l => {\n        if (l != lang) {\n            let syncUpt = {\n                published: docDat.published,\n                finished: docDat.finished,\n                pastDue: docDat.pastDue,\n                public: docDat.public,\n                sentMail: docDat.sentMail,\n                revised: docDat.revised,\n                translations: docDat.translations,\n            }\n            syncUpt.translations[lang] = docDat.url;\n            promises.push(db.collection('calendars/langs/' + l).doc(docId).update(syncUpt));\n        }\n    })\n    return Promise.all(promises).then(() => {\n        return docRef.update(docDat);\n    });\n}\nfunction normSave() {\n    saveDoc().then(() => {\n        if (eventToShow) showEvent();//IMPORTANT\n        if (saved) clearInterval(savedInterval);\n        saved = true;\n        savedInterval = setInterval(() => {\n            let minutes = Math.floor((Date.now() - lastSave) / 60000);\n            if (minutes < 60) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n            else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n        }, 300010);\n        document.getElementById('tagLstSave').innerText = \"Se han guardado los cambios\";\n        lastSave = Date.now();\n        console.log('Saved!');\n    }).catch(err => {\n        document.getElementById('tagLstSave').innerText = \"Error, no se han guardado todos los cambios: \" + err.code;\n        console.log(err);\n    });\n}\n\nfunction setprog(bar, n) {\n    n = Math.floor(n);\n    bar.setAttribute('aria-valuenow', n);\n    bar.style.width = n + '%';\n    bar.innerText = n + '%';\n}\n\nfunction showEvent() {\n    Object.keys(docDat.events).forEach(key => {\n        hideEl(document.getElementById(key));\n    });\n    document.getElementById('mdlEventInfoL').innerHTML = docDat.events[eventToShow].date;\n    showEl(document.getElementById(eventToShow));\n    enable(document.getElementById('btnPriorEve'));\n    enable(document.getElementById('btnNextEve'));\n}\ndocument.getElementById('btnPriorEve').onclick = () => {\n    let orderedKeys = Object.keys(docDat.events).slice().sort((a, b) => {\n        if (Number(a[0]) == Number(b[0])) {\n            if (a.substring(1, 4) == b.substring(1, 4)) {\n                return Number(a[4]) - Number(b[4]);\n            }\n            switch (a.substring(1, 4)) {\n                case \"sun\":\n                    return -1;\n                case \"mon\":\n                    if (b.substring(1, 4) == \"sun\") return 1;\n                    return -1;\n                case \"tue\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\") return 1\n                    return -1;\n                case \"wed\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\") return 1\n                    return -1;\n                case \"thu\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\" || b.substring(1, 4) == \"wed\") return 1\n                    return -1;\n                case \"fri\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\" || b.substring(1, 4) == \"wed\" || b.substring(1, 4) == \"thu\") return 1\n                    return -1;\n                case \"sat\":\n                    return 1;\n            }\n        }\n        return Number(a[0]) - Number(b[0]);\n    });\n    let n = orderedKeys.indexOf(eventToShow) - 1;\n    if (n >= 0) {\n        eventToShow = orderedKeys[n];\n        showEvent();\n    } else {\n        disable(document.getElementById('btnPriorEve'));\n    }\n};\ndocument.getElementById('btnNextEve').onclick = () => {\n    let orderedKeys = Object.keys(docDat.events).slice().sort((a, b) => {\n        if (Number(a[0]) == Number(b[0])) {\n            if (a.substring(1, 4) == b.substring(1, 4)) {\n                return Number(a[4]) - Number(b[4]);\n            }\n            switch (a.substring(1, 4)) {\n                case \"sun\":\n                    return -1;\n                case \"mon\":\n                    if (b.substring(1, 4) == \"sun\") return 1;\n                    return -1;\n                case \"tue\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\") return 1\n                    return -1;\n                case \"wed\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\") return 1\n                    return -1;\n                case \"thu\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\" || b.substring(1, 4) == \"wed\") return 1\n                    return -1;\n                case \"fri\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\" || b.substring(1, 4) == \"wed\" || b.substring(1, 4) == \"thu\") return 1\n                    return -1;\n                case \"sat\":\n                    return 1;\n            }\n        }\n        return Number(a[0]) - Number(b[0]);\n    });\n    let n = orderedKeys.indexOf(eventToShow) + 1;\n    if (n < orderedKeys.length) {\n        eventToShow = orderedKeys[n];\n        showEvent();\n    } else {\n        disable(document.getElementById('btnNextEve'));\n    }\n};\n\nfunction render() {\n    document.getElementById('weeksCont').innerHTML = \"\";\n    docDat.weeks.forEach((week, wIdx) => {\n        let weekRow = document.createElement('tr');\n        weekRow.style.height = '10rem';\n        document.getElementById('weeksCont').appendChild(weekRow);\n        for (let i = 0; i < 7; i++) {\n            let day = week[daysOfWeek[i]]\n            let dayCell = document.createElement('td');\n            classes(dayCell, \"p-0\");\n            weekRow.appendChild(dayCell);\n            if (day) {\n                let num = document.createElement('p');\n                classes(num, \"m-0 p-1\");\n                num.style.fontSize = 'x-large';\n                num.innerHTML = '<b>' + day.date + '</b>';\n                dayCell.appendChild(num);\n\n                let events = document.createElement('div');\n                classes(events, \"autoOverflow\");\n                events.style.maxHeight = '7rem';\n                day.events.forEach((event, idx) => {\n                    let btnEvent = document.createElement('button');\n                    btnEvent.setAttribute(\"data-toggle\", \"modal\");\n                    btnEvent.setAttribute(\"data-target\", \"#mdlEventInfo\");\n                    classes(btnEvent, \"btn text-left p-1 mb-1 w-100\");\n                    btnEvent.style.backgroundColor = \"#c3e6cb\";\n                    btnEvent.style.borderColor = \"#8fd19e\";\n                    btnEvent.innerHTML = '<small>' + event.name + '</small>';\n                    btnEvent.onclick = () => {\n                        eventToShow = wIdx + daysOfWeek[i] + idx;\n                        showEvent();\n                    }\n                    events.appendChild(btnEvent);\n                });\n                let btnPlusEvent = document.createElement('button');\n                classes(btnPlusEvent, \"btn btn-scckie btn-block btn-sm\");\n                btnPlusEvent.innerHTML = '<i class=\"fas fa-plus\"></i>';\n                btnPlusEvent.onclick = () => {\n                    docDat.events[wIdx + daysOfWeek[i] + day.events.length] = {\n                        date: longDay[i] + \" \" + day.date + \" de \" + fullMonth(docId % 100),\n                        name: \"Evento sin nombre\",\n                        description: \"Sin descripción\",\n                        visibilidad: \"Visible a simple vista\",\n                        horario: [\"Ciudad de México:\", \"Bogotá:\", \"Madrid:\"]\n                    };\n                    day.events.push({\n                        name: \"Evento sin nombre\"\n                    });\n                    normSave();\n                }\n                events.appendChild(btnPlusEvent);\n                dayCell.appendChild(events);\n            }\n        }\n    });\n    document.getElementById('eventInfoCont').innerHTML = \"\";\n    for (const [key, event] of Object.entries(docDat.events)) {\n        let changed = false;\n        let form = document.createElement('div');\n        form.id = key;\n        classes(form, \"d-none overflow-auto\");\n        let bod = document.createElement('div');\n        classes(bod, \"modal-body\");\n        form.appendChild(bod);\n\n        let fsec = document.createElement('div');\n        classes(fsec, \"d-none\");\n        bod.appendChild(fsec);\n        let fg0 = document.createElement('div');\n        classes(fg0, \"form-group\");\n        fsec.appendChild(fg0);\n        fg0.innerHTML = '<label>Nombre del evento</label>';\n        let in0 = document.createElement('input');\n        in0.id = \"inEveTitle\" + key;\n        in0.setAttribute(\"type\", \"text\");\n        classes(in0, \"form-control\");\n        fg0.appendChild(in0);\n        let fg1 = document.createElement('div');\n        classes(fg1, \"form-group\");\n        fsec.appendChild(fg1);\n        fg1.innerHTML = '<label>Descripción</label>';\n        let in1 = document.createElement('textarea');\n        classes(in1, \"form-control\");\n        in1.id = \"inEveDesc\" + key;\n        in1.setAttribute(\"rows\", \"3\");\n        fg1.appendChild(in1);\n        let fg2 = document.createElement('div');\n        classes(fg2, \"form-group\");\n        fsec.appendChild(fg2);\n        fg2.innerHTML = '<label>Visiblidad</label>';\n        let in2 = document.createElement('select');\n        in2.id = \"inVis\" + key;\n        classes(in2, \"form-control\");\n        let visOpts = [\"Visible a simple vista\", \"Visible con binoculares\", \"Visible con un telescopio pequeño\", \"Visible con un telescopio de 4 pulgadas\", \"Visible con un telescopio grande\", \"No observable\"]\n        visOpts.forEach((itm, idx) => {\n            let opt = document.createElement('option');\n            opt.value = idx;\n            opt.innerHTML = itm;\n            if (itm == event.visibilidad) opt.setAttribute('selected', \"true\");\n            in2.appendChild(opt);\n        });\n        fg2.appendChild(in2);\n        let fg3 = document.createElement('div');\n        classes(fg3, \"form-group\");\n        fsec.appendChild(fg3);\n        fg3.innerHTML = '<label>Horario</label>';\n        let in3 = document.createElement('textarea');\n        classes(in3, \"form-control\");\n        in3.id = \"inTime\" + key;\n        in3.setAttribute(\"rows\", \"4\");\n        fg3.appendChild(in3);\n        if (in2.value == 5) hideEl(fg3);\n        else showEl(fg3);\n        in0.oninput = () => {\n            enable(reverBtn);\n            changed = true;\n        };\n        in1.oninput = () => {\n            enable(reverBtn);\n            changed = true;\n        };\n        in2.oninput = () => {\n            enable(reverBtn);\n            changed = true;\n            if (in2.value == 5) hideEl(fg3);\n            else showEl(fg3);\n        };\n        in3.oninput = () => {\n            enable(reverBtn);\n            changed = true;\n        };\n\n        let selLangCC = document.createElement('div');\n        classes(selLangCC, \"row\");\n        let selLangC = document.createElement('div');\n        classes(selLangC, \"col-auto\");\n        selLangCC.appendChild(selLangC);\n        let selLang = document.createElement('select');\n        classes(selLang, \"form-control ml-auto h-100\");\n        selLang.setAttribute(\"name\", \"selTransLang\");\n        selLangC.appendChild(selLang);\n        let btnTrans = document.createElement('button');\n        classes(btnTrans, 'btn btn-scckie mx-2');\n        btnTrans.innerHTML = '<i class=\"fas fa-language\"></i>';\n        btnTrans.onclick = function () {\n            db.collection('cookies/langs/' + selLang.value).doc(docId).get().then(async function (doc) {\n                let sect = doc.data().cont[idx];\n                if (item.type != sect.type) return;\n                if (sect.type == 'head') {\n                    docDat.cont[idx].title = await translateSimple(sect.title, selLang.value, lang);\n                } else if (sect.type == 'html') {\n                    docDat.cont[idx].html = await translateSimple(sect.html, selLang.value, lang);\n                } else if (sect.type == 'parra') {\n                    docDat.cont[idx].text = await translateSimple(sect.text, selLang.value, lang);\n                    if (sect.title != \"0\") {\n                        docDat.cont[idx].titleTxt = await translateSimple(sect.titleTxt, selLang.value, lang);\n                    }\n                } else if (sect.type == 'medSimple') {\n                    docDat.cont[idx].alt = await translateSimple(sect.alt, selLang.value, lang);\n                    docDat.cont[idx].caption = await translateSimple(sect.caption, selLang.value, lang);\n                }\n                console.log(docDat.cont[idx]);\n                normSave();\n            }).catch(err => console.log(err));\n        }\n        selLangCC.appendChild(btnTrans);\n        fsec.appendChild(selLangCC);\n\n        let tsec = document.createElement('div');\n        bod.appendChild(tsec);\n        let eveTit = document.createElement('h3');\n        eveTit.innerHTML = event.name;\n        tsec.appendChild(eveTit);\n        let eveDesc = document.createElement('p');\n        eveDesc.innerHTML = event.description;\n        tsec.appendChild(eveDesc);\n        let eveVis = document.createElement('p');\n        eveVis.innerHTML = \"Visibilidad: \" + event.visibilidad;\n        tsec.appendChild(eveVis);\n        let eveTime = document.createElement('p');\n        classes(eveTime, \"mb-0\");\n        eveTime.innerHTML = \"Horario: \";\n        tsec.appendChild(eveTime);\n        let eveTimeLst = document.createElement('ul');\n        tsec.appendChild(eveTimeLst);\n        event.horario.forEach(time => {\n            let li = document.createElement('li');\n            li.innerHTML = time;\n            eveTimeLst.appendChild(li);\n        });\n        if (event.visibilidad == \"No observable\") {\n            hideEl(eveTime);\n            hideEl(eveTimeLst);\n        }\n        else {\n            showEl(eveTime);\n            showEl(eveTimeLst);\n        }\n\n\n        let foot = document.createElement('div');\n        classes(foot, \"modal-footer\");\n        form.appendChild(foot);\n\n        let delBtn = document.createElement('button');\n        classes(delBtn, \"btn btn-danger mr-auto\")\n        delBtn.setAttribute(\"type\", \"button\");\n        delBtn.innerText = \"Borrar\";\n        delBtn.onclick = () => {\n            for (let i = Number(key.substr(4)) + 1; i < docDat.weeks[Number(key[0])][key.substr(1, 3)].events.length; i++) {\n                docDat.events[key.substr(0, 4) + (i - 1)] = docDat.events[key.substr(0, 4) + i]\n            }\n            delete docDat.events[key.substr(0, 4) + (docDat.weeks[Number(key[0])][key.substr(1, 3)].events.length - 1)];\n            docDat.weeks[Number(key[0])][key.substr(1, 3)].events.splice(Number(key.substr(4)), 1);\n            $('#mdlEventInfo').modal('hide');\n            eventToShow = null;\n            normSave();\n        };\n        foot.appendChild(delBtn);\n        let editBtn = document.createElement('button');\n        classes(editBtn, \"btn btn-info\");\n        editBtn.setAttribute(\"type\", \"button\");\n        editBtn.innerText = \"Editar\";\n        editBtn.onclick = () => {\n            in0.value = event.name;\n            in1.innerHTML = event.description;\n            in2.value = visOpts.indexOf(event.visibilidad);\n            if (in2.value == 5) hideEl(fg3);\n            else showEl(fg3);\n            in3.innerHTML = \"\";\n            event.horario.forEach(time => {\n                in3.innerHTML += time + \"\\n\";\n            });\n            hideEl(tsec);\n            showEl(fsec);\n            showEl(reverBtn);\n            showEl(saveBtn);\n            enable(saveBtn);\n            hideEl(editBtn);\n        };\n        foot.appendChild(editBtn);\n        let reverBtn = document.createElement('button');\n        classes(reverBtn, \"btn btn-secondary mr-1 d-none\");\n        reverBtn.setAttribute(\"type\", \"button\");\n        disable(reverBtn);\n        reverBtn.innerText = \"Revertir\";\n        reverBtn.onclick = () => {\n            changed = false;\n            disable(reverBtn);\n            in0.value = event.name;\n            in1.innerHTML = event.description;\n            in2.value = visOpts.indexOf(event.visibilidad);\n            if (in2.value == 5) hideEl(fg3);\n            else showEl(fg3);\n            in3.innerHTML = \"\";\n            event.horario.forEach(time => {\n                in3.innerHTML += time.trim() + \"\\n\";\n            });\n        };\n        foot.appendChild(reverBtn);\n        let saveBtn = document.createElement('button');\n        classes(saveBtn, \"btn btn-scckie d-none\");\n        saveBtn.setAttribute(\"type\", \"button\");\n        disable(saveBtn);\n        saveBtn.innerText = \"Guardar\";\n        saveBtn.onclick = () => {\n            disable(reverBtn);\n            disable(saveBtn);\n            if (changed) {\n                docDat.weeks[Number(key[0])][key.substr(1, 3)].events[key[4]].name = event.name = in0.value;\n                event.description = in1.value.trim();\n                event.visibilidad = visOpts[in2.value];\n                event.horario = [];\n                in3.value.trim().split('\\n').forEach(time => {\n                    if (time != \"\" && time != \" \") event.horario.push(time);\n                });\n                normSave();\n            } else {\n                hideEl(fsec);\n                showEl(tsec);\n                hideEl(reverBtn);\n                hideEl(saveBtn);\n                showEl(editBtn);\n            }\n        };\n        foot.appendChild(saveBtn);\n\n        document.getElementById('eventInfoCont').appendChild(form);\n    }\n\n    document.getElementsByName('selTransLang').forEach(itm => {\n        itm.innerHTML='';\n    });\n    langs.forEach((l, i) => {\n        if (l != lang) {\n            let opt = document.createElement('option');\n            if (i == 0) {\n                opt.setAttribute('selected', 'true');\n            }\n            opt.value = opt.innerText = l;\n            document.getElementsByName('selTransLang').forEach(itm => {\n                console.log(itm)\n                itm.appendChild(opt.cloneNode(true));\n            });\n        }\n    });\n}\n\n\nfunction resetChgImg(uncheck) {\n    document.getElementById('prevMed').src = docDat.picUrl;\n    if (uncheck) {\n        document.getElementById('inMedSrc0').checked = false;\n        document.getElementById('inMedSrc1').checked = false;\n    }\n    document.getElementById('inChgImg').value = \"\";\n    document.getElementById('inChgImgUrl').value = \"\";\n    document.getElementById('inChgImg').removeAttribute('required');\n    document.getElementById('inChgImgUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"barChgImgCont\"));\n    hideEl(document.getElementById(\"inChgImgFileCont\"));\n    hideEl(document.getElementById(\"inChgImgUrlCont\"));\n    document.getElementById(\"btnCnfChgImg\").removeAttribute('disabled');\n    document.getElementById(\"btnCanChgImg\").removeAttribute('disabled');\n}\ndocument.getElementById('btnChgImg').onclick = () => {\n    resetChgImg(true);\n    toggleEl(document.getElementById(\"frmChgImg\"));\n};\ndocument.getElementById('inChgImg').addEventListener('change', e => {\n    newMedia = e.target.files[0];\n    function prevMed() {\n        var read = new FileReader();\n        read.readAsDataURL(newMedia);\n        read.onload = function (e2) {\n            document.getElementById(\"prevMed\").src = e2.target.result;\n        };\n    };\n    newMedia.name = ultraClean(newMedia.name, '');\n    document.getElementById('inChgImgL').innerHTML = newMedia.name;\n    prevMed(newMedia);\n});\ndocument.getElementById('inChgImgUrl').onchange = function () {\n    document.getElementById(\"prevMed\").src = document.getElementById('inChgImgUrl').value;\n};\ndocument.getElementById('inMedSrc0').onclick = function () {\n    newMedSrc = \"home\";\n    resetChgImg(false);\n    document.getElementById('inChgImg').setAttribute('required', 'true');\n    showEl(document.getElementById(\"inChgImgFileCont\"));\n}\ndocument.getElementById('inMedSrc1').onclick = function () {\n    newMedSrc = \"out\";\n    resetChgImg(false);\n    document.getElementById('inChgImgUrl').setAttribute('required', 'true');\n    showEl(document.getElementById(\"inChgImgUrlCont\"));\n}\n\ndocument.getElementById('btnPrevCal').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\ndocument.getElementById('btnPrevMail').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\n\nfunction validateRevision() {\n    let revLangs = 0;\n    langs.forEach(l => {\n        let rev = docDat.revised[l] ? docDat.revised[l].length : 0;\n        if (docDat.revised[l] && !docDat.revised[l].includes(uid)) rev++;\n        if (rev >= 2) revLangs++;\n    });\n    return revLangs == langs.length;\n}\n\ndocument.getElementById('btnAprove').onclick = function () {\n    if (docDat.revised[lang] && docDat.revised[lang].includes(uid)) {\n        docDat.revised[lang].splice(docDat.revised[lang].indexOf(uid), 1);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n    } else {\n        if (!docDat.revised[lang]) docDat.revised[lang] = [];\n        docDat.revised[lang].push(uid);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n    }\n    if (validateRevision()) {\n        docDat.finished = true;\n        newCal();\n    } else {\n        docDat.finished = false;\n    }\n    normSave();\n};\n\nfunction newCal() {\n    let nextCalID;\n    rtDb.ref('nextCal').transaction(nCal => {\n        if (nCal) {\n            nextCalID = nCal;\n            nCal++;\n            if (nCal % 100 == 13) {\n                nCal -= 12;\n                nCal += 100;\n            }\n        }\n        return nCal;\n    }, (error) => {\n        if (error) {\n            console.log(error);\n        } else {\n            let date = new Date((nextCalID - nextCalID % 100) / 100 + ' ' + nextCalID % 100 + ' ' + '00:00');\n            let weeks = [];\n            let days;\n            if (date.getMonth() == 1) {\n                if (date.getFullYear() % 4 == 0) {\n                    days = 29;\n                } else {\n                    days = 28;\n                }\n            } else if (date.getMonth() % 2 == 0) {\n                if (date.getMonth() <= 6) days = 31;\n                else days = 30;\n            } else {\n                if (date.getMonth() <= 6) days = 30;\n                else days = 31;\n            }\n            let bDay = date.getDay();\n            for (let i = 1; i <= days; i = i) {\n                let week = {};\n                for (let j = bDay; j < daysOfWeek.length; j++) {\n                    if (i > days) break;\n                    week[daysOfWeek[j]] = {\n                        date: i,\n                        events: []\n                    }\n                    i++;\n                }\n                weeks.push(week);\n                bDay = 0;\n            }\n            const promises = [];\n            langs.forEach(l => {\n                if (l != lang) {\n                    let newC = {\n                        events: {},\n                        published: firebase.firestore.Timestamp.fromDate(date),\n                        description: \"\",\n                        descriptionShort: \"\",\n                        finished: false,\n                        pastDue: false,\n                        picUrl: \"\",\n                        picAlt: \"\",\n                        picCapt: \"\",\n                        public: false,\n                        sentMail: false,\n                        revised: {},\n                        title: \"\",\n                        url: \"\",\n                        nextCal: \"\",\n                        priorCal: \"\",\n                        weeks: weeks,\n                        translations: {}\n                    }\n\n                    let intId = parseInt(nextCalID);\n                    let year = (intId - intId % 100) / 100;\n                    let nYear = (intId - intId % 100) / 100;\n                    let pYear = (intId - intId % 100) / 100;\n                    if (intId % 100 == 12) nYear++;\n                    if (intId % 100 == 1) pYear--;\n                    let month = fullMonth(intId % 100);\n                    let nMonth = fullMonth(intId % 100 + 1).toLowerCase();\n                    let pMonth = fullMonth(intId % 100 - 1).toLowerCase();\n                    let calsText = \"\";\n                    switch (l) {\n                        case \"es\":\n                            calsText = \"calendario-astronomico\";\n                            newC.title = \"Calendario Astronómico de \" + month + \" \" + year;\n                            break;\n                        case \"en\":\n                            calsText = \"astronomic-calendar\";\n                            newC.title = \"Astronomic Calendar of \" + month + \" \" + year;\n                            break;\n                    }\n                    newC.url = \"https://sciencecookies.net/\" + calsText + \"/\" + year + \"/\" + month.toLowerCase() + \"/\";\n                    newC.nextCal = \"https://sciencecookies.net/\" + calsText + \"/\" + nYear + \"/\" + nMonth + \"/\";\n                    newC.priorCal = \"https://sciencecookies.net/\" + calsText + \"/\" + pYear + \"/\" + pMonth + \"/\";\n\n                    promises.push(db.collection('calendars/langs/' + l).doc(Math.abs(nextCalID).toString()).set(newC));\n                }\n            })\n            return Promise.all(promises).then(() => {\n                console.log('exito');\n            }).catch(err => console.log(err));\n        }\n    });\n}\n\n$('#mdlPublish').on('show.bs.modal', e => {\n    if (validateRevision()) {\n        showEl(document.getElementById('btnCnfPublish'));\n        document.getElementById('mdlPublishTxt').innerText = \"El calendario está listo para publicar\";\n    } else {\n        hideEl(document.getElementById('btnCnfPublish'));\n        document.getElementById('mdlPublishTxt').innerText = \"Para publicar es necesario que lo hayan aprovado al menos dos personas.\";\n    }\n});\n\ndocument.getElementById('btnCnfPublish').onclick = function () {\n    if (docDat.public) return;\n    setprog(document.getElementById('barPublish'), 0);\n    showEl(document.getElementById('barPublishCont'));\n\n    docDat.public = true;\n    setprog(document.getElementById('barPublish'), 25);\n\n    saveDoc().then(() => {\n        setprog(document.getElementById('barPublish'), 58);\n        admin.database().ref('calendarios/' + docId).set({\n            pop: 0\n        }, err => {\n            if (err) {\n                if (lang = \"es\") {\n                    alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n                } else if (lang = \"en\") {\n                    alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n                }\n                console.log(err);\n            } else {\n                setprog(document.getElementById('barPublish'), 100);\n                classes(document.getElementById('barPublish'), 'bg-success');\n                if (lang = \"es\") {\n                    alertTop(\"Publicado correctamente\", 1);\n                } else if (lang = \"en\") {\n                    alertTop(\"Published successfully\", 1);\n                }\n                setTimeout(function () {\n                    window.open(docDat.url, '_blank').focus();\n                }, 2500);\n                $('#mdlPublish').modal('hide');\n                console.log('Published ' + docId + ' calendar');\n                return null;\n            }\n        });\n    }).catch(err => {\n        if (lang = \"es\") {\n            alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n        } else if (lang = \"en\") {\n            alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n        }\n        console.log(err);\n    });\n};","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}