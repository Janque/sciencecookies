parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"AnJc":[function(require,module,exports) {

},{}],"ppKG":[function(require,module,exports) {
"use strict";function e(e,a){return o(e)||l(e,a)||n(e,a)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function l(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,l=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(a=(r=i.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(d){l=!0,o=d}finally{try{a||null==i.return||i.return()}finally{if(l)throw o}}return n}}function o(e){if(Array.isArray(e))return e}require("../styles/edit.scss");var r,i,d,c,s=firebase.storage(),u=firebase.database(),m=-1,p=-1,h=Date.now(),b=!1,v=-1,g=-1,f=-1,E=null,y=null,C=[];function T(){console.log("Saving...");var e=r.published.toDate(),t=e.getFullYear().toString();e.getMonth()<9&&(t+="0"),t+=e.getMonth()+1;var n="";switch(lang){case"es":n="galletas";break;case"en":n="cookies"}r.url="https://sciencecookies.net/"+n+"/"+t+"/"+r.file+"/",H();var a=[];return langs.forEach(function(e){if(e!=lang){var t={authors:r.authors.slice(),media:r.media.slice(),java:r.java,notify:r.notify,public:r.public,beenPublic:r.beenPublic,dledit:r.dledit,created:r.created,ledit:r.ledit,published:r.published,pop:r.pop,likes:r.likes,favs:r.favs,revised:r.revised,translations:r.translations,fixedCats:r.fixedCats.slice()};t.fixedCats.forEach(function(n,a){t.fixedCats.splice(a,1,catTranslations[n][e])}),t.translations[lang]=r.url,a.push(db.collection("cookies/langs/"+e).doc(i).update(t))}}),Promise.all(a).then(function(){return d.update(r)})}function k(){T().then(function(){b&&clearInterval(c),b=!0,c=setInterval(function(){var e=Math.floor((Date.now()-h)/6e4);document.getElementById("tagLstSave").innerText=e<60?"Guardado hace "+e+" minutos":"Guardado hace "+Math.floor(e/60)+" horas"},300010),document.getElementById("tagLstSave").innerText="Se han guardado todos los cambios",h=Date.now()}).catch(function(e){document.getElementById("tagLstSave").innerText="Error, no se han guardado todos los cambios: "+e.code,console.log(e)})}function I(e){var t=null;"html"==e?t={type:e,html:""}:"parra"==e?t={type:e,text:"",title:"0"}:"youtube"==e?t={type:e,vidUrl:"",ratio:"16by9"}:"medSimple"==e&&(t={type:e,medUrl:"https://via.placeholder.com/150.webp",alt:"",caption:"",hasCapt:"true",width:"75%"}),null!=t&&r.cont.splice(p,0,t),x()}function M(e,t){e=document.getElementById(e),t=Math.floor(t),e.setAttribute("aria-valuenow",t),e.style.width=t+"%",e.innerText=t+"%"}function w(e,t,n){t=Math.floor(t),n=Math.floor(n);for(var a=t;a<=n;a++)M(e,a)}function B(e){return s.ref("cookieMedia/"+i+"/"+e).delete()}function A(){document.getElementById("contMedMan").innerHTML='<div class="col mb-4">\n        <div class="card text-dark bg-light h-100 cardBorder" style="border-color: #343a40;">\n            <a type="button" data-toggle="modal" data-target="#mdlAddMed" data-dismiss="modal" aria-label="Close" class="text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center" onclick="addFrom=0;">\n                <h1 style="font-size: 6rem;" class="mb-0"><i class="far fa-plus-square"></i></h1>\n            </a>\n        </div>\n    </div>',document.getElementById("contMedCho").innerHTML='<div class="col mb-4">\n        <div class="card text-dark bg-light h-100 cardBorder" style="border-color: #343a40;">\n            <a type="button" data-toggle="modal" data-target="#mdlAddMed" data-dismiss="modal" aria-label="Close" class="text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center" onclick="addFrom=1;">\n                <h1 style="font-size: 6rem;" class="mb-0"><i class="far fa-plus-square"></i></h1>\n            </a>\n        </div>\n    </div>',r.media.forEach(function(e,t){var n=document.createElement("div");classes(n,"col mb-4");var a=document.createElement("div");classes(a,"card text-light bg-dark"),n.appendChild(a);var l=document.createElement("img");classes(l,"card-img"),l.src=e.medUrl,a.appendChild(l);var o=document.createElement("div");classes(o,"card-img-overlay pt-0"),o.style.paddingLeft=".9rem",o.style.paddingRight=".9rem",a.appendChild(o);var i=document.createElement("div");classes(i,"row mb-2 p-0"),o.appendChild(i);var d=document.createElement("button");classes(d,"btn btn-light btn-scckie btn-sm"),d.innerHTML='<i class="fas fa-trash-alt"></i>',d.onclick=function(){g==t?(g=-1,document.getElementById("btnAlrtClsSsn")&&document.getElementById("btnAlrtClsSsn").click(),"externo"!=e.medFile?B(e.medFile).then(function(){e.medUrl==r.picUrl&&(r.picUrl=""),r.media.splice(t,1),k()}).catch(function(e){return console.log(e)}):(e.medUrl==r.picUrl&&(r.picUrl=""),r.media.splice(t,1),k())):((lang="es")?alertTop("<strong>¿Quieres eliminar esta imagen?</strong> Presiona de nuevo el botón para confirmar.",2):(lang="en")&&alertTop("<strong>Do you want to delete this image? </strong> Press the button again to confirm.",2),g=t,setTimeout(function(){g=-1},3e3))},i.appendChild(d);var c=document.createElement("div");classes(c,"tooltipn ml-auto");var s=document.createElement("button");classes(s,"btn btn-light btn-scckie btn-sm");var u=document.createElement("span");classes(u,"tooltipTextn"),u.innerHTML="Copiar",s.appendChild(u),s.innerHTML+='<i class="fas fa-link"></i>',s.onclick=function(){window.open(e.medUrl).focus(),u.innerHTML="URL copiado"},s.onmouseout=function(){u.innerHTML="Copiar"},c.appendChild(s),i.appendChild(c);var m=document.createElement("button"),p=document.createElement("button");e.medUrl==r.picUrl?(classes(m,"btn btn-light btn-scckie btn-sm ml-1"),m.innerHTML='<i class="fas fa-star"></i>',m.onclick=function(){r.picUrl="",k()},i.appendChild(m)):(classes(p,"btn btn-light btn-scckie btn-sm ml-1"),p.innerHTML='<i class="far fa-star"></i>',p.onclick=function(){r.picUrl=e.medUrl,k()},i.appendChild(p)),document.getElementById("contMedMan").appendChild(n);var h=document.createElement("div");classes(h,"col mb-4");var b=document.createElement("a");classes(b,"text-decoration-none"),b.setAttribute("type","button"),b.onclick=function(){-1!=f&&(r.cont[f].medUrl=e.medUrl,k())},b.setAttribute("data-dismiss","modal"),h.appendChild(b);var v=document.createElement("div");classes(v,"card text-light bg-dark"),b.appendChild(v);var E=document.createElement("img");classes(E,"card-img"),E.src=e.medUrl,v.appendChild(E),document.getElementById("contMedCho").appendChild(h)})}function x(){var e;document.getElementById("cont").innerHTML="",r.beenPublic?e=r.published:r.published=e=new firebase.firestore.Timestamp.now,r.cont.forEach(function(t,n){var a=document.createElement("div");a.id="sect"+n;var l=document.createElement("div");classes(l,"dropdown-divider mx-2"),"head"!=t.type&&a.appendChild(l);var o=document.createElement("div");o.id="sect"+n+"t";var i=document.createElement("div");classes(i,"d-none"),i.id="sect"+n+"f";var d,c,s,u,b=document.createElement("div");if(classes(b,"row mb-2 px-2"),"head"!=t.type&&"ref"!=t.type&&(d=document.createElement("button"),classes(d,"btn btn-light btn-link-scckie ml-2"),d.innerHTML='<i class="fas fa-trash-alt"></i>',d.onclick=function(){m==n?(m=-1,document.getElementById("btnAlrtClsSsn")&&document.getElementById("btnAlrtClsSsn").click(),r.cont.splice(n,1),x(),k()):((lang="es")?alertTop("<strong>¿Quieres eliminar esta sección?</strong> Presiona de nuevo el botón para confirmar.",2):(lang="en")&&alertTop("<strong>Do you want to delete this section? </strong> Press the button again to confirm.",2),m=n,setTimeout(function(){m=-1},3e3))},b.appendChild(d)),"ref"!=t.type&&(c=document.createElement("button"),classes(c,"btn btn-light btn-link-scckie ml-auto"),c.innerHTML='<i class="fas fa-edit"></i>',c.onclick=function(){if(toggleEl(c),toggleEl(s),toggleEl(i),"Se han guardado todos los cambios"==document.getElementById("tagLstSave").innerText){var e=Math.floor((Date.now()-h)/6e4);document.getElementById("tagLstSave").innerText=e>0?e>59?"Guardado hace "+Math.floor(e/60)+" horas":"Guardado hace "+e+" minutos":"Guardado hace "+Math.floor((Date.now()-h)/1e3)+" segundos"}},b.appendChild(c),s=document.createElement("button"),classes(s,"btn btn-light btn-link-scckie ml-auto d-none"),s.innerHTML='<i class="fas fa-check"></i>',s.onclick=function(){toggleEl(c),toggleEl(s),toggleEl(i),k()},b.appendChild(s),u=document.createElement("button"),classes(u,"btn btn-light btn-link-scckie mx-2"),u.innerHTML='<i class="fas fa-plus"></i>',u.setAttribute("data-toggle","modal"),u.setAttribute("data-target","#mdlPlusSect"),u.onclick=function(){p=n+1},b.appendChild(u)),a.appendChild(b),"head"==t.type){var v=e.toDate();v=v.getDate()+"/"+(v.getMonth()+1)+"/"+v.getFullYear();var g=r.ledit.toDate();g=g.getDate()+"/"+(g.getMonth()+1)+"/"+g.getFullYear();var E=document.createElement("h1");classes(E,"text-center"),E.innerHTML=r.cont[0].title,o.appendChild(E);var y,C,T,I=document.createElement("p");if("es"==lang?(y="Publicado: ",C="Ultima actualización: ",T="Autor(es): "):"en"==lang&&(y="Published: ",C="Last updated: ",T="Author(s):"),I.innerText=y+v,o.appendChild(I),r.dledit){var M=document.createElement("p");M.innerText=C+g,o.appendChild(M)}var w=document.createElement("p");w.innerText=T+r.cont[0].author,o.appendChild(w);var B=document.createElement("div");classes(B,"row justify-content-center mb-2");var A=document.createElement("div");classes(A,"col col-lg-6");var L=document.createElement("input");classes(L,"form-control form-control-lg text-center"),L.setAttribute("type","text"),L.setAttribute("placeholder",r.cont[0].title),L.value=r.cont[0].title,A.appendChild(L),B.appendChild(A),i.appendChild(B),L.oninput=function(){r.title=r.cont[0].title=L.value.trim(),E.innerHTML=r.cont[0].title};var P=document.createElement("div");classes(P,"row mb-2");var H=document.createElement("label");classes(H,"col-sm-2 col-form-label"),H.innerText=y;var U=document.createElement("div");classes(U,"col");var S=document.createElement("input");classes(S,"form-control"),S.setAttribute("type","text"),S.setAttribute("readonly","true"),S.value=v,U.appendChild(S),P.appendChild(H),P.appendChild(U),i.appendChild(P);var N=document.createElement("div"),D=document.createElement("label"),F=document.createElement("div"),j=document.createElement("input");r.dledit&&(classes(N,"row mb-2"),classes(D,"col-sm-2 col-form-label"),D.innerText=C,classes(F,"col"),classes(j,"form-control"),j.setAttribute("type","text"),j.setAttribute("readonly","true"),j.value=g,F.appendChild(j),N.appendChild(D),N.appendChild(F),i.appendChild(N));var q=document.createElement("div");classes(q,"row mb-2");var J=document.createElement("label");classes(J,"col-sm-2 col-form-label"),J.innerText=T;var R=document.createElement("div");classes(R,"form-row justify-content-around pt-2");var $=document.createElement("div");classes($,"form-group col-auto mr-2");var G=document.createElement("div");classes(G,"form-check"),$.appendChild(G);var O=document.createElement("input");classes(O,"form-check-input"),O.setAttribute("type","checkbox"),r.cont[0].author.includes(" Andrea Garma")&&O.setAttribute("checked","true"),O.value=" Andrea Garma";var Y=document.createElement("label");classes(Y,"form-check-label"),O.setAttribute("for","authr0"),Y.innerText="Andrea Garma",G.appendChild(O),G.appendChild(Y),R.appendChild($);var z=document.createElement("div");classes(z,"form-group col-auto mr-2");var V=document.createElement("div");classes(V,"form-check"),z.appendChild(V);var _=document.createElement("input");classes(_,"form-check-input"),_.setAttribute("type","checkbox"),r.cont[0].author.includes(" Javier Pantoja")&&_.setAttribute("checked","true"),_.value=" Javier Pantoja";var Q=document.createElement("label");classes(Q,"form-check-label"),_.setAttribute("for","authr1"),Q.innerText="Javier Pantoja",V.appendChild(_),V.appendChild(Q),R.appendChild(z);var W=document.createElement("div");classes(W,"form-group col-auto mr-2");var K=document.createElement("div");classes(K,"form-check"),W.appendChild(K);var X=document.createElement("input");classes(X,"form-check-input"),X.setAttribute("type","checkbox"),r.cont[0].author.includes(" Paulina Vargas")&&X.setAttribute("checked","true"),X.value=" Paulina Vargas";var Z=document.createElement("label");function ee(e,t,n){var a=[];e&&a.push(" Andrea Garma"),t&&a.push(" Javier Pantoja"),n&&a.push(" Paulina Vargas"),a.empty&&a.push(" Anónimo"),r.cont[0].author=a.slice(),r.authors=a.slice(),w.innerText="Autor(es):"+r.cont[0].author}classes(Z,"form-check-label"),X.setAttribute("for","authr2"),Z.innerText="Paulina Vargas",K.appendChild(X),K.appendChild(Z),R.appendChild(W),O.onclick=function(){ee(O.checked,_.checked,X.checked)},_.onclick=function(){ee(O.checked,_.checked,X.checked)},X.onclick=function(){ee(O.checked,_.checked,X.checked)},q.appendChild(J),q.appendChild(R),i.appendChild(q)}else if("ref"==t.type){var te=document.createElement("h3");"es"==lang?te.innerHTML="<br>Referencias":"en"==lang&&(te.innerHTML="<br>References"),o.appendChild(te),t.ref.forEach(function(e,t){var a=document.createElement("div");classes(a,"row mb-2");var l=document.createElement("div");classes(l,"col"),a.appendChild(l);var i=document.createElement("div");classes(i,"col d-none"),a.appendChild(i);var d=document.createElement("div");classes(d,"col-auto"),a.appendChild(d);var c,s=document.createElement("p");function u(e){s.innerHTML=e}function m(e){s.innerHTML="",c=document.createElement("a"),classes(c,"text-warning text-break"),c.href=e,c.setAttribute("target","_blank"),c.setAttribute("rel","nofollow"),c.innerHTML=e+' <i class="fas fa-external-link-alt"></i>',s.appendChild(c)}function p(){E.value=E.value.trim(),r.cont[n].ref[t].link=f.value,r.cont[n].ref[t].type=E.value,"web"==e.type?(m(e.link),f.setAttribute("placeholder","https://google.com")):"cite"==e.type&&(u(e.link),f.setAttribute("placeholder","Ref"))}l.appendChild(s),"web"==e.type?m(e.link):"cite"==e.type&&u(e.link);var b=document.createElement("div");classes(b,"row");var v=document.createElement("div");classes(v,"col");var g=document.createElement("div");classes(g,"col-auto");var f=document.createElement("input"),E=document.createElement("select");classes(f,"form-control"),f.setAttribute("type","text"),f.value=e.link,"web"==e.type&&f.setAttribute("placeholder","https://google.com"),"cite"==e.type&&f.setAttribute("placeholder","Ref"),f.onchange=function(){p()},classes(E,"form-control form-control-sm");var y=document.createElement("option");y.value="web","web"==e.type&&y.setAttribute("selected","true"),y.innerText="Web",E.appendChild(y);var C,T,I=document.createElement("option");function M(){toggleEl(l),toggleEl(i),toggleEl(C),toggleEl(T)}"cite"==e.type&&I.setAttribute("selected","true"),I.value="cite",I.innerText="Otro",E.appendChild(I),E.onchange=function(){p()},v.appendChild(f),g.appendChild(E),b.appendChild(v),b.appendChild(g),i.appendChild(b),C=document.createElement("button"),classes(C,"btn btn-light btn-link-scckie ml-auto"),C.innerHTML='<i class="fas fa-edit"></i>',C.onclick=function(){M(),"Se han guardado todos los cambios"==document.getElementById("tagLstSave").innerText&&(document.getElementById("tagLstSave").innerText="Guardado hace "+Math.floor((Date.now()-h)/6e4)+" minutos")},T=document.createElement("button"),classes(T,"btn btn-light btn-link-scckie ml-auto d-none"),T.innerHTML='<i class="fas fa-check"></i>',T.onclick=function(){M(),r.cont[n].ref.sort(function(e,t){var n=e.link.toUpperCase(),a=t.link.toUpperCase();return n<a?-1:n>a?1:0}),k()},d.appendChild(C),d.appendChild(T);var w=document.createElement("button");classes(w,"btn btn-light btn-link-scckie ml-2"),w.innerHTML='<i class="fas fa-trash-alt"></i>',w.onclick=function(){r.cont[n].ref.splice(t,1),k()},d.appendChild(w),o.appendChild(a),""==e.link&&C.click()});var ne=document.createElement("a");classes(ne,"btn btn-light btn-scckie"),ne.onclick=function(){le()},ne.innerHTML='<i class="fas fa-plus"></i>',te.appendChild(ne);var ae=document.createElement("a");function le(){r.cont[n].ref.push({type:"web",link:""}),x()}classes(ae,"btn btn-light btn-scckie btn-lg btn-block border border-light"),ae.onclick=function(){le()},ae.innerHTML='<i class="fas fa-plus"></i>',o.appendChild(ae)}else if("parra"==t.type){var oe;Number(t.title)>0&&(2==Number(t.title)&&(o.innerHTML="<br>"),(oe=document.createElement("h"+t.title)).innerHTML=t.titleTxt,o.appendChild(oe));var re=document.createElement("p");re.innerHTML=t.text,o.appendChild(re);var ie=document.createElement("div");classes(ie,"row");var de=document.createElement("div");classes(de,"col");var ce=document.createElement("div");classes(ce,"col-auto");var se=document.createElement("input"),ue=document.createElement("select");classes(se,"form-control"),se.setAttribute("type","text"),Number(t.title)>0?(se.value=t.titleTxt,se.setAttribute("placeholder","Subtítulo"),se.removeAttribute("readonly")):(se.value="",se.setAttribute("placeholder",""),se.setAttribute("readonly","true")),se.oninput=function(){r.cont[n].titleTxt=oe.innerHTML=se.value},classes(ue,"form-control form-control-sm");for(var me=0;me<7;me++){var pe=document.createElement("option");pe.value=me,t.title==me&&pe.setAttribute("selected","true"),pe.innerText=me,ue.appendChild(pe)}ue.oninput=function(){r.cont[n].title=ue.value,Number(ue.value)>0?(se.setAttribute("placeholder","Subtítulo"),se.removeAttribute("readonly"),2==Number(t.title)?o.innerHTML="<br>":o.innerHTML="",(oe=document.createElement("h"+t.title)).innerHTML=r.cont[n].titleTxt=se.value,o.appendChild(oe),o.appendChild(re)):(se.value="",se.setAttribute("placeholder",""),se.setAttribute("readonly","true"),r.cont[n].titleTxt=se.value,o.innerHTML="",o.appendChild(re))},de.appendChild(se),ce.appendChild(ue),ie.appendChild(de),ie.appendChild(ce),i.appendChild(ie);var he=document.createElement("div");classes(ie,"row mb-2");var be=document.createElement("div");classes(de,"col");var ve=document.createElement("textarea");classes(ve,"form-control"),ve.setAttribute("rows","8"),ve.value=t.text,ve.oninput=function(){r.cont[n].text=re.innerHTML=ve.value.trim()},be.appendChild(ve),he.appendChild(be),i.appendChild(he),Number(t.title)>0&&""==t.titleTxt&&c.click()}else if("html"==t.type){var ge=document.createElement("div");ge.innerHTML=t.html,o.appendChild(ge);var fe=document.createElement("div");classes(fe,"row mb-2");var Ee=document.createElement("div");classes(Ee,"col");var ye=document.createElement("textarea");classes(ye,"form-control"),ye.setAttribute("rows","8"),ye.value=t.html,ye.onchange=function(){r.cont[n].html=ge.innerHTML=ye.value.trim()},Ee.appendChild(ye),fe.appendChild(Ee),i.appendChild(fe),""==t.html&&c.click()}else if("youtube"==t.type){var Ce=document.createElement("div");classes(Ce,"embed-responsive embed-responsive-"+t.ratio);var Te=document.createElement("iframe");Te.src=t.vidUrl,Te.setAttribute("frameborder","0"),Te.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),Te.setAttribute("allowfullscreen","true"),Ce.appendChild(Te),o.appendChild(Ce);var ke=document.createElement("div");classes(ke,"row");var Ie=document.createElement("div");classes(Ie,"col");var Me=document.createElement("div");classes(Me,"col-auto");var we=document.createElement("label");we.innerText="URL";var Be=document.createElement("input");classes(Be,"form-control"),Be.setAttribute("type","text"),Be.value=t.vidUrl,Be.onchange=function(){var e=Be.value.trim();if(11==e.length)e="https://www.youtube.com/embed/"+e;else{var t,a=1;do{t=e[a-1]+e[a],a++}while("e/"!=t&&"v="!=t);e="https://www.youtube.com/embed/"+e.substr(a,11)}r.cont[n].vidUrl=Te.src=e};var Ae=document.createElement("small");classes(Ae,"text-muted"),Ae.innerText="aaaaaaaaaaa o https://youtu.be/aaaaaaaaaaa o https://www.youtube.com/watch?v=aaaaaaaaaaa";var xe=document.createElement("label");xe.innerText="Ratio";var Le=document.createElement("select");classes(Le,"form-control form-control-sm");for(var Pe=["21by9","16by9","4by3","1by1"],He=0;He<4;He++){var Ue=document.createElement("option");Ue.value=Pe[He],t.ratio==Pe[He]&&Ue.setAttribute("selected","true"),Ue.innerText=Pe[He].replaceAll("by",":"),Le.appendChild(Ue)}Le.oninput=function(){r.cont[n].ratio=Le.value,Pe.forEach(function(e){Ce.classList.remove("embed-responsive-"+e)}),classes(Ce,"embed-responsive-"+t.ratio)},Ie.appendChild(we),Ie.appendChild(Be),Ie.appendChild(Ae),Me.appendChild(xe),Me.appendChild(Le),ke.appendChild(Ie),ke.appendChild(Me),i.appendChild(ke),""==t.vidUrl&&c.click()}else if("medSimple"==t.type){var Se=document.createElement("figure");classes(Se,"mx-auto"),Se.style.width=t.width,Se.style.position="relative",Se.style.borderRadius=".25rem";var Ne=document.createElement("img");Ne.setAttribute("alt",t.alt),Ne.src=t.medUrl,classes(Ne,"w-100"),Se.appendChild(Ne);var De=document.createElement("div");classes(De,"card-img-overlay pt-0"),De.style.paddingLeft=".9rem",De.style.paddingRight=".9rem";var Fe=document.createElement("div");classes(Fe,"row mb-2 p-0"),De.appendChild(Fe);var je=document.createElement("button");classes(je,"btn btn-light btn-scckie btn-sm ml-auto"),je.innerHTML='<i class="fas fa-exchange-alt"></i>',je.setAttribute("data-toggle","modal"),je.setAttribute("data-target","#mdlMedCho"),je.onclick=function(){f=n},Fe.appendChild(je),Se.appendChild(De);var qe=document.createElement("figcaption");qe.style.fontSize="70%",qe.style.fontWeight="lighter",qe.innerHTML=t.caption,t.hasCapt&&Se.appendChild(qe),o.appendChild(Se);var Je=document.createElement("div");classes(Je,"form-group mb-2");var Re=document.createElement("label");Re.innerText="Tamaño";var $e=document.createElement("div");classes($e,"row");var Ge=document.createElement("div");classes(Ge,"col align-center d-flex pr-0");var Oe=document.createElement("input");Oe.setAttribute("type","range"),Oe.setAttribute("max","100"),Oe.setAttribute("min","0"),Oe.setAttribute("step","1"),Oe.value="75",classes(Oe,"form-control-range"),Oe.oninput=function(){Ye.innerHTML=Oe.value+"%",Se.style.width=r.cont[n].width=Oe.value+"%"},Ge.appendChild(Oe);var Ye=document.createElement("span");classes(Ye,"badge badge-primary range-value-L"),Ye.innerText="75%";var ze=document.createElement("div");classes(ze,"col-auto"),ze.appendChild(Ye),$e.appendChild(Ge),$e.appendChild(ze),Je.appendChild(Re),Je.appendChild($e),i.appendChild(Je);var Ve=document.createElement("div");classes(Ve,"row");var _e=document.createElement("div");classes(_e,"col");var Qe=document.createElement("div");classes(Qe,"col-auto");var We=document.createElement("label");We.innerText="Pie de foto";var Ke=document.createElement("input");classes(Ke,"form-control"),Ke.setAttribute("type","text"),Ke.value=t.caption,Ke.oninput=function(){qe.innerHTML=r.cont[n].caption=Ke.value.trim()};var Xe=document.createElement("select");classes(Xe,"form-control form-control-sm");var Ze=document.createElement("option");Ze.value="true","true"==t.hasCapt&&Ze.setAttribute("selected","true"),Ze.innerText="Sí",Xe.appendChild(Ze);var et=document.createElement("option");et.value="false","false"==t.hasCapt&&et.setAttribute("selected","true"),et.innerText="No",Xe.appendChild(et),Xe.oninput=function(){r.cont[n].hasCapt=Xe.value,"true"==Xe.value?(qe.innerHTML=Ke.value=r.cont[n].caption,Ke.removeAttribute("readonly"),Se.appendChild(qe)):(Ke.value=r.cont[n].caption="",Ke.setAttribute("readonly","true"),qe.innerHTML="",Se.innerHTML="",Se.appendChild(Ne),Se.appendChild(De))},_e.appendChild(We),_e.appendChild(Ke),Qe.appendChild(Xe),Ve.appendChild(_e),Ve.appendChild(Qe),i.appendChild(Ve);var tt=document.createElement("div");classes(tt,"row");var nt=document.createElement("div");classes(nt,"col");var at=document.createElement("label");at.innerText="Alt";var lt=document.createElement("input");classes(lt,"form-control"),lt.setAttribute("type","text"),lt.value=t.alt,lt.oninput=function(){r.cont[n].alt=lt.value.trim(),Ne.setAttribute("alt",lt.value.trim())},nt.appendChild(at),nt.appendChild(lt),tt.appendChild(nt),i.appendChild(tt),"true"==t.hasCapt&&""==t.caption&&c.click()}a.appendChild(o),a.appendChild(i),document.getElementById("cont").appendChild(a)}),document.getElementById("inJava").innerText=r.java,document.getElementById("javaIns").innerHTML=r.java}function L(){langs.forEach(function(e){if(e!=lang){var t=document.createElement("option");t.value=t.innerText=e,document.getElementById("inTransFrom").appendChild(t)}})}function P(){M("barPublish",100),classes(document.getElementById("barPublish"),"bg-success"),(lang="es")?alertTop("Publicado correctamente",1):(lang="en")&&alertTop("Published successfully",1),setTimeout(function(){window.open(r.url,"_blank").focus()},2500),console.log("Data saved successfully."),$("#mdlPublish").modal("hide")}function H(){var t=0;function n(){M("barPublish",t)}(C=[]).push(r.published.toDate().getFullYear().toString()),r.published.toDate().getFullYear().toString()!=r.ledit.toDate().getFullYear().toString()&&C.push(r.ledit.toDate().getFullYear().toString()),t++,n(),r.authors.forEach(function(e){e.substring(1).split(" ").forEach(function(e){C.push(ultraClean(e,""))}),t+=3/r.authors.length,n()});var a=[];r.title.split(" ").forEach(function(e){a.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim())}),t++,n(),r.description.split(" ").forEach(function(e){a.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim()),t+=3/r.description.split(" ").length,n()}),r.cont.forEach(function(e){"parra"==e.type?(Number(e.title)>0&&e.titleTxt.split(" ").forEach(function(e){a.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim())}),e.text.split(" ").forEach(function(l){a.push(l.replaceAll(/(<([^>]*)>)/gi," ").trim()),t+=14/r.cont.length/e.text.split(" ").length,n()})):"medSimple"==e.type&&(""!=e.alt&&e.alt.split(" ").forEach(function(e){a.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim())}),""!=e.caption&&e.caption.split(" ").forEach(function(e){a.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim())}),t+=14/r.cont.length,n())});for(var l=[],o=a.length,i=0;i<o;i++){var d=a[i];-1!=d.indexOf(" ")&&(d.split(" ").forEach(function(e){l.push(e)}),a.splice(i,1),i--,o--)}l.forEach(function(e){a.push(e)}),t++,n(),o=a.length;for(var c=0;c<o;c++)a.splice(c,1,ultraClean(a[c],"")),t+=3/a.length,n();var s={},u=0,m=0,p=["1","2","3","4","6","7","8","9","0","tan","ser","los","serian","pero","podemos","su","o","y","e","la","del","es","si","en","otro","de","tendrian","no","se","una","mas","el","a","embargo","las","sin","con","un","para","por","les","","vez","gran","este","esta","estos","estas","nos","al","dio","has","preguntado","el","lo","tu","tus","hacen","otros","para","ellos","ellas","ese","esa","esos","esas","detras","delante","nos","le","muy","casi","son","pues","a","ha","han","fue"];a.forEach(function(e){p.includes(e)||(s[e]?s[e]++:(s[e]=1,m++),u++);t+=3/a.length,n()});for(var h=0,b=Object.entries(s);h<b.length;h++){var v=e(b[h],2),g=v[0];v[1]>u/m&&C.push(g),t+=3/Object.entries(s).length,n()}r.fixedCats.forEach(function(e){C.push(e)}),r.cats=C,console.log(C)}window.loaded=function(){allCats.forEach(function(e,t){var n=document.createElement("div");classes(n,"form-group col-auto");var a=document.createElement("div");classes(a,"form-check");var l=document.createElement("input");l.id="cat"+t,classes(l,"form-check-input"),l.value=e,l.setAttribute("type","checkbox"),l.onclick=function(){1==l.checked?r.fixedCats.push(this.value):r.fixedCats.splice(r.fixedCats.indexOf(this.value),1)},a.appendChild(l);var o=document.createElement("label");o.setAttribute("for","cat"+t),classes(o,"form-check-label"),o.innerText=textCats[t],a.appendChild(o),n.appendChild(a),document.getElementById("catFrmCont").appendChild(n)}),(d=cookiesFSRef.doc(urlSrch.get("id"))).onSnapshot(function(e){r=e.data(),i=e.id,document.getElementById("inFile").value=r.file,document.getElementById("inDesc").value=r.description,allCats.forEach(function(e,t){document.getElementById("cat"+t).checked=r.fixedCats.includes(document.getElementById("cat"+t).value)}),x(),A(),r.public?(document.getElementById("btnPrivate").classList.remove("d-none"),document.getElementById("btnAprove").classList.add("d-none"),document.getElementById("btnPub").classList.add("d-none")):(document.getElementById("btnPrivate").classList.add("d-none"),document.getElementById("btnAprove").classList.remove("d-none"),document.getElementById("btnPub").classList.remove("d-none")),r.revised[lang]&&r.revised[lang].includes(uid)?document.getElementById("btnAprove").innerHTML='<i class="fas fa-check-square"></i>':document.getElementById("btnAprove").innerHTML='<i class="far fa-check-square"></i>',document.getElementById("btnPrevCook").href=r.url,document.getElementById("btnPrevMail").href="../vista-email/"+r.file},function(e){console.log(e)}),L(),document.getElementById("frmTranslate").addEventListener("submit",function(e){e.preventDefault(),classes(document.getElementById("btnCnfTranslate"),"disabled"),classes(document.getElementById("btnCanTranslate0"),"disabled"),classes(document.getElementById("btnCanTranslate1"),"disabled"),M("barTranslate",0),showEl(document.getElementById("barTranslateCont")),w("barTranslate",0,90),firebase.app().functions("us-east1").httpsCallable("translations-translateFullCookie")({docId:i,from:document.getElementById("inTransFrom").value,target:lang})?(M("barTranslate",100),$("#mdlTranslate").modal("hide"),document.getElementById("btnCnfTranslate").classList.remove("disabled"),document.getElementById("btnCanTranslate0").classList.remove("disabled"),document.getElementById("btnCanTranslate1").classList.remove("disabled"),hideEl(document.getElementById("barTranslateCont"))):((lang="es")?alertTop("<strong>¡Ha ocurrido un error!</strong>",0):(lang="en")&&alertTop("<strong>¡There has been an error!</strong>",0),console.log("err"))}),document.getElementById("frmFile").addEventListener("submit",function(e){var t;e.preventDefault(),t=document.getElementById("inFile").value,d.get().then(function(e){e.empty||t==r.file?(r.description=document.getElementById("inDesc").value.trim(),r.file=t,k()):(lang="es")?alertTop("Ese nombre de archivo ya esta en uso.",0,"alrtPlusContainer"):(lang="en")&&alertTop("That file name is already in use.",0,"alrtPlusContainer")}).then(function(){console.log("exito")}).catch(function(e){return console.log(e)})}),document.getElementById("frmAddMed").addEventListener("submit",function(e){e.preventDefault(),M("barNewMed",0),showEl(document.getElementById("barNewMedCont")),hideEl(document.getElementById("frmAddMed")),document.getElementById("btnCnfNewMed").setAttribute("disabled","true"),document.getElementById("btnCanNewMed0").setAttribute("disabled","true"),document.getElementById("btnCanNewMed1").setAttribute("disabled","true"),"home"==y?function e(t){var n=s.ref("cookieMedia/"+i+"/i"+t+E.name);n.getDownloadURL().then(function(n){e(t+1)}).catch(function(e){"storage/object-not-found"==e.code?n.put(E).on("state_changed",function(e){M("barNewMed",e.bytesTransferred/e.totalBytes*100)},function(e){(lang="es")?alertTop("<strong>¡Ha ocurrido un error!</strong> "+e.code,0):(lang="en")&&alertTop("<strong>¡There has been an error!</strong> "+e.code,0),console.log(e),$("#mdlAddMed").modal("hide")},function(){n.getDownloadURL().then(function(e){r.media.push({medFile:"i"+t+E.name,medUrl:e}),k(),A(),$("#mdlAddMed").modal("hide"),0==v?$("#mdlMedMan").modal("show"):$("#mdlMedCho").modal("show")}).catch(function(e){console.log(e)})}):console.log(e)})}(0):(r.media.push({medFile:"externo",medUrl:document.getElementById("inNewMedUrl").value}),k(),$("#mdlAddMed").modal("hide"),0==v?$("#mdlMedMan").modal("show"):$("#mdlMedCho").modal("show"))})},document.getElementById("inFile").oninput=function(){document.getElementById("inFile").value=ultraClean(document.getElementById("inFile").value,"-")},document.getElementById("inJava").onchange=function(){r.java=document.getElementById("javaIns").innerHTML=document.getElementById("inJava").value},document.getElementById("btnEditJs").onclick=function(){toggleEl(document.getElementById("btnEditJs")),toggleEl(document.getElementById("btnCheckJs")),document.getElementById("inJava").removeAttribute("readonly")},document.getElementById("btnCheckJs").onclick=function(){toggleEl(document.getElementById("btnEditJs")),toggleEl(document.getElementById("btnCheckJs")),document.getElementById("inJava").setAttribute("readonly","true"),k()},$("#mdlAddMed").on("hidden.bs.modal",function(e){document.getElementById("prevNewMed").src="",document.getElementById("inNewMedL").innerHTML="Elige una imagen",document.getElementById("inNewMedUrl").value="",document.getElementById("inNewMed").removeAttribute("required"),document.getElementById("inNewMedUrl").removeAttribute("required"),hideEl(document.getElementById("barNewMedCont")),hideEl(document.getElementById("inNewMedFileCont")),hideEl(document.getElementById("inNewMedUrlCont")),showEl(document.getElementById("frmAddMed")),document.getElementById("btnCnfNewMed").removeAttribute("disabled"),document.getElementById("btnCanNewMed0").removeAttribute("disabled"),document.getElementById("btnCanNewMed1").removeAttribute("disabled")}),document.getElementById("inNewMed").addEventListener("change",function(e){var t;(E=e.target.files[0]).name=ultraClean(E.name,""),document.getElementById("inNewMedL").innerHTML=E.name,(t=new FileReader).readAsDataURL(E),t.onload=function(e){document.getElementById("prevNewMed").src=e.target.result}}),document.getElementById("inNewMedUrl").onchange=function(){document.getElementById("prevNewMed").src=document.getElementById("inNewMedUrl").value},document.getElementById("inMedSrc0").onclick=function(){y="home",document.getElementById("inNewMed").setAttribute("required","true"),document.getElementById("inNewMedUrl").removeAttribute("required"),showEl(document.getElementById("inNewMedFileCont")),hideEl(document.getElementById("inNewMedUrlCont"))},document.getElementById("inMedSrc1").onclick=function(){y="out",document.getElementById("inNewMed").removeAttribute("required"),document.getElementById("inNewMedUrl").setAttribute("required","true"),hideEl(document.getElementById("inNewMedFileCont")),showEl(document.getElementById("inNewMedUrlCont"))},document.getElementById("inSendUpt").onclick=function(){document.getElementById("inSendUpt").checked?(showEl(document.getElementById("uptDescCont")),document.getElementById("inUptDesc").setAttribute("required","true")):(hideEl(document.getElementById("uptDescCont")),document.getElementById("inUptDesc").removeAttribute("required"))},document.getElementById("btnPrevCook").onclick=function(){r.timePrev=new firebase.firestore.Timestamp.fromMillis(new Date(Date.now()).getTime()+9e5),k()},document.getElementById("btnPrevMail").onclick=function(){r.timePrev=new firebase.firestore.Timestamp.fromMillis(new Date(Date.now()).getTime()+9e5),k()},document.getElementById("btnPrivate").onclick=function(){r.public=!1,k()},document.getElementById("btnAprove").onclick=function(){r.revised[lang]&&r.revised[lang].includes(uid)?(r.revised[lang].splice(r.revised[lang].indexOf(uid),1),document.getElementById("btnAprove").innerHTML='<i class="far fa-check-square"></i>'):(r.revised[lang]||(r.revised[lang]=[]),r.revised[lang].push(uid),document.getElementById("btnAprove").innerHTML='<i class="fas fa-check-square"></i>'),k()},$("#mdlAddMed").on("hiden.bs.modal",function(e){document.getElementById("inMedSrc0").setAttribute("checked","false"),document.getElementById("inMedSrc1").setAttribute("checked","false"),document.getElementById("inNewMed").removeAttribute("required"),document.getElementById("inNewMedUrl").removeAttribute("required"),hideEl(document.getElementById("inNewMedFileCont")),hideEl(document.getElementById("inNewMedUrlCont"))}),$("#mdlPublish").on("show.bs.modal",function(e){var t=0;langs.forEach(function(e){var n=r.revised[e]?r.revised[e].length:0;r.revised[e]&&!r.revised[e].includes(uid)&&n++,n>=2&&t++}),t==langs.length?(classes(document.getElementById("btnCnfPublish"),"d-none"),document.getElementById("mdlPublishTxt").innerText="Para publicar es necesario que lo hayan aprovado al menos dos personas.",document.getElementById("frmPublish").classList.add("d-none")):(document.getElementById("btnCnfPublish").classList.remove("d-none"),document.getElementById("mdlPublishTxt").innerText="La galleta está lista para publicar",document.getElementById("frmPublish").classList.remove("d-none"),r.beenPublic&&document.getElementById("sendUptCont").classList.remove("d-none"))}),document.getElementById("btnCnfPublish").onclick=function(){r.public||(M("barPublish",0),showEl(document.getElementById("barPublishCont")),r.public=!0,r.ledit=new firebase.firestore.Timestamp.now,r.beenPublic=!0,r.revised={},M("barPublish",31),r.beenPublic?(document.getElementById("inSendUpt").checked?(r.dledit=!0,r.notify=!0):(r.dledit=!1,r.notify=!1),M("barPublish",45),document.getElementById("inSendUpt").checked?(r.uptMsg=!0,r.uptDescrip=document.getElementById("inUptDesc").value.trim()):(r.uptMsg=!1,r.uptDescrip=""),M("barPublish",62)):(r.notify=!0,r.published=new firebase.firestore.Timestamp.now,M("barPublish",62)),T().then(function(){u.ref("galletas/"+i).set({pop:r.pop,likes:r.likes,favs:r.favs},function(e){e?console.log("Data could not be saved."+e):(M("barPublish",84),P())})}).catch(function(e){(lang="es")?alertTop("<strong>¡Ha ocurrido un error!</strong> "+e.code,0):(lang="en")&&alertTop("<strong>¡There has been an error!</strong> "+e.code,0),console.log(e)}))};
},{"../styles/edit.scss":"AnJc"}]},{},["ppKG"], null)
//# sourceMappingURL=/edit.77cb222a.js.map