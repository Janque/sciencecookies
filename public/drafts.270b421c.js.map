{"version":3,"sources":["js/drafts.js"],"names":["rtDB","firebase","database","window","loaded","initSrch","newSrch","srchStr","wordArr","document","getElementById","value","split","i","length","location","href","addEventListener","e","preventDefault","plusCookie","title","trim","file","cookiesFSRef","where","limit","get","then","snap","empty","lang","alertTop","classList","add","setAttribute","remove","setprog","id","ref","transaction","today","last","err","console","log","promises","langs","forEach","l","push","db","collection","doc","set","authors","author","cont","type","media","picUrl","description","owner","uid","java","revised","notify","public","beenPublic","dledit","created","firestore","Timestamp","now","ledit","published","pop","likes","favs","url","fixedCats","cats","translations","es","Promise","all","setTimeout","catch","previewLim","kywords","srtOrd","desc","srchRef","nxtp","paglast","page","allChk","stAf","urlSrch","replace","selected","undefined","orderBy","startAfter","dcookiesFSRef","shwSrch","innerHTML","docs","idx","col","createElement","card","helpStr","clas","data","h","row","col0","badge","innerText","appendChild","col1","drp","btndrp","onclick","contains","$","dropdown","drpmenu","drpitm0","drpitm1","open","focus","drpitm2","drpitm3","d","toDate","month","getFullYear","toString","getMonth","authTxt","noImgTxt","creatTxt","uptTxt","pubTxt","noPubTxt","a","img","src","alt","cbody","f","getDate","splice","removeAttribute","reSrch","np","scrollIntoView","modal","inFileChanged","cancelPlus","onfocus","onchange","rmDiacs","toLowerCase","replaceAll","n","style","width","oninput"],"mappings":"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","file":"drafts.270b421c.js","sourceRoot":"../src","sourcesContent":["var rtDB = firebase.database();\n\nwindow.loaded = function loaded() {\n    initSrch(false);\n    function newSrch() {\n        let srchStr = '?k=';\n        let wordArr = document.getElementById('srcBox').value.split(' ');\n        srchStr = srchStr + wordArr[0];\n        for (let i = 1; i < wordArr.length; i++) {\n            srchStr = srchStr + '+' + wordArr[i];\n        }\n        srchStr = srchStr + '&o=' + document.getElementById('inOrd').value;\n        srchStr = srchStr + '&d=' + document.getElementById('inDir').value;\n        window.location.href = srchStr;\n    }\n    document.getElementById(\"frmSrch\").addEventListener(\"submit\", e => {\n        e.preventDefault();\n        newSrch();\n    });\n\n    function plusCookie() {\n        let title = document.getElementById('inTitle').value.trim();\n        let file = document.getElementById('inFile').value;\n        cookiesFSRef.where('file', '==', file).limit(1).get().then(snap => {\n            if (!snap.empty) {\n                if (lang = \"es\") {\n                    alertTop(\"Ese nombre de archivo ya esta en uso.\", 0, 'alrtPlusContainer');\n                } else if (lang = \"en\") {\n                    alertTop(\"That file name is already in use.\", 0, 'alrtPlusContainer');\n                }\n            } else {\n                document.getElementById('btnPlusConf').classList.add('d-none');\n                document.getElementById('btnCanPlus0').setAttribute('disabled', 'true');\n                document.getElementById('btnCanPlus1').setAttribute('disabled', 'true');\n                document.getElementById('barCont').classList.remove('d-none');\n                setprog('3');\n                let id;\n                rtDB.ref('tdaysID').transaction(today => {\n                    if (today) {\n                        today.last++;\n                        id = today.today;\n                        if (today.last < 10) id += '0';\n                        id += today.last;\n                    }\n                    return today;\n                }, err => {\n                    if (err) {\n                        setprog('0');\n                        if (lang = \"es\") {\n                            alertTop(\"<strong>Ocurrió un error: \" + err + \".</strong><br>LLamar a Javier.\", 0, 'alrtPlusContainer');\n                        } else if (lang = \"en\") {\n                            alertTop(\"<strong>There has been an error: \" + err + \".</strong><br>Call Javier.\", 0, 'alrtPlusContainer');\n                        }\n                        console.log(err);\n                    } else {\n                        setprog('52');\n                        const promises = [];\n                        langs.forEach((l, i) => {\n                            setprog(30 / langs.length * i);\n                            promises.push(db.collection('cookies/langs/' + l).doc(id).set({\n                                authors: [author],\n                                cont: [\n                                    {\n                                        type: \"head\",\n                                        title: title,\n                                        author: [author]\n                                    },\n                                    {\n                                        type: \"ref\",\n                                        ref: []\n                                    }\n                                ],\n                                media: [],\n                                picUrl: \"\",\n                                title: title,\n                                description: \"\",\n                                file: file,\n                                owner: uid,\n                                java: \"\",\n                                revised: {},\n                                notify: false,\n                                public: false,\n                                beenPublic: false,\n                                dledit: false,\n                                created: new firebase.firestore.Timestamp.now(),\n                                ledit: new firebase.firestore.Timestamp.now(),\n                                published: new firebase.firestore.Timestamp.now(),\n                                pop: 0,\n                                likes: 0,\n                                favs: 0,\n                                url: \"\",\n                                fixedCats: [],\n                                cats: [],\n                                translations: {\n                                    es: file\n                                }\n                            }));\n                        });\n                        Promise.all(promises).then(() => {\n                            setprog('90');\n                            setTimeout(function () {\n                                setprog('100');\n                                document.getElementById('bar').classList.add('bg-success');\n                                if (lang = \"es\") {\n                                    alertTop(`Creado con exito. Redirigiendo...<br>Si no te redirige automáticamente, haz <a class=\"btn-link-scckie\" href=\"../editar?id=${id}\">click aqui</a>.`, 1, 'alrtPlusContainer');\n                                } else if (lang = \"en\") {\n                                    alertTop(`Successfully created. Redirigiendo...<br>If you aren't automatically redirected, <a class=\"btn-link-scckie\" href=\"../edit?id=${id}\">click here</a>.`, 1, 'alrtPlusContainer');\n                                }\n                            }, 1000);\n                            setTimeout(function () {\n                                if (lang = \"es\") {\n                                    window.location.href = '../editar?id=' + id;\n                                } else if (lang = \"en\") {\n                                    window.location.href = '../edit?id=' + id;\n                                }\n                            }, 3000);\n                        }).catch(err => console.log(err));\n                    }\n                });\n            }\n        }).catch(err => console.log(err));\n    }\n    document.getElementById(\"frmPlus\").addEventListener(\"submit\", e => {\n        e.preventDefault();\n        plusCookie();\n    });\n}\n\nconst previewLim = 21;\n//Get search params\nvar kywords, srtOrd, desc, srchRef;\nvar nxtp = false, paglast = [null], page = 1;\nvar allChk = false;\nfunction initSrch(stAf) {\n    kywords = \"\";\n    if (urlSrch.get('k') != null) {\n        kywords = urlSrch.get('k').replace('+', ' ');\n        document.getElementById('srcBox').value = kywords;\n    };\n    document.getElementById(\"inSrchOrd0\").selected = false;\n    document.getElementById(\"inSrchOrd1\").selected = false;\n    document.getElementById(\"inSrchOrd2\").selected = false;\n    document.getElementById(\"inSrchOrd3\").selected = false;\n    srtOrd = urlSrch.get('o');\n    switch (srtOrd) {\n        case 'created':\n            document.getElementById(\"inSrchOrd0\").selected = true;\n            break;\n        case 'published':\n            document.getElementById(\"inSrchOrd1\").selected = true;\n            break;\n        case 'ledit':\n            document.getElementById(\"inSrchOrd2\").selected = true;\n            break;\n        case 'pop':\n            document.getElementById(\"inSrchOrd3\").selected = true;\n            break;\n        default:\n            srtOrd = 'created';\n            break;\n    }\n    document.getElementById(\"inSrchDir0\").selected = false;\n    document.getElementById(\"inSrchDir1\").selected = false;\n    desc = urlSrch.get('d');\n    if (desc == 'asc') {\n        desc = false;\n        document.getElementById(\"inSrchDir1\").selected = true;\n    } else {\n        desc = true;\n        document.getElementById(\"inSrchDir0\").selected = true;\n    }\n    if (page > 1 && stAf && paglast[page - 1] != null && paglast[page - 1] != undefined) {\n        if (kywords == undefined || kywords == null || kywords == \"\") {\n            if (!desc) {\n                srchRef = cookiesFSRef.orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n            }\n        } else {\n            if (!desc) {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n            } else {\n                srchRef = dcookiesFSRef.where('title', '==', kywords).orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n            }\n        }\n    } else {\n        if (kywords == undefined || kywords == null || kywords == \"\") {\n            if (!desc) {\n                srchRef = cookiesFSRef.orderBy(srtOrd).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.orderBy(srtOrd, 'desc').limit(previewLim);\n            }\n        } else {\n            if (!desc) {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd, 'desc').limit(previewLim);\n            }\n        }\n    }\n    shwSrch();\n}\nfunction shwSrch() {\n    if ((kywords == undefined || kywords == null || kywords == \"\") && page == 1) {\n        document.getElementById('crdContainer').innerHTML = `<div class=\"col mb-4\">\n            <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n                <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlPlus\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\">\n                    <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n                </a>\n            </div>\n        </div>`;\n    } else {\n        document.getElementById('crdContainer').innerHTML = \"\";\n    }\n    srchRef.get().then(snap => {\n        let docs = snap.docs;\n        nxtp = false;\n        let idx = 0;\n        if (docs.length < 1) {\n            document.getElementById('crdContainer').innerHTML = `<h5 class=\"mt-0 text-center\">No se han encontrado resultados</h5><div class=\"col mb-4\">\n            <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n                <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlPlus\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\">\n                    <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n                </a>\n            </div>\n        </div>`;\n        }\n        docs.forEach(function (doc) {\n            let col = document.createElement('col');\n            col.classList.add('col');\n            col.classList.add('mb-4');\n\n            let card = document.createElement('div');\n            let helpStr = \"card text-dark bg-light h-100 cardBorder\";\n            helpStr = helpStr.split(' ');\n            helpStr.forEach(clas => {\n                card.classList.add(clas);\n            });\n            if (doc.data().owner == uid) {\n                card.classList.add('border-success');\n            } else {\n                card.classList.add('border-secondary');\n            }\n\n            let h = document.createElement('div');\n            helpStr = \"card-header bg-light m-0 py-0 text-right\";\n            helpStr = helpStr.split(' ');\n            helpStr.forEach(clas => {\n                h.classList.add(clas);\n            });\n            let row = document.createElement('div');\n            row.classList.add('row');\n            row.classList.add('justify-content-between');\n            if (!doc.data().public) {\n                let col0 = document.createElement('div');\n                col0.classList.add('col-auto');\n                col0.classList.add('p-0');\n                let badge = document.createElement('span');\n                badge.classList.add('badge');\n                badge.classList.add('badge-warning');\n                badge.innerText = 'Draft';\n                col0.appendChild(badge);\n                row.appendChild(col0);\n            }\n            let col1 = document.createElement('div');\n            col1.classList.add('col-auto');\n            col1.classList.add('p-0');\n            col1.classList.add('ml-auto');\n            let drp = document.createElement('div');\n            drp.classList.add('dropdown');\n            let btndrp = document.createElement('button');\n            btndrp.classList.add('btn');\n            btndrp.classList.add('btn-light');\n            btndrp.setAttribute('type', 'button');\n            btndrp.setAttribute('data-toogle', 'dropdown');\n            btndrp.setAttribute('aria-haspopup', \"true\");\n            btndrp.setAttribute('aria-expanded', \"false\");\n            btndrp.innerHTML = '<i class=\"fas fa-ellipsis-h\"></i>';\n            btndrp.onclick = function () {\n                if (document.getElementById(\"drpMenu\" + doc.id).classList.contains('show')) {\n                    $(\"#drpMenu\" + doc.id).dropdown('hide');\n                } else {\n                    $(\"#drpMenu\" + doc.id).dropdown('show');\n                    setTimeout(function () {\n                        $(\"#drpMenu\" + doc.id).dropdown('hide');\n                    }, 5000);\n                }\n            };\n            drp.appendChild(btndrp);\n            let drpmenu = document.createElement('div');\n            drpmenu.classList.add('dropdown-menu');\n            drpmenu.classList.add('dropdown-menu-right');\n            drpmenu.setAttribute('id', \"drpMenu\" + doc.id);\n            let drpitm0 = document.createElement('button');\n            drpitm0.classList.add('dropdown-item');\n            drpitm0.onclick = function () {\n                if (lang == \"es\") {\n                    window.location.href = '../editar?id=' + doc.id;\n                } else if (lang == \"en\") {\n                    window.location.href = '../edit?id=' + doc.id;\n                }\n            };\n            if (lang == \"es\") {\n                drpitm0.innerHTML = 'Editar <i class=\"fas fa-edit\"></i>';\n            } else if (lang == \"en\") {\n                drpitm0.innerHTML = 'Edit <i class=\"fas fa-edit\"></i>';\n            }\n            drpmenu.appendChild(drpitm0);\n            let drpitm1 = document.createElement('button');\n            drpitm1.classList.add('dropdown-item');\n            drpitm1.onclick = function () {\n                window.open('../vista-email/' + doc.data().file, '_blank').focus();\n            };\n            drpitm1.innerHTML = 'Vista correo <i class=\"fas fa-envelope\"></i>';\n            drpmenu.appendChild(drpitm1);\n            let drpitm2 = document.createElement('button');\n            let drpitm3 = document.createElement('button');\n            let d = doc.data().created.toDate();\n            if (doc.data().public) {\n                drpitm2.classList.add('dropdown-item');\n                drpitm2.onclick = function () {\n                    let month = d.getFullYear().toString();\n                    if (d.getMonth() < 9) {\n                        month += '0';\n                    }\n                    month += (d.getMonth() + 1);\n                    window.open(doc.data().url, '_blank').focus();\n                };\n                drpitm2.innerHTML = 'Ver artículo <i class=\"fas fa-eye\"></i>';\n                drpmenu.appendChild(drpitm2);\n                /*drpitm3.classList.add('dropdown-item');@# sync langs\n                drpitm3.onclick = function () {\n                    cookiesFSRef.doc(doc.id).update({\n                        public: false\n                    });\n                };\n                drpitm3.innerHTML = 'Volver privado <i class=\"fas fa-lock\"></i>';*/\n                drpmenu.appendChild(drpitm3);\n            }\n            drp.appendChild(drpmenu);\n            col1.appendChild(drp);\n            row.appendChild(col1);\n            h.appendChild(row);\n            card.appendChild(h);\n\n\n            let authTxt, noImgTxt, creatTxt, uptTxt, pubTxt, noPubTxt;\n            if (lang = \"es\") {\n                authTxt = \"Autor(es)\";\n                noImgTxt = \"No hay imagen\";\n                noPubTxt = \"Sin publicar\";\n                creatTxt = \"Creado: \";\n                uptTxt = \"Actualizado: \";\n                pubTxt = \"Publicado: \";\n            } else if (lang = \"en\") {\n                authTxt = \"Author(s)\";\n                noImgTxt = \"No image\";\n                noPubTxt = \"Not public\";\n                creatTxt = \"Created: \";\n                uptTxt = \"Updated: \";\n                pubTxt = \"Published: \";\n            }\n\n            let a = document.createElement('a');\n            if (lang == \"es\") {\n                a.href = '../editar?id=' + doc.id;\n            } else if (lang == \"en\") {\n                a.href = '../edit?id=' + doc.id;\n            }\n            a.classList.add('text-decoration-none');\n            a.classList.add('text-dark');\n            let img = document.createElement('img');\n            img.src = doc.data().picUrl;\n            img.classList.add('card-img-top');\n            img.alt = noImgTxt;\n            a.appendChild(img);\n            let cbody = document.createElement('div');\n            cbody.classList.add('card-body');\n            cbody.innerHTML = '<h3 class=\"card-title\">' + doc.data().title + '</h3>\\n<p>' + authTxt + ':' + doc.data().authors + '</p>\\n<p class=\"card-text\">' + doc.data().description + '</p>\\n'\n            a.appendChild(cbody);\n            let f = document.createElement('div');\n            f.classList.add('card-footer');\n            f.classList.add('text-muted');\n            f.innerHTML = '<p>' + creatTxt + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            d = doc.data().ledit.toDate();\n            f.innerHTML += '<p>' + uptTxt + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            if (doc.data().public) {\n                d = doc.data().published.toDate();\n                f.innerHTML += '<p>' + pubTxt + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            } else {\n                f.innerHTML += '<p>' + noPubTxt + '</p>\\n';\n            }\n            a.appendChild(f)\n            card.appendChild(a);\n\n            col.appendChild(card);\n            document.getElementById('crdContainer').appendChild(col);\n            if (idx == previewLim - 1) {\n                if (paglast[page] == undefined || paglast[page] == null) {\n                    paglast.push(docs[docs.length - 1]);\n                } else if (paglast[page] != docs[docs.length - 1]) {\n                    paglast.splice(page, 1, docs[docs.length - 1]);\n                }\n                nxtp = true;\n                document.getElementById(\"pgNavT\").classList.remove('d-none');\n                document.getElementById(\"pgNavB\").classList.remove('d-none');\n            }\n            idx++;\n        });\n        if (!nxtp) {\n            document.getElementById(\"pgTNxt\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBNxt\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTNxt\").removeAttribute('disabled');\n            document.getElementById(\"pgBNxt\").removeAttribute('disabled');\n        }\n        if (page == 1) {\n            document.getElementById(\"pgTPrv\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBPrv\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTPrv\").removeAttribute('disabled');\n            document.getElementById(\"pgBPrv\").removeAttribute('disabled');\n        }\n    }).catch(err => { console.log(err) });\n}\n\ndocument.getElementById(\"pgTPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgBPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgTNxt\").onclick = function () { reSrch(1); };\ndocument.getElementById(\"pgBNxt\").onclick = function () { reSrch(1); };\nfunction reSrch(np) {\n    if (page < 1 && np == -1) return;\n    if (!nxtp && np == 1) return;\n    page += np;\n    document.getElementById('disPgT').innerText = page;\n    document.getElementById('disPgB').innerText = page;\n    initSrch(true);\n    document.getElementById(\"cookCnt\").scrollIntoView();\n}\n\ndocument.getElementById('btnPlus').onclick = function () {\n    $('#mdlPlus').modal('show');\n};\n\nvar inFileChanged = false;\n\nfunction cancelPlus() {\n    document.getElementById('inTitle').value = \"\";\n    document.getElementById('inFile').value = \"\";\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n    inFileChanged = false;\n}\ndocument.getElementById('btnCanPlus0').onclick = function () {\n    cancelPlus();\n};\ndocument.getElementById('btnCanPlus1').onclick = function () {\n    cancelPlus();\n};\n\ndocument.getElementById('inTitle').onfocus = function () {\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n};\ndocument.getElementById('inTitle').onchange = function () {\n    document.getElementById('inTitle').value = document.getElementById('inTitle').value.trim();\n    if (inFileChanged) return;\n    let title = document.getElementById('inTitle').value;\n    title = rmDiacs(title);\n    title = title.toLowerCase();\n    document.getElementById('inFile').value = title.replaceAll(' ', '-');\n};\ndocument.getElementById('inFile').onfocus = function () {\n    inFileChanged = true;\n};\ndocument.getElementById('inFile').onchange = function () {\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n};\n\nfunction setprog(n) {\n    document.getElementById('bar').setAttribute('aria-valuenow', n);\n    document.getElementById('bar').style.width = n + '%';\n    document.getElementById('bar').innerText = n + '%';\n}\n\ndocument.getElementById('inFile').oninput = function () {\n    document.getElementById('inFile').value = rmDiacs(document.getElementById('inFile').value.trim().replaceAll(' ', '-'));\n}"]}