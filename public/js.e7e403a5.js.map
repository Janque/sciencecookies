{"version":3,"sources":["js/index.js"],"names":["kywords","srtOrd","desc","srchRef","catnmb","allCats","previewLim","cats","nxtp","paglast","page","allChk","initSrch","stAf","slice","urlSrch","get","split","document","getElementById","value","replace","concat","forEach","itm","idx","str","toLowerCase","rmDiacs","splice","all","i","indexOf","checked","selected","undefined","cookiesFSRef","where","orderBy","startAfter","limit","shwSrch","promises","notSrchd","p","firebase","database","ref","transaction","search","count","push","length","Promise","then","set","catch","err","console","log","innerHTML","snap","docs","a","createElement","classes","med","bod","appendChild","doc","divi","href","data","url","img","style","width","height","src","picUrl","tit","title","descr","descrip","dates","dledit","dl","ledit","toDate","innerText","getDate","getMonth","getFullYear","d","date","auhtTxt","authrs","classList","remove","removeAttribute","setAttribute","reSrch","np","scrollIntoView","onclick","shwCalMain","calendarsFSRef","descriptionShort","showEl","window","loaded","addEventListener","event","preventDefault","send","srchStr","wordArr","location"],"mappings":"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","file":"js.e7e403a5.js","sourceRoot":"../src","sourcesContent":["import '../styles/index.scss';\n\n//Categor√≠as@#\nconst catnmb = 5, allCats = ['astronomia', 'biologia', 'curiosidades', 'fisica', 'tecnologia'];\nconst previewLim = 20;\n\n//Get search params\nvar cats = [], kywords, srtOrd, desc, srchRef;\nvar nxtp = false, paglast = [null], page = 1;\nvar allChk = false;\nfunction initSrch(stAf) {\n    cats = allCats.slice();\n    kywords = [''];\n    if (urlSrch.get('c') != null) {\n        cats = urlSrch.get('c').split('+');\n        cats = cats[0].split(' ');\n    }\n    if (urlSrch.get('k') != null) {\n        kywords = urlSrch.get('k').split('+');\n        document.getElementById('srcBox').value = urlSrch.get('k').replace('+', ' ');\n    };\n    kywords = cats.concat(kywords);\n    kywords.forEach(function (itm, idx) {\n        let str = itm.toLowerCase();\n        str = rmDiacs(str);\n        kywords.splice(idx, 1, str);\n    });\n    let all = true;\n    for (let i = 0; i < catnmb; i++) {\n        if (kywords.indexOf(document.getElementById('cat' + i).value) != -1) {\n            document.getElementById('cat' + i).checked = true;\n        } else all = false;\n    }\n    if (all) {\n        allChk = true;\n        document.getElementById('catA').checked = true;\n    }\n    document.getElementById(\"inSrchOrd1\").selected = false;\n    document.getElementById(\"inSrchOrd2\").selected = false;\n    document.getElementById(\"inSrchOrd3\").selected = false;\n    srtOrd = urlSrch.get('o');\n    if (srtOrd != null) {\n        if (srtOrd == 'new') {\n            srtOrd = 'date';\n            desc = true;\n            document.getElementById(\"inSrchOrd1\").selected = true;\n        }\n        if (srtOrd == 'old') {\n            srtOrd = 'ledit';\n            desc = false;\n            document.getElementById(\"inSrchOrd2\").selected = true;\n        }\n        if (srtOrd == 'pop') {\n            desc = true;\n            document.getElementById(\"inSrchOrd3\").selected = true;\n        }\n    } else {\n        srtOrd = 'ledit';\n        desc = true;\n    }\n    if (page > 1 && stAf && paglast[page - 1] != null && paglast[page - 1] != undefined) {\n        if (!desc) {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n        } else {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n        }\n    } else {\n        if (!desc) {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd).limit(previewLim);\n        } else {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd, 'desc').limit(previewLim);\n        }\n    }\n    shwSrch();\n    const promises = [];\n    let notSrchd = [], allP = null;\n    for (let i = 0; i < kywords.length; i++) {\n        let itm = kywords[i];\n        if (itm == '' || itm == ' ') continue;\n        const p = firebase.database().ref('searchQs/' + itm).transaction(search => {\n            if (search) {\n                notSrchd.splice(notSrchd.indexOf(itm), 1);\n                search.count++;\n            } else {\n                notSrchd.push(itm);\n            }\n            return search;\n        });\n        promises.push(p);\n    }\n    allP = Promise.all(promises);\n    allP.then(() => {\n        notSrchd.forEach((itm) => {\n            firebase.database().ref('searchQs/' + itm).set({\n                count: 1\n            });\n        })\n    }).catch(err => { console.log('err') });\n}\nfunction shwSrch() {\n    document.getElementById('cookiesCont').innerHTML = \"\";\n    srchRef.get().then(snap => {\n        let docs = snap.docs;\n        nxtp = false;\n        if (docs.length == 0) {\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            bod.innerHTML = '<h5 class=\"mt-0 text-center\">No se han encontrado resultados</h5>';\n            a.appendChild(med);\n            med.appendChild(bod);\n            document.getElementById('cookiesCont').appendChild(a);\n        }\n        docs.forEach((doc, idx) => {\n            if (idx != 0) {\n                let divi = document.createElement('div');\n                classes(divi, \"dropdown-divider d-md-none\");\n                document.getElementById('cookiesCont').appendChild(divi);\n            }\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            a.href = doc.data().url;\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let img = document.createElement('img');\n            classes(img, \"align-self-center mr-3\");\n            img.style.width = \"64px\";\n            img.style.height = \"64px\";\n            img.src = doc.data().picUrl;\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            let tit = document.createElement('h5');\n            classes(tit, \"mt-0\");\n            tit.innerHTML = doc.data().title;\n            bod.appendChild(tit);\n            let descr = document.createElement('p');\n            descr.innerHTML = doc.data().descrip;\n            bod.appendChild(descr);\n            let dates = document.createElement('p');\n            classes(dates, \"my-0\");\n            if (doc.data().dledit) {\n                let dl = doc.data().ledit.toDate();\n                dates.innerText = 'Actualizado: ' + dl.getDate() + '/' + (dl.getMonth() + 1) + '/' + dl.getFullYear();\n            } else {\n                let d = doc.data().date.toDate();\n                dates.innerText = 'Publicado: ' + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();\n            }\n            bod.appendChild(dates);\n            let auhtTxt = document.createElement('p');\n            classes(auhtTxt, \"mt-0\");\n            auhtTxt.innerText = ' Autor(es):' + doc.data().authrs;\n            bod.appendChild(auhtTxt);\n            a.appendChild(med);\n            med.appendChild(img);\n            med.appendChild(bod);\n            document.getElementById('cookiesCont').appendChild(a);\n            if (idx == previewLim - 1) {\n                if (paglast[page] == undefined || paglast[page] == null) {\n                    paglast.push(docs[docs.length - 1]);\n                } else if (paglast[page] != docs[docs.length - 1]) {\n                    paglast.splice(page, 1, docs[docs.length - 1]);\n                }\n                nxtp = true;\n                document.getElementById(\"pgNavT\").classList.remove('d-none');\n                document.getElementById(\"pgNavB\").classList.remove('d-none');\n            }\n        });\n        if (!nxtp) {\n            document.getElementById(\"pgTNxt\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBNxt\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTNxt\").removeAttribute('disabled');\n            document.getElementById(\"pgBNxt\").removeAttribute('disabled');\n        }\n        if (page == 1) {\n            document.getElementById(\"pgTPrv\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBPrv\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTPrv\").removeAttribute('disabled');\n            document.getElementById(\"pgBPrv\").removeAttribute('disabled');\n        }\n    }).catch(err => { console.log('err') });\n}\n\ndocument.getElementById(\"pgTPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgBPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgTNxt\").onclick = function () { reSrch(1); };\ndocument.getElementById(\"pgBNxt\").onclick = function () { reSrch(1); };\nfunction reSrch(np) {\n    if (page < 1 && np == -1) return;\n    if (!nxtp && np == 1) return;\n    page += np;\n    document.getElementById('disPgT').innerText = page;\n    document.getElementById('disPgB').innerText = page;\n    initSrch(true);\n    document.getElementById(\"cookCnt\").scrollIntoView();\n}\n\n//Submit search\ndocument.getElementById('catA').onclick = function () {\n    if (!allChk) {\n        for (let i = 0; i < catnmb; i++) {\n            document.getElementById('cat' + i).checked = true;\n        }\n    } else {\n        for (let i = 0; i < catnmb; i++) {\n            document.getElementById('cat' + i).checked = false;\n        }\n    }\n    allChk = !allChk;\n};\nfor (let i = 0; i < catnmb; i++) {\n    document.getElementById('cat' + i).onclick = function () {\n        if (allChk) {\n            document.getElementById('catA').checked = false;\n            allChk = false;\n        }\n        else {\n            let all = true;\n            for (let i = 0; i < catnmb; i++) {\n                if (document.getElementById('cat' + i).checked == false) {\n                    all = false;\n                    break;\n                }\n            }\n            if (all) {\n                allChk = true;\n                document.getElementById('catA').checked = true;\n            }\n        }\n    };\n}\n\nfunction shwCalMain() {\n    calendarsFSRef.where(\"public\", \"==\", true).orderBy('date', 'desc').limit(1).get().then(snap => {\n        let docs = snap.docs;\n        docs.forEach(doc => {\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            a.href = doc.data().url;\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let img = document.createElement('img');\n            classes(img, \"align-self-center mr-3\");\n            img.style.width = \"64px\";\n            img.style.height = \"64px\";\n            img.src = doc.data().picUrl;\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            let tit = document.createElement('h5');\n            classes(tit, \"mt-0\");\n            tit.innerHTML = doc.data().title;\n            bod.appendChild(tit);\n            let descr = document.createElement('p');\n            descr.innerHTML = doc.data().descriptionShort;\n            bod.appendChild(descr);\n            let dates = document.createElement('p');\n            classes(dates, \"my-0\");\n            a.appendChild(med);\n            med.appendChild(img);\n            med.appendChild(bod);\n            document.getElementById('calMain').appendChild(a);\n            showEl(document.getElementById('calMain'));\n        });\n    }).catch(err => { console.log(err) });\n}\n\nwindow.loaded = function loaded() {\n    initSrch(false);\n    shwCalMain();\n    function send() {\n        let srchStr = '?c=';\n        if (document.getElementById('cat0').checked) srchStr = srchStr + document.getElementById('cat0').value;\n        for (let i = 1; i < catnmb; i++) {\n            if (document.getElementById('cat' + i).checked) {\n                srchStr = srchStr + '+' + document.getElementById('cat' + i).value;\n            }\n        }\n        srchStr = srchStr + '&k=';\n        let wordArr = document.getElementById('srcBox').value.split(' ');\n        srchStr = srchStr + wordArr[0];\n        for (let i = 1; i < wordArr.length; i++) {\n            srchStr = srchStr + '+' + wordArr[i];\n        }\n        srchStr = srchStr + '&o=' + document.getElementById('inOrd').value;\n        window.location.href = srchStr;\n    }\n    document.getElementById(\"frmSrch\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        send();\n    });\n}"]}