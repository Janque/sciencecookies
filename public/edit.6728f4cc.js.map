{"version":3,"sources":["js/edit.js"],"names":["docDat","docId","savedInterval","store","firebase","storage","rtDb","database","toDel","toAdd","lastSave","Date","now","saved","addFrom","toDelMed","toAddMed","newMedia","newMedSrc","keywords","saveDoc","db","console","log","collection","doc","update","normSave","then","clearInterval","setInterval","minutes","Math","floor","document","getElementById","innerText","catch","err","code","setprog","bar","n","setAttribute","style","width","removeMedia","medFileName","ref","delete","fillMed","innerHTML","media","forEach","itm","idx","col0","createElement","classes","card0","appendChild","img0","src","medUrl","over0","paddingLeft","paddingRight","btns0","medBtnDel","onclick","click","medFile","picUrl","splice","setTimeout","tooltip","medBtnCopy","tltipTxt","window","open","focus","onmouseout","medBtnUnstar","medBtnStar","col1","btnA1","cont","card1","img1","render","publishDate","beenPublic","published","firestore","Timestamp","item","sect","id","div","type","subt","subf","act","btnDel","btnEdit","btnCheck","btnAdd","toggleEl","d","toDate","getDate","getMonth","getFullYear","ld","ledit","h","title","pPub","dledit","pLEdit","pAuth","author","fd0","fc0","in0","value","oninput","trim","fd1","fl1","fc1","in1","fd2","fl2","fc2","in2","fd3","fl3","fr3","f3c0","f3f0","inAu0","includes","inAuL0","f3c1","f3f1","inAu1","inAuL1","f3c2","f3f2","inAu2","inAuL2","uptAuthors","a0","a1","a2","arr","push","empty","slice","authors","checked","refIdx","refR","cLink","cLinkFrm","cBtn","pRef","aRef","makeRefCite","text","makeRefWeb","href","changeRef","link","fr0","onchange","inOpt0","inOpt1","rBtnEdit","rBtnCheck","toggleRef","sort","a","b","linkA","toUpperCase","linkB","rBtnDel","btnPlusRef0","plusRef","btnPlusRef1","Number","titleTxt","p","removeAttribute","i","inOpt","fr1","f1c0","html","yt","ratio","iframe","vidUrl","in0L","convUrl","length","part","substr","help0","in1L","ratios","replaceAll","rat","classList","remove","fig","position","borderRadius","alt","btnChange","capt","fontSize","fontWeight","caption","hasCapt","rcont","rnL","ranR","ranRC0","in3","valL","ranRC1","in2L","java","finishPub","month","toString","file","$","on","modal","fillKW","prog","substring","split","c","ultraClean","toKW","description","rToKW","l","wrd","indexOf","kWObj","sum","wCount","banWrds","Object","entries","key","loaded","where","urlSrch","get","limit","onSnapshot","snap","location","data","public","add","revised","uid","addEventListener","event","fileFrm","preventDefault","showEl","hideEl","addMed","atempt","name","getDownloadURL","res","put","bytesTransferred","totalBytes","plusSect","newSect","e","prevMed","read","target","files","FileReader","readAsDataURL","onload","e2","result","timePrev","fromMillis","getTime","rev","cook","descrip","url","authrs","cats","notify","uptMsg","uptDescrip","error","set","likes","favs","pop","date"],"mappings":";;;AAyzCA,aAAA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,6IAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,SAAA,EAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,CAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAzzCA,QAAA,uBAEA,IAGIA,EAAQC,EAoIRC,EAvIAC,EAAQC,SAASC,UACjBC,EAAOF,SAASG,WAGhBC,GAAS,EAAGC,GAAS,EACrBC,EAAWC,KAAKC,MAAOC,GAAQ,EAE/BC,GAAW,EACXC,GAAY,EAAGC,GAAY,EAC3BC,EAAW,KACXC,EAAY,KAEZC,EAAW,GA4Hf,SAASC,IAEEC,OADPC,QAAQC,IAAI,aACLF,GAAGG,WAAW,gBAAgBC,IAAIxB,GAAOyB,OAAO1B,GAE3D,SAAS2B,IACLP,IAAUQ,KAAK,WACPf,GAAOgB,cAAc3B,GACzBW,GAAQ,EACRX,EAAgB4B,YAAY,WACpBC,IAAAA,EAAUC,KAAKC,OAAOtB,KAAKC,MAAQF,GAAY,KACjCwB,SAASC,eAAe,cAAcC,UAApDL,EAAU,GAAsD,iBAAmBA,EAAU,WAC1C,iBAAmBC,KAAKC,MAAMF,EAAU,IAAM,UACtG,QACHG,SAASC,eAAe,cAAcC,UAAY,oCAClD1B,EAAWC,KAAKC,QACjByB,MAAM,SAAAC,GACLJ,SAASC,eAAe,cAAcC,UAAY,gDAAkDE,EAAIC,KACxGjB,QAAQC,IAAIe,KAsCpB,SAASE,EAAQC,EAAKC,GAClBD,EAAIE,aAAa,gBAAiBD,GAClCD,EAAIG,MAAMC,MAAQH,EAAI,IACtBD,EAAIL,UAAYM,EAAI,IAGxB,SAASI,EAAYC,GACV5C,OAAAA,EAAM6C,IAAI,eAAiB/C,EAAQ,IAAM8C,GAAaE,SAGjE,SAASC,IACLhB,SAASC,eAAe,cAAcgB,UAAtC,gfAOAjB,SAASC,eAAe,cAAcgB,UAAtC,gfAQAnD,EAAOoD,MAAMC,QAAQ,SAACC,EAAKC,GACnBC,IAAAA,EAAOtB,SAASuB,cAAc,OAClCC,QAAQF,EAAM,YACVG,IAAAA,EAAQzB,SAASuB,cAAc,OACnCC,QAAQC,EAAO,2BACfH,EAAKI,YAAYD,GACbE,IAAAA,EAAO3B,SAASuB,cAAc,OAClCC,QAAQG,EAAM,YACdA,EAAKC,IAAMR,EAAIS,OACfJ,EAAMC,YAAYC,GACdG,IAAAA,EAAQ9B,SAASuB,cAAc,OACnCC,QAAQM,EAAO,yBACfA,EAAMpB,MAAMqB,YAAc,QAC1BD,EAAMpB,MAAMsB,aAAe,QAC3BP,EAAMC,YAAYI,GACdG,IAAAA,EAAQjC,SAASuB,cAAc,OACnCC,QAAQS,EAAO,gBACfH,EAAMJ,YAAYO,GACdC,IAAAA,EAAYlC,SAASuB,cAAc,UACvCC,QAAQU,EAAW,mCACnBA,EAAUjB,UAAY,mCACtBiB,EAAUC,QAAU,WACZtD,GAAYwC,GACZxC,GAAY,EACRmB,SAASC,eAAe,kBAAkBD,SAASC,eAAe,iBAAiBmC,QACpE,WAAfhB,EAAIiB,QACJzB,EAAYQ,EAAIiB,SAAS3C,KAAK,WACtB0B,EAAIS,QAAU/D,EAAOwE,SACrBxE,EAAOwE,OAAS,IAEpBxE,EAAOoD,MAAMqB,OAAOlB,EAAK,GACzB5B,MACDU,MAAM,SAAAC,GAAOhB,OAAAA,QAAQC,IAAIe,MAExBgB,EAAIS,QAAU/D,EAAOwE,SACrBxE,EAAOwE,OAAS,IAEpBxE,EAAOoD,MAAMqB,OAAOlB,EAAK,GACzB5B,OAGJO,SAASC,eAAe,cAAcgB,UAAtC,ucAMApC,EAAWwC,EACXmB,WAAW,WACP3D,GAAY,EACRmB,SAASC,eAAe,kBAAkBD,SAASC,eAAe,iBAAiBmC,SACxF,OAGXH,EAAMP,YAAYQ,GACdO,IAAAA,EAAUzC,SAASuB,cAAc,OACrCC,QAAQiB,EAAS,oBACbC,IAAAA,EAAa1C,SAASuB,cAAc,UACxCC,QAAQkB,EAAY,mCAChBC,IAAAA,EAAW3C,SAASuB,cAAc,QACtCC,QAAQmB,EAAU,gBAClBA,EAAS1B,UAAY,SACrByB,EAAWhB,YAAYiB,GACvBD,EAAWzB,WAAa,8BACxByB,EAAWP,QAAU,WAOjBS,OAAOC,KAAKzB,EAAIS,QAAQiB,QAExBH,EAAS1B,UAAY,eAEzByB,EAAWK,WAAa,WACpBJ,EAAS1B,UAAY,UAEzBwB,EAAQf,YAAYgB,GACpBT,EAAMP,YAAYe,GACdO,IAAAA,EAAehD,SAASuB,cAAc,UACtC0B,EAAajD,SAASuB,cAAc,UACpCH,EAAIS,QAAU/D,EAAOwE,QACrBd,QAAQwB,EAAc,wCACtBA,EAAa/B,UAAY,8BACzB+B,EAAab,QAAU,WACnBrE,EAAOwE,OAAS,GAChB7C,KAEJwC,EAAMP,YAAYsB,KAElBxB,QAAQyB,EAAY,wCACpBA,EAAWhC,UAAY,8BACvBgC,EAAWd,QAAU,WACjBrE,EAAOwE,OAASlB,EAAIS,OACpBpC,KAEJwC,EAAMP,YAAYuB,IAGtBjD,SAASC,eAAe,cAAcyB,YAAYJ,GAG9C4B,IAAAA,EAAOlD,SAASuB,cAAc,OAClCC,QAAQ0B,EAAM,YACVC,IAAAA,EAAQnD,SAASuB,cAAc,KACnCC,QAAQ2B,EAAO,wBACfA,EAAM1C,aAAa,OAAQ,UAC3B0C,EAAMhB,QAAU,YACK,GAAbrD,IACJhB,EAAOsF,KAAKtE,GAAU+C,OAAST,EAAIS,OACnCpC,MAEJ0D,EAAM1C,aAAa,eAAgB,SACnCyC,EAAKxB,YAAYyB,GACbE,IAAAA,EAAQrD,SAASuB,cAAc,OACnCC,QAAQ6B,EAAO,2BACfF,EAAMzB,YAAY2B,GACdC,IAAAA,EAAOtD,SAASuB,cAAc,OAClCC,QAAQ8B,EAAM,YACdA,EAAK1B,IAAMR,EAAIS,OACfwB,EAAM3B,YAAY4B,GAElBtD,SAASC,eAAe,cAAcyB,YAAYwB,KAI1D,SAASK,IAEDC,IAAAA,EADJxD,SAASC,eAAe,QAAQgB,UAAY,GAGxCuC,EADA1F,EAAO2F,WACO3F,EAAO4F,UAEP,IAAIxF,SAASyF,UAAUC,UAAUlF,IAEnDZ,EAAOsF,KAAKjC,QAAQ,SAAC0C,EAAMxC,GACnByC,IAAAA,EAAO9D,SAASuB,cAAc,OAClCuC,EAAKC,GAAK,OAAS1C,EACf2C,IAAAA,EAAMhE,SAASuB,cAAc,OACjCC,QAAQwC,EAAK,yBACI,QAAbH,EAAKI,MAAgBH,EAAKpC,YAAYsC,GAEtCE,IAAAA,EAAOlE,SAASuB,cAAc,OAClC2C,EAAKH,GAAK,OAAS1C,EAAM,IACrB8C,IAAAA,EAAOnE,SAASuB,cAAc,OAClCC,QAAQ2C,EAAM,UACdA,EAAKJ,GAAK,OAAS1C,EAAM,IAErB+C,IAEAC,EAAQC,EAASC,EAAUC,EAF3BJ,EAAMpE,SAASuB,cAAc,OAsE7BsC,GArEJrC,QAAQ4C,EAAK,iBAGI,QAAbP,EAAKI,MAA+B,OAAbJ,EAAKI,OAC5BI,EAASrE,SAASuB,cAAc,UAChCC,QAAQ6C,EAAQ,sCAChBA,EAAOpD,UAAY,mCACnBoD,EAAOlC,QAAU,WACT7D,GAAS+C,GACT/C,GAAS,EACL0B,SAASC,eAAe,kBAAkBD,SAASC,eAAe,iBAAiBmC,QACvFtE,EAAOsF,KAAKb,OAAOlB,EAAK,GACxBkC,IACA9D,MAEAO,SAASC,eAAe,cAAcgB,UAAtC,4dAMA3C,EAAQ+C,EACRmB,WAAW,WACPlE,GAAS,EACL0B,SAASC,eAAe,kBAAkBD,SAASC,eAAe,iBAAiBmC,SACxF,OAGXgC,EAAI1C,YAAY2C,IAEH,OAAbR,EAAKI,OACLK,EAAUtE,SAASuB,cAAc,UACjCC,QAAQ8C,EAAS,yCACjBA,EAAQrD,UAAY,8BACpBqD,EAAQnC,QAAU,WAIVnC,GAHJyE,SAASH,GACTG,SAASF,GACTE,SAASN,GAC8C,qCAAnDnE,SAASC,eAAe,cAAcC,UAAkD,CACpFL,IAAAA,EAAUC,KAAKC,OAAOtB,KAAKC,MAAQF,GAAY,KAE7BwB,SAASC,eAAe,cAAcC,UADxDL,EAAU,EACNA,EAAU,GAAsD,iBAAmBC,KAAKC,MAAMF,EAAU,IAAM,SAC3D,iBAAmBA,EAAU,WAC/B,iBAAmBC,KAAKC,OAAOtB,KAAKC,MAAQF,GAAY,KAAQ,cAGjI4F,EAAI1C,YAAY4C,GAChBC,EAAWvE,SAASuB,cAAc,UAClCC,QAAQ+C,EAAU,gDAClBA,EAAStD,UAAY,+BACrBsD,EAASpC,QAAU,WACfsC,SAASH,GACTG,SAASF,GACTE,SAASN,GACT1E,KAEJ2E,EAAI1C,YAAY6C,GAChBC,EAASxE,SAASuB,cAAc,UAChCC,QAAQgD,EAAQ,sCAChBA,EAAOvD,UAAY,8BACnBuD,EAAO/D,aAAa,cAAe,SACnC+D,EAAO/D,aAAa,cAAe,gBACnC+D,EAAOrC,QAAU,WACb5D,EAAQ8C,EAAM,GAElB+C,EAAI1C,YAAY8C,IAEpBV,EAAKpC,YAAY0C,GAEA,QAAbP,EAAKI,KAAgB,CACjBS,IAAAA,EAAIlB,EAAYmB,SACpBD,EAAIA,EAAEE,UAAY,KAAOF,EAAEG,WAAa,GAAK,IAAMH,EAAEI,cACjDC,IAAAA,EAAKjH,EAAOkH,MAAML,SACtBI,EAAKA,EAAGH,UAAY,KAAOG,EAAGF,WAAa,GAAK,IAAME,EAAGD,cAErDG,IAAAA,EAAIjF,SAASuB,cAAc,MAC/BC,QAAQyD,EAAG,eACXA,EAAEhE,UAAYnD,EAAOsF,KAAK,GAAG8B,MAC7BhB,EAAKxC,YAAYuD,GACbE,IAAAA,EAAOnF,SAASuB,cAAc,KAG9BzD,GAFJqH,EAAKjF,UAAY,cAAgBwE,EACjCR,EAAKxC,YAAYyD,GACbrH,EAAOsH,OAAQ,CACXC,IAAAA,EAASrF,SAASuB,cAAc,KACpC8D,EAAOnF,UAAY,yBAA2B6E,EAC9Cb,EAAKxC,YAAY2D,GAEjBC,IAAAA,EAAQtF,SAASuB,cAAc,KACnC+D,EAAMpF,UAAY,aAAepC,EAAOsF,KAAK,GAAGmC,OAChDrB,EAAKxC,YAAY4D,GAEbE,IAAAA,EAAMxF,SAASuB,cAAc,OACjCC,QAAQgE,EAAK,mCACTC,IAAAA,EAAMzF,SAASuB,cAAc,OACjCC,QAAQiE,EAAK,gBACTC,IAAAA,EAAM1F,SAASuB,cAAc,SACjCC,QAAQkE,EAAK,4CACbA,EAAIjF,aAAa,OAAQ,QACzBiF,EAAIjF,aAAa,cAAe3C,EAAOsF,KAAK,GAAG8B,OAC/CQ,EAAIC,MAAQ7H,EAAOsF,KAAK,GAAG8B,MAC3BO,EAAI/D,YAAYgE,GAChBF,EAAI9D,YAAY+D,GAChBtB,EAAKzC,YAAY8D,GACjBE,EAAIE,QAAU,WACV9H,EAAOoH,MAAQpH,EAAOsF,KAAK,GAAG8B,MAAQQ,EAAIC,MAAME,OAChDZ,EAAEhE,UAAYnD,EAAOsF,KAAK,GAAG8B,OAG7BY,IAAAA,EAAM9F,SAASuB,cAAc,OACjCC,QAAQsE,EAAK,YACTC,IAAAA,EAAM/F,SAASuB,cAAc,SACjCC,QAAQuE,EAAK,2BACbA,EAAI7F,UAAY,cACZ8F,IAAAA,EAAMhG,SAASuB,cAAc,OACjCC,QAAQwE,EAAK,OACTC,IAAAA,EAAMjG,SAASuB,cAAc,SACjCC,QAAQyE,EAAK,gBACbA,EAAIxF,aAAa,OAAQ,QACzBwF,EAAIxF,aAAa,WAAY,QAC7BwF,EAAIN,MAAQjB,EACZsB,EAAItE,YAAYuE,GAChBH,EAAIpE,YAAYqE,GAChBD,EAAIpE,YAAYsE,GAChB7B,EAAKzC,YAAYoE,GAEbI,IAAAA,EAAMlG,SAASuB,cAAc,OAC7B4E,EAAMnG,SAASuB,cAAc,SAC7B6E,EAAMpG,SAASuB,cAAc,OAC7B8E,EAAMrG,SAASuB,cAAc,SAC7BzD,EAAOsH,SACP5D,QAAQ0E,EAAK,YACb1E,QAAQ2E,EAAK,2BACbA,EAAIjG,UAAY,yBAChBsB,QAAQ4E,EAAK,OACb5E,QAAQ6E,EAAK,gBACbA,EAAI5F,aAAa,OAAQ,QACzB4F,EAAI5F,aAAa,WAAY,QAC7B4F,EAAIV,MAAQZ,EACZqB,EAAI1E,YAAY2E,GAChBH,EAAIxE,YAAYyE,GAChBD,EAAIxE,YAAY0E,GAChBjC,EAAKzC,YAAYwE,IAGjBI,IAAAA,EAAMtG,SAASuB,cAAc,OACjCC,QAAQ8E,EAAK,YACTC,IAAAA,EAAMvG,SAASuB,cAAc,SACjCC,QAAQ+E,EAAK,2BACbA,EAAIrG,UAAY,cACZsG,IAAAA,EAAMxG,SAASuB,cAAc,OACjCC,QAAQgF,EAAK,wCACTC,IAAAA,EAAOzG,SAASuB,cAAc,OAClCC,QAAQiF,EAAM,4BACVC,IAAAA,EAAO1G,SAASuB,cAAc,OAClCC,QAAQkF,EAAM,cACdD,EAAK/E,YAAYgF,GACbC,IAAAA,EAAQ3G,SAASuB,cAAc,SACnCC,QAAQmF,EAAO,oBACfA,EAAMlG,aAAa,OAAQ,YACvB3C,EAAOsF,KAAK,GAAGmC,OAAOqB,SAAS,kBAAkBD,EAAMlG,aAAa,UAAW,QACnFkG,EAAMhB,MAAQ,gBACVkB,IAAAA,EAAS7G,SAASuB,cAAc,SACpCC,QAAQqF,EAAQ,oBAChBF,EAAMlG,aAAa,MAAO,UAC1BoG,EAAO3G,UAAY,eACnBwG,EAAKhF,YAAYiF,GACjBD,EAAKhF,YAAYmF,GACjBL,EAAI9E,YAAY+E,GACZK,IAAAA,EAAO9G,SAASuB,cAAc,OAClCC,QAAQsF,EAAM,4BACVC,IAAAA,EAAO/G,SAASuB,cAAc,OAClCC,QAAQuF,EAAM,cACdD,EAAKpF,YAAYqF,GACbC,IAAAA,EAAQhH,SAASuB,cAAc,SACnCC,QAAQwF,EAAO,oBACfA,EAAMvG,aAAa,OAAQ,YACvB3C,EAAOsF,KAAK,GAAGmC,OAAOqB,SAAS,oBAAoBI,EAAMvG,aAAa,UAAW,QACrFuG,EAAMrB,MAAQ,kBACVsB,IAAAA,EAASjH,SAASuB,cAAc,SACpCC,QAAQyF,EAAQ,oBAChBD,EAAMvG,aAAa,MAAO,UAC1BwG,EAAO/G,UAAY,iBACnB6G,EAAKrF,YAAYsF,GACjBD,EAAKrF,YAAYuF,GACjBT,EAAI9E,YAAYoF,GACZI,IAAAA,EAAOlH,SAASuB,cAAc,OAClCC,QAAQ0F,EAAM,4BACVC,IAAAA,EAAOnH,SAASuB,cAAc,OAClCC,QAAQ2F,EAAM,cACdD,EAAKxF,YAAYyF,GACbC,IAAAA,EAAQpH,SAASuB,cAAc,SACnCC,QAAQ4F,EAAO,oBACfA,EAAM3G,aAAa,OAAQ,YACvB3C,EAAOsF,KAAK,GAAGmC,OAAOqB,SAAS,oBAAoBQ,EAAM3G,aAAa,UAAW,QACrF2G,EAAMzB,MAAQ,kBACV0B,IAAAA,EAASrH,SAASuB,cAAc,SAO3B+F,SAAAA,EAAWC,EAAIC,EAAIC,GACpBC,IAAAA,EAAM,GACNH,GAAIG,EAAIC,KAAK,iBACbH,GAAIE,EAAIC,KAAK,mBACbF,GAAIC,EAAIC,KAAK,mBACbD,EAAIE,OAAOF,EAAIC,KAAK,YACxB7J,EAAOsF,KAAK,GAAGmC,OAASmC,EAAIG,QAC5B/J,EAAOgK,QAAUJ,EAAIG,QACrBvC,EAAMpF,UAAY,aAAepC,EAAOsF,KAAK,GAAGmC,OAdpD/D,QAAQ6F,EAAQ,oBAChBD,EAAM3G,aAAa,MAAO,UAC1B4G,EAAOnH,UAAY,iBACnBiH,EAAKzF,YAAY0F,GACjBD,EAAKzF,YAAY2F,GACjBb,EAAI9E,YAAYwF,GAWhBP,EAAMxE,QAAU,WACZmF,EAAWX,EAAMoB,QAASf,EAAMe,QAASX,EAAMW,UAEnDf,EAAM7E,QAAU,WACZmF,EAAWX,EAAMoB,QAASf,EAAMe,QAASX,EAAMW,UAEnDX,EAAMjF,QAAU,WACZmF,EAAWX,EAAMoB,QAASf,EAAMe,QAASX,EAAMW,UAGnDzB,EAAI5E,YAAY6E,GAChBD,EAAI5E,YAAY8E,GAChBrC,EAAKzC,YAAY4E,QACd,GAAiB,OAAbzC,EAAKI,KAAe,CACvBgB,IAAAA,EAAIjF,SAASuB,cAAc,MAC/B0D,EAAEhE,UAAY,kBACdiD,EAAKxC,YAAYuD,GACjBpB,EAAK/C,IAAIK,QAAQ,SAACL,EAAKkH,GACfC,IAAAA,EAAOjI,SAASuB,cAAc,OAClCC,QAAQyG,EAAM,YACVC,IAAAA,EAAQlI,SAASuB,cAAc,OACnCC,QAAQ0G,EAAO,OACfD,EAAKvG,YAAYwG,GACbC,IAAAA,EAAWnI,SAASuB,cAAc,OACtCC,QAAQ2G,EAAU,cAClBF,EAAKvG,YAAYyG,GACbC,IAAAA,EAAOpI,SAASuB,cAAc,OAClCC,QAAQ4G,EAAM,YACdH,EAAKvG,YAAY0G,GACbC,IAEAC,EAFAD,EAAOrI,SAASuB,cAAc,KAIzBgH,SAAAA,EAAYC,GACjBH,EAAKpH,UAAYuH,EAEZC,SAAAA,EAAWD,GAChBH,EAAKpH,UAAY,GACjBqH,EAAOtI,SAASuB,cAAc,KAC9BC,QAAQ8G,EAAM,2BACdA,EAAKI,KAAOF,EACZF,EAAK7H,aAAa,SAAU,UAC5B6H,EAAK7H,aAAa,MAAO,YACzB6H,EAAKrH,UAAYuH,EAAO,4CACxBH,EAAK3G,YAAY4G,GAQZK,SAAAA,IACL1C,EAAIN,MAAQM,EAAIN,MAAME,OACtB/H,EAAOsF,KAAK/B,GAAKP,IAAIkH,GAAQY,KAAOlD,EAAIC,MACxC7H,EAAOsF,KAAK/B,GAAKP,IAAIkH,GAAQ/D,KAAOgC,EAAIN,MACxB,OAAZ7E,EAAImD,MACJwE,EAAW3H,EAAI8H,MACflD,EAAIjF,aAAa,cAAe,uBACb,QAAZK,EAAImD,OACXsE,EAAYzH,EAAI8H,MAChBlD,EAAIjF,aAAa,cAAe,eA/BxCyH,EAAMxG,YAAY2G,GAgBF,OAAZvH,EAAImD,KACJwE,EAAW3H,EAAI8H,MACI,QAAZ9H,EAAImD,MACXsE,EAAYzH,EAAI8H,MAehBC,IAAAA,EAAM7I,SAASuB,cAAc,OACjCC,QAAQqH,EAAK,OACTpD,IAAAA,EAAMzF,SAASuB,cAAc,OACjCC,QAAQiE,EAAK,OACTO,IAAAA,EAAMhG,SAASuB,cAAc,OACjCC,QAAQwE,EAAK,YACTN,IAAAA,EAAM1F,SAASuB,cAAc,SAC7B0E,EAAMjG,SAASuB,cAAc,UACjCC,QAAQkE,EAAK,gBACbA,EAAIjF,aAAa,OAAQ,QACzBiF,EAAIC,MAAQ7E,EAAI8H,KACA,OAAZ9H,EAAImD,MAAeyB,EAAIjF,aAAa,cAAe,sBACvC,QAAZK,EAAImD,MAAgByB,EAAIjF,aAAa,cAAe,cACxDiF,EAAIoD,SAAW,WAAcH,KAC7BnH,QAAQyE,EAAK,gCACT8C,IAAAA,EAAS/I,SAASuB,cAAc,UACpCwH,EAAOpD,MAAQ,MACC,OAAZ7E,EAAImD,MAAe8E,EAAOtI,aAAa,WAAY,QACvDsI,EAAO7I,UAAY,MACnB+F,EAAIvE,YAAYqH,GACZC,IAkBAC,EAAUC,EAlBVF,EAAShJ,SAASuB,cAAc,UAY3B4H,SAAAA,IACL1E,SAASyD,GACTzD,SAAS0D,GACT1D,SAASwE,GACTxE,SAASyE,GAfG,QAAZpI,EAAImD,MAAgB+E,EAAOvI,aAAa,WAAY,QACxDuI,EAAOrD,MAAQ,OACfqD,EAAO9I,UAAY,OACnB+F,EAAIvE,YAAYsH,GAChB/C,EAAI6C,SAAW,WAAcH,KAC7BlD,EAAI/D,YAAYgE,GAChBM,EAAItE,YAAYuE,GAChB4C,EAAInH,YAAY+D,GAChBoD,EAAInH,YAAYsE,GAChBmC,EAASzG,YAAYmH,GASrBI,EAAWjJ,SAASuB,cAAc,UAClCC,QAAQyH,EAAU,yCAClBA,EAAShI,UAAY,8BACrBgI,EAAS9G,QAAU,WACfgH,IACuD,qCAAnDnJ,SAASC,eAAe,cAAcC,YACtCF,SAASC,eAAe,cAAcC,UAAY,iBAAmBJ,KAAKC,OAAOtB,KAAKC,MAAQF,GAAY,KAAS,aAG3H0K,EAAYlJ,SAASuB,cAAc,UACnCC,QAAQ0H,EAAW,gDACnBA,EAAUjI,UAAY,+BACtBiI,EAAU/G,QAAU,WAChBgH,IACArL,EAAOsF,KAAK/B,GAAKP,IAAIsI,KAAK,SAACC,EAAGC,GACtBC,IAAAA,EAAQF,EAAET,KAAKY,cACfC,EAAQH,EAAEV,KAAKY,cACfD,OAAAA,EAAQE,GAAe,EACvBF,EAAQE,EAAc,EACnB,IAEXhK,KAEJ2I,EAAK1G,YAAYuH,GACjBb,EAAK1G,YAAYwH,GACbQ,IAAAA,EAAU1J,SAASuB,cAAc,UACrCC,QAAQkI,EAAS,sCACjBA,EAAQzI,UAAY,mCACpByI,EAAQvH,QAAU,WACdrE,EAAOsF,KAAK/B,GAAKP,IAAIyB,OAAOyF,EAAQ,GACpCvI,IACA8D,KAEJ6E,EAAK1G,YAAYgI,GAEjBxF,EAAKxC,YAAYuG,GAED,IAAZnH,EAAI8H,MACJK,EAAS7G,UAGbuH,IAAAA,EAAc3J,SAASuB,cAAc,KACzCC,QAAQmI,EAAa,4BACrBA,EAAYxH,QAAU,WAAcyH,MACpCD,EAAY1I,UAAY,8BACxBgE,EAAEvD,YAAYiI,GACVE,IAAAA,GAAc7J,SAASuB,cAAc,KAKhCqI,SAAAA,KACL9L,EAAOsF,KAAK/B,GAAKP,IAAI6G,KAAK,CACtB1D,KAAM,MACN2E,KAAM,KAEVrF,IATJ/B,QAAQqI,GAAa,iEACrBA,GAAY1H,QAAU,WAAcyH,MACpCC,GAAY5I,UAAY,8BACxBiD,EAAKxC,YAAYmI,SAQd,GAAiB,SAAbhG,EAAKI,KAAiB,CACzBgB,IAAAA,GACA6E,OAAOjG,EAAKqB,OAAS,IACK,GAAtB4E,OAAOjG,EAAKqB,SAAahB,EAAKjD,UAAY,SAC9CgE,GAAIjF,SAASuB,cAAc,IAAMsC,EAAKqB,QACpCjE,UAAY4C,EAAKkG,SACnB7F,EAAKxC,YAAYuD,KAEjB+E,IAAAA,GAAIhK,SAASuB,cAAc,KAC/ByI,GAAE/I,UAAY4C,EAAK2E,KACnBtE,EAAKxC,YAAYsI,IAEbnB,IAAAA,GAAM7I,SAASuB,cAAc,OACjCC,QAAQqH,GAAK,OACTpD,IAAAA,GAAMzF,SAASuB,cAAc,OACjCC,QAAQiE,GAAK,OACTO,IAAAA,GAAMhG,SAASuB,cAAc,OACjCC,QAAQwE,GAAK,YACTN,IAAAA,GAAM1F,SAASuB,cAAc,SAC7B0E,GAAMjG,SAASuB,cAAc,UACjCC,QAAQkE,GAAK,gBACbA,GAAIjF,aAAa,OAAQ,QACrBqJ,OAAOjG,EAAKqB,OAAS,GACrBQ,GAAIC,MAAQ9B,EAAKkG,SACjBrE,GAAIjF,aAAa,cAAe,aAChCiF,GAAIuE,gBAAgB,cAEpBvE,GAAIC,MAAQ,GACZD,GAAIjF,aAAa,cAAe,IAChCiF,GAAIjF,aAAa,WAAY,SAEjCiF,GAAIE,QAAU,WACV9H,EAAOsF,KAAK/B,GAAK0I,SAAW9E,GAAEhE,UAAYyE,GAAIC,OAElDnE,QAAQyE,GAAK,gCACR,IAAA,IAAIiE,GAAI,EAAGA,GAAI,EAAGA,KAAK,CACpBC,IAAAA,GAAQnK,SAASuB,cAAc,UACnC4I,GAAMxE,MAAQuE,GACVrG,EAAKqB,OAASgF,IAAGC,GAAM1J,aAAa,WAAY,QACpD0J,GAAMjK,UAAYgK,GAClBjE,GAAIvE,YAAYyI,IAEpBlE,GAAIL,QAAU,WACV9H,EAAOsF,KAAK/B,GAAK6D,MAAQe,GAAIN,MACzBmE,OAAO7D,GAAIN,OAAS,GACpBD,GAAIjF,aAAa,cAAe,aAChCiF,GAAIuE,gBAAgB,YACM,GAAtBH,OAAOjG,EAAKqB,OAAahB,EAAKjD,UAAY,OACzCiD,EAAKjD,UAAY,IACtBgE,GAAIjF,SAASuB,cAAc,IAAMsC,EAAKqB,QACpCjE,UAAYnD,EAAOsF,KAAK/B,GAAK0I,SAAWrE,GAAIC,MAC9CzB,EAAKxC,YAAYuD,IACjBf,EAAKxC,YAAYsI,MAEjBtE,GAAIC,MAAQ,GACZD,GAAIjF,aAAa,cAAe,IAChCiF,GAAIjF,aAAa,WAAY,QAC7B3C,EAAOsF,KAAK/B,GAAK0I,SAAWrE,GAAIC,MAChCzB,EAAKjD,UAAY,GACjBiD,EAAKxC,YAAYsI,MAGzBvE,GAAI/D,YAAYgE,IAChBM,GAAItE,YAAYuE,IAChB4C,GAAInH,YAAY+D,IAChBoD,GAAInH,YAAYsE,IAChB7B,EAAKzC,YAAYmH,IAEbuB,IAAAA,GAAMpK,SAASuB,cAAc,OACjCC,QAAQqH,GAAK,YACTwB,IAAAA,GAAOrK,SAASuB,cAAc,OAClCC,QAAQiE,GAAK,OACTY,IAAAA,GAAMrG,SAASuB,cAAc,YACjCC,QAAQ6E,GAAK,gBACbA,GAAI5F,aAAa,OAAQ,KACzB4F,GAAIV,MAAQ9B,EAAK2E,KACjBnC,GAAIT,QAAU,WACV9H,EAAOsF,KAAK/B,GAAKmH,KAAOwB,GAAE/I,UAAYoF,GAAIV,MAAME,QAEpDwE,GAAK3I,YAAY2E,IACjB+D,GAAI1I,YAAY2I,IAChBlG,EAAKzC,YAAY0I,IAEbN,OAAOjG,EAAKqB,OAAS,GAAsB,IAAjBrB,EAAKkG,UAC/BzF,EAAQlC,aAET,GAAiB,QAAbyB,EAAKI,KAAgB,CACxBqG,IAAAA,GAAOtK,SAASuB,cAAc,OAClC+I,GAAKrJ,UAAY4C,EAAKyG,KACtBpG,EAAKxC,YAAY4I,IAEbzB,IAAAA,GAAM7I,SAASuB,cAAc,OACjCC,QAAQqH,GAAK,YACTpD,IAAAA,GAAMzF,SAASuB,cAAc,OACjCC,QAAQiE,GAAK,OACTC,IAAAA,GAAM1F,SAASuB,cAAc,YACjCC,QAAQkE,GAAK,gBACbA,GAAIjF,aAAa,OAAQ,KACzBiF,GAAIC,MAAQ9B,EAAKyG,KACjB5E,GAAIoD,SAAW,WACXhL,EAAOsF,KAAK/B,GAAKiJ,KAAOA,GAAKrJ,UAAYyE,GAAIC,MAAME,QAEvDJ,GAAI/D,YAAYgE,IAChBmD,GAAInH,YAAY+D,IAChBtB,EAAKzC,YAAYmH,IAEA,IAAbhF,EAAKyG,MACLhG,EAAQlC,aAET,GAAiB,WAAbyB,EAAKI,KAAmB,CAC3BsG,IAAAA,GAAKvK,SAASuB,cAAc,OAChCC,QAAQ+I,GAAI,qCAAuC1G,EAAK2G,OACpDC,IAAAA,GAASzK,SAASuB,cAAc,UACpCkJ,GAAO7I,IAAMiC,EAAK6G,OAClBD,GAAOhK,aAAa,cAAe,KACnCgK,GAAOhK,aAAa,QAAS,4FAC7BgK,GAAOhK,aAAa,kBAAmB,QACvC8J,GAAG7I,YAAY+I,IACfvG,EAAKxC,YAAY6I,IAEb1B,IAAAA,GAAM7I,SAASuB,cAAc,OACjCC,QAAQqH,GAAK,OACTpD,IAAAA,GAAMzF,SAASuB,cAAc,OACjCC,QAAQiE,GAAK,OACTO,IAAAA,GAAMhG,SAASuB,cAAc,OACjCC,QAAQwE,GAAK,YACT2E,IAAAA,GAAO3K,SAASuB,cAAc,SAClCoJ,GAAKzK,UAAY,MACbwF,IAAAA,GAAM1F,SAASuB,cAAc,SACjCC,QAAQkE,GAAK,gBACbA,GAAIjF,aAAa,OAAQ,QACzBiF,GAAIC,MAAQ9B,EAAK6G,OACjBhF,GAAIoD,SAAW,WACP8B,IAAAA,EAAUlF,GAAIC,MAAME,OACpB+E,GAAkB,IAAlBA,EAAQC,OAAcD,EAAU,iCAAmCA,MAClE,CACGE,IAAAA,EAAMZ,EAAI,EACX,GACCY,EAAOF,EAAQV,EAAI,GAAKU,EAAQV,GAChCA,UACa,MAARY,GAAwB,MAARA,GACzBF,EAAU,iCAAmCA,EAAQG,OAAOb,EAAG,IAEnEpM,EAAOsF,KAAK/B,GAAKqJ,OAASD,GAAO7I,IAAMgJ,GAEvCI,IAAAA,GAAQhL,SAASuB,cAAc,SACnCC,QAAQwJ,GAAO,cACfA,GAAM9K,UAAY,2FACd+K,IAAAA,GAAOjL,SAASuB,cAAc,SAClC0J,GAAK/K,UAAY,QACb+F,IAAAA,GAAMjG,SAASuB,cAAc,UACjCC,QAAQyE,GAAK,gCAER,IADDiF,IAAAA,GAAS,CAAC,QAAS,QAAS,OAAQ,QAC/BhB,GAAI,EAAGA,GAAI,EAAGA,KAAK,CACpBC,IAAAA,GAAQnK,SAASuB,cAAc,UACnC4I,GAAMxE,MAAQuF,GAAOhB,IACjBrG,EAAK2G,OAASU,GAAOhB,KAAIC,GAAM1J,aAAa,WAAY,QAC5D0J,GAAMjK,UAAYgL,GAAOhB,IAAGiB,WAAW,KAAM,KAC7ClF,GAAIvE,YAAYyI,IAEpBlE,GAAIL,QAAU,WACV9H,EAAOsF,KAAK/B,GAAKmJ,MAAQvE,GAAIN,MAC7BuF,GAAO/J,QAAQ,SAAAiK,GACXb,GAAGc,UAAUC,OAAO,oBAAsBF,KAE9C5J,QAAQ+I,GAAI,oBAAsB1G,EAAK2G,QAE3C/E,GAAI/D,YAAYiJ,IAChBlF,GAAI/D,YAAYgE,IAChBD,GAAI/D,YAAYsJ,IAChBhF,GAAItE,YAAYuJ,IAChBjF,GAAItE,YAAYuE,IAChB4C,GAAInH,YAAY+D,IAChBoD,GAAInH,YAAYsE,IAChB7B,EAAKzC,YAAYmH,IAEE,IAAfhF,EAAK6G,QACLpG,EAAQlC,aAET,GAAiB,aAAbyB,EAAKI,KAAqB,CAC7BsH,IAAAA,GAAMvL,SAASuB,cAAc,UACjCC,QAAQ+J,GAAK,WACbA,GAAI7K,MAAMC,MAAQkD,EAAKlD,MACvB4K,GAAI7K,MAAM8K,SAAW,WACrBD,GAAI7K,MAAM+K,aAAe,SACrB9J,IAAAA,GAAO3B,SAASuB,cAAc,OAClCI,GAAKlB,aAAa,MAAOoD,EAAK6H,KAC9B/J,GAAKC,IAAMiC,EAAKhC,OAChBL,QAAQG,GAAM,SACd4J,GAAI7J,YAAYC,IACZG,IAAAA,GAAQ9B,SAASuB,cAAc,OACnCC,QAAQM,GAAO,yBACfA,GAAMpB,MAAMqB,YAAc,QAC1BD,GAAMpB,MAAMsB,aAAe,QACvBC,IAAAA,GAAQjC,SAASuB,cAAc,OACnCC,QAAQS,GAAO,gBACfH,GAAMJ,YAAYO,IACd0J,IAAAA,GAAY3L,SAASuB,cAAc,UACvCC,QAAQmK,GAAW,2CACnBA,GAAU1K,UAAY,sCACtB0K,GAAUlL,aAAa,cAAe,SACtCkL,GAAUlL,aAAa,cAAe,cACtCkL,GAAUxJ,QAAU,WAChBrD,EAAWuC,GAEfY,GAAMP,YAAYiK,IAClBJ,GAAI7J,YAAYI,IACZ8J,IAAAA,GAAO5L,SAASuB,cAAc,cAClCqK,GAAKlL,MAAMmL,SAAW,MACtBD,GAAKlL,MAAMoL,WAAa,UACxBF,GAAK3K,UAAY4C,EAAKkI,QAClBlI,EAAKmI,SACLT,GAAI7J,YAAYkK,IAEpB1H,EAAKxC,YAAY6J,IAEbU,IAAAA,GAAQjM,SAASuB,cAAc,OACnCC,QAAQyK,GAAO,mBACXC,IAAAA,GAAMlM,SAASuB,cAAc,SACjC2K,GAAIhM,UAAY,SACZiM,IAAAA,GAAOnM,SAASuB,cAAc,OAClCC,QAAQ2K,GAAM,OACVC,IAAAA,GAASpM,SAASuB,cAAc,OACpCC,QAAQ4K,GAAQ,gCACZC,IAAAA,GAAMrM,SAASuB,cAAc,SACjC8K,GAAI5L,aAAa,OAAQ,SACzB4L,GAAI5L,aAAa,MAAO,OACxB4L,GAAI5L,aAAa,MAAO,KACxB4L,GAAI5L,aAAa,OAAQ,KACzB4L,GAAI1G,MAAQ,KACZnE,QAAQ6K,GAAK,sBACbA,GAAIzG,QAAU,WACV0G,GAAKrL,UAAYoL,GAAI1G,MAAQ,IAC7B4F,GAAI7K,MAAMC,MAAQ7C,EAAOsF,KAAK/B,GAAKV,MAAQ0L,GAAI1G,MAAQ,KAE3DyG,GAAO1K,YAAY2K,IACfC,IAAAA,GAAOtM,SAASuB,cAAc,QAClCC,QAAQ8K,GAAM,qCACdA,GAAKpM,UAAY,MACbqM,IAAAA,GAASvM,SAASuB,cAAc,OACpCC,QAAQ+K,GAAQ,YAChBA,GAAO7K,YAAY4K,IACnBH,GAAKzK,YAAY0K,IACjBD,GAAKzK,YAAY6K,IACjBN,GAAMvK,YAAYwK,IAClBD,GAAMvK,YAAYyK,IAClBhI,EAAKzC,YAAYuK,IACbpD,IAAAA,GAAM7I,SAASuB,cAAc,OACjCC,QAAQqH,GAAK,OACTpD,IAAAA,GAAMzF,SAASuB,cAAc,OACjCC,QAAQiE,GAAK,OACTO,IAAAA,GAAMhG,SAASuB,cAAc,OACjCC,QAAQwE,GAAK,YACT2E,IAAAA,GAAO3K,SAASuB,cAAc,SAClCoJ,GAAKzK,UAAY,cACbwF,IAAAA,GAAM1F,SAASuB,cAAc,SACjCC,QAAQkE,GAAK,gBACbA,GAAIjF,aAAa,OAAQ,QACzBiF,GAAIC,MAAQ9B,EAAKkI,QACjBrG,GAAIE,QAAU,WACVgG,GAAK3K,UAAYnD,EAAOsF,KAAK/B,GAAK0K,QAAUrG,GAAIC,MAAME,QAEtDI,IAAAA,GAAMjG,SAASuB,cAAc,UACjCC,QAAQyE,GAAK,gCACT8C,IAAAA,GAAS/I,SAASuB,cAAc,UACpCwH,GAAOpD,MAAQ,OACK,QAAhB9B,EAAKmI,SAAmBjD,GAAOtI,aAAa,WAAY,QAC5DsI,GAAO7I,UAAY,KACnB+F,GAAIvE,YAAYqH,IACZC,IAAAA,GAAShJ,SAASuB,cAAc,UACpCyH,GAAOrD,MAAQ,QACK,SAAhB9B,EAAKmI,SAAoBhD,GAAOvI,aAAa,WAAY,QAC7DuI,GAAO9I,UAAY,KACnB+F,GAAIvE,YAAYsH,IAChB/C,GAAIL,QAAU,WACV9H,EAAOsF,KAAK/B,GAAK2K,QAAU/F,GAAIN,MACd,QAAbM,GAAIN,OACJiG,GAAK3K,UAAYyE,GAAIC,MAAQ7H,EAAOsF,KAAK/B,GAAK0K,QAC9CrG,GAAIuE,gBAAgB,YACpBsB,GAAI7J,YAAYkK,MAEhBlG,GAAIC,MAAQ7H,EAAOsF,KAAK/B,GAAK0K,QAAU,GACvCrG,GAAIjF,aAAa,WAAY,QAC7BmL,GAAK3K,UAAY,GACjBsK,GAAItK,UAAY,GAChBsK,GAAI7J,YAAYC,IAChB4J,GAAI7J,YAAYI,MAGxB2D,GAAI/D,YAAYiJ,IAChBlF,GAAI/D,YAAYgE,IAChBM,GAAItE,YAAYuE,IAChB4C,GAAInH,YAAY+D,IAChBoD,GAAInH,YAAYsE,IAChB7B,EAAKzC,YAAYmH,IAEbuB,IAAAA,GAAMpK,SAASuB,cAAc,OACjCC,QAAQ4I,GAAK,OACTC,IAAAA,GAAOrK,SAASuB,cAAc,OAClCC,QAAQ6I,GAAM,OACVmC,IAAAA,GAAOxM,SAASuB,cAAc,SAClCiL,GAAKtM,UAAY,MACbmG,IAAAA,GAAMrG,SAASuB,cAAc,SACjCC,QAAQ6E,GAAK,gBACbA,GAAI5F,aAAa,OAAQ,QACzB4F,GAAIV,MAAQ9B,EAAK6H,IACjBrF,GAAIT,QAAU,WACV9H,EAAOsF,KAAK/B,GAAKqK,IAAMrF,GAAIV,MAAME,OACjClE,GAAKlB,aAAa,MAAO4F,GAAIV,MAAME,SAEvCwE,GAAK3I,YAAY8K,IACjBnC,GAAK3I,YAAY2E,IACjB+D,GAAI1I,YAAY2I,IAChBlG,EAAKzC,YAAY0I,IAEG,QAAhBvG,EAAKmI,SAAqC,IAAhBnI,EAAKkI,SAC/BzH,EAAQlC,QAGhB0B,EAAKpC,YAAYwC,GACjBJ,EAAKpC,YAAYyC,GACjBnE,SAASC,eAAe,QAAQyB,YAAYoC,KAEhD9D,SAASC,eAAe,UAAUC,UAAYpC,EAAO2O,KACrDzM,SAASC,eAAe,WAAWgB,UAAYnD,EAAO2O,KA+H1D,SAASC,IACLpM,EAAQN,SAASC,eAAe,cAAe,OAC/CuB,QAAQxB,SAASC,eAAe,cAAe,cAC/CD,SAASC,eAAe,cAAcgB,UAAY,sXAC9CyD,IAAAA,EAAI5G,EAAO4F,UAAUiB,SACrBgI,EAAQjI,EAAEI,cAAc8H,WACxBlI,EAAEG,WAAa,IACf8H,GAAS,KAEbA,GAAUjI,EAAEG,WAAa,EACzBrC,WAAW,WACPI,OAAOC,KAAK,eAAiB8J,EAAQ,IAAM7O,EAAO+O,KAAM,UAAU/J,SACnE,MACH1D,QAAQC,IAAI,4BACZmD,WAAW,WACPxC,SAASC,eAAe,iBAAiBmC,SAC1C,KACH0K,EAAE,mBAAmBC,GAAG,kBAAmB,WACvC/M,SAASC,eAAe,cAAcgB,UAAY,KAEtD6L,EAAE,eAAeE,MAAM,QAE3B,SAASC,IACDzM,IAAAA,EAAI,EACC0M,SAAAA,IACL5M,EAAQN,SAASC,eAAe,cAAeH,KAAKC,MAAMS,GAAGoM,aAEjE3N,EAAW,IACF0I,KAAK7J,EAAO4F,UAAUiB,SAASG,cAAc8H,YACtD3N,EAAS0I,KAAK7J,EAAOkH,MAAML,SAASG,cAAc8H,YAClDpM,IACA0M,IAEIlN,SAASC,eAAe,QAAQ8H,SAAS9I,EAAS0I,KAAK,cACvD3H,SAASC,eAAe,QAAQ8H,SAAS9I,EAAS0I,KAAK,YACvD3H,SAASC,eAAe,QAAQ8H,SAAS9I,EAAS0I,KAAK,gBACvD3H,SAASC,eAAe,QAAQ8H,SAAS9I,EAAS0I,KAAK,UACvD3H,SAASC,eAAe,QAAQ8H,SAAS9I,EAAS0I,KAAK,cAC3DnH,IACA0M,IACApP,EAAOgK,QAAQ3G,QAAQ,SAAAC,GACnBA,EAAI+L,UAAU,GAAGC,MAAM,KAAKjM,QAAQ,SAAAkM,GAChCpO,EAAS0I,KAAK2F,WAAWD,EAAG,OAEhC7M,GAAM,EAAI1C,EAAOgK,QAAQ+C,OACzBqC,MAGAK,IAAAA,EAAO,GAEXzP,EAAOoH,MAAMkI,MAAM,KAAKjM,QAAQ,SAAAC,GAC5BmM,EAAK5F,KAAKvG,EAAI+J,WAAW,gBAAiB,KAAKtF,UAEnDrF,IACA0M,IAEApP,EAAO0P,YAAYJ,MAAM,KAAKjM,QAAQ,SAAAC,GAClCmM,EAAK5F,KAAKvG,EAAI+J,WAAW,gBAAiB,KAAKtF,QAC/CrF,GAAM,EAAI1C,EAAO0P,YAAYJ,MAAM,KAAKvC,OACxCqC,MAGJpP,EAAOsF,KAAKjC,QAAQ,SAAA2C,GACC,SAAbA,EAAKG,MACD6F,OAAOhG,EAAKoB,OAAS,GACrBpB,EAAKiG,SAASqD,MAAM,KAAKjM,QAAQ,SAAAC,GAC7BmM,EAAK5F,KAAKvG,EAAI+J,WAAW,gBAAiB,KAAKtF,UAGvD/B,EAAK0E,KAAK4E,MAAM,KAAKjM,QAAQ,SAAAC,GACzBmM,EAAK5F,KAAKvG,EAAI+J,WAAW,gBAAiB,KAAKtF,QAC/CrF,GAAM,GAAK1C,EAAOsF,KAAKyH,OAAS/G,EAAK0E,KAAK4E,MAAM,KAAKvC,OACrDqC,OAEgB,aAAbpJ,EAAKG,OACI,IAAZH,EAAK4H,KACL5H,EAAK4H,IAAI0B,MAAM,KAAKjM,QAAQ,SAAAC,GACxBmM,EAAK5F,KAAKvG,EAAI+J,WAAW,gBAAiB,KAAKtF,UAGnC,IAAhB/B,EAAKiI,SACLjI,EAAKiI,QAAQqB,MAAM,KAAKjM,QAAQ,SAAAC,GAC5BmM,EAAK5F,KAAKvG,EAAI+J,WAAW,gBAAiB,KAAKtF,UAGvDrF,GAAM,GAAK1C,EAAOsF,KAAKyH,OACvBqC,OAOH,IAFDO,IAAAA,EAAQ,GACRC,EAAIH,EAAK1C,OACJX,EAAI,EAAGA,EAAIwD,EAAGxD,IAAK,CACpByD,IAAAA,EAAMJ,EAAKrD,IAEL,GADFyD,EAAIC,QAAQ,OAEhBD,EAAIP,MAAM,KAAKjM,QAAQ,SAAAC,GACnBqM,EAAM9F,KAAKvG,KAEfmM,EAAKhL,OAAO2H,EAAG,GACfA,IACAwD,KAIRD,EAAMtM,QAAQ,SAAAC,GACVmM,EAAK5F,KAAKvG,KAEdZ,IACA0M,IAEAQ,EAAIH,EAAK1C,OACJ,IAAA,IAAIX,EAAI,EAAGA,EAAIwD,EAAGxD,IACnBqD,EAAKhL,OAAO2H,EAAG,EAAGoD,WAAWC,EAAKrD,GAAI,KACtC1J,GAAM,EAAI+M,EAAK1C,OACfqC,IAGAW,IAAAA,EAAQ,GAAIC,EAAM,EAAGC,EAAS,EAC9BC,EAAU,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAAO,MAAO,MAAO,SAAU,OAAQ,UAAW,KAAM,IAAK,IAAK,IAAK,KAAM,MAAO,KAAM,KAAM,KAAM,OAAQ,KAAM,WAAY,KAAM,KAAM,MAAO,MAAO,KAAM,IAAK,UAAW,MAAO,MAAO,MAAO,KAAM,OAAQ,MAAO,MAAO,GAAI,MAAO,OAAQ,OAAQ,OAAQ,QAAS,QAAS,MAAO,KAAM,MAAO,MAAO,aAAc,KAAM,KAAM,KAAM,MAAO,QAAS,QAAS,OAAQ,QAAS,QAAS,MAAO,MAAO,OAAQ,OAAQ,SAAU,UAAW,MAAO,KAAM,MAAO,OAAQ,MAAO,OAAQ,IAAK,KAAM,MAAO,OAChjBT,EAAKpM,QAAQ,SAAAC,GACJ4M,EAAQpH,SAASxF,KACRyM,EAAMzM,GAKXyM,EAAMzM,MAHPyM,EAAMzM,GAAO,EACb2M,KAGJD,KAEJtN,GAAM,EAAI+M,EAAK1C,OACfqC,MAGuBe,IAAAA,IAAAA,EAAAA,EAAAA,EAAAA,OAAOC,QAAQL,GAAQ,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,GAAA,GAAtCM,EAAsC,EAAA,GAAA,EAAA,GAClCL,EAAMC,GACd9O,EAAS0I,KAAKwG,GAElB3N,GAAM,EAAIyN,OAAOC,QAAQL,GAAOhD,OAChCqC,IAGJ9N,QAAQC,IAAIJ,GAvyChB2D,OAAOwL,OAAS,WACZjP,GAAGG,WAAW,gBAAgB+O,MAAM,OAAQ,KAAMC,QAAQC,IAAI,SAASC,MAAM,GAAGC,WAAW,SAAAC,GACnFA,EAAK9G,MACLhF,OAAO+L,SAASjG,KAAO,SAG3BgG,EAAKvN,QAAQ,SAAA5B,GACTzB,EAASyB,EAAIqP,OACb7Q,EAAQwB,EAAIwE,GACZ/D,SAASC,eAAe,UAAU0F,MAAQ7H,EAAO+O,KACjD7M,SAASC,eAAe,UAAU0F,MAAQ7H,EAAO0P,YACjDjK,IACAvC,IACIlD,EAAO+Q,QACP7O,SAASC,eAAe,cAAcoL,UAAUC,OAAO,UACvDtL,SAASC,eAAe,aAAaoL,UAAUyD,IAAI,UACnD9O,SAASC,eAAe,UAAUoL,UAAUyD,IAAI,YAEhD9O,SAASC,eAAe,cAAcoL,UAAUyD,IAAI,UACpD9O,SAASC,eAAe,aAAaoL,UAAUC,OAAO,UACtDtL,SAASC,eAAe,UAAUoL,UAAUC,OAAO,WAEnDxN,EAAOiR,QAAQnI,SAASoI,KACxBhP,SAASC,eAAe,aAAagB,UAAY,sCAEjDjB,SAASC,eAAe,aAAagB,UAAY,sCAEjDyD,IAAAA,EAAI5G,EAAO4F,UAAUiB,SACrBgI,EAAQjI,EAAEI,cAAc8H,WACxBlI,EAAEG,WAAa,IACf8H,GAAS,KAEbA,GAAUjI,EAAEG,WAAa,EACzB7E,SAASC,eAAe,eAAeyI,KAAO,eAAiBiE,EAAQ,IAAM7O,EAAO+O,KACpF7M,SAASC,eAAe,eAAeyI,KAAO,kBAAoB5K,EAAO+O,KACzEI,OAEL,SAAA7M,GAAOhB,OAAAA,QAAQC,IAAIe,KAmBtBJ,SAASC,eAAe,WAAWgP,iBAAiB,SAAU,SAAUC,GAjB/DC,IACDtC,EAiBJqC,EAAME,iBAjBFvC,EAAO7M,SAASC,eAAe,UAAU0F,MAC7CxG,GAAGG,WAAW,gBAAgB+O,MAAM,OAAQ,KAAMxB,GAAM2B,MAAM,GAAGD,MAAM7O,KAAK,SAAAgP,GACpE,GAACA,EAAK9G,OAASiF,GAAQyB,QAAQC,IAAI,QAQ5BrP,OAFPpB,EAAO0P,YAAcxN,SAASC,eAAe,UAAU0F,MAAME,OAC7D/H,EAAO+O,KAAOA,EACP3N,IAPPc,SAASC,eAAe,qBAAqBgB,UAA7C,6TASLvB,KAAK,WACJkD,OAAO+L,SAASjG,KAAO,SAAWmE,IACnC1M,MAAM,SAAAC,GAAOhB,OAAAA,QAAQC,IAAIe,OAsDhCJ,SAASC,eAAe,aAAagP,iBAAiB,SAAU,SAAUC,GACtEA,EAAME,iBACN9O,EAAQN,SAASC,eAAe,aAAc,KAC9CoP,OAAOrP,SAASC,eAAe,kBAC/BqP,OAAOtP,SAASC,eAAe,cAC/BD,SAASC,eAAe,gBAAgBQ,aAAa,WAAY,QACjET,SAASC,eAAe,iBAAiBQ,aAAa,WAAY,QAClET,SAASC,eAAe,iBAAiBQ,aAAa,WAAY,QACjD,QAAbzB,EAvDCuQ,SAAAA,EAAOC,GACR1O,IAAAA,EAAM7C,EAAM6C,IAAI,eAAiB/C,EAAQ,KAAOyR,EAASzQ,EAAS0Q,MACtE3O,EAAI4O,iBAAiBhQ,KAAK,SAAAiQ,GACtBJ,EAAOC,EAAS,KACjBrP,MAAM,SAAAC,GACW,4BAAZA,EAAIC,KACJS,EAAI8O,IAAI7Q,GAAUgO,GAAG,gBACjB,SAAkB2B,GACdpO,EAAQN,SAASC,eAAe,aAAcH,KAAKC,MAAO2O,EAAKmB,iBAAmBnB,EAAKoB,WAAc,OAEzG,SAAe1P,GACXJ,SAASC,eAAe,cAAcgB,UAAY,kJAAoJb,EAAIC,KAAO,wJACjNmC,WAAW,WACHxC,SAASC,eAAe,kBAAkBD,SAASC,eAAe,iBAAiBmC,SACxF,KACHhD,QAAQC,IAAIe,GACZ0M,EAAE,cAAcE,MAAM,SAE1B,WACIlM,EAAI4O,iBAAiBhQ,KAAK,SAAAmC,GACtB/D,EAAOoD,MAAMyG,KAAK,CACdtF,QAAS,IAAMmN,EAASzQ,EAAS0Q,KACjC5N,OAAQA,IAEZpC,IACAuB,IACA8L,EAAE,cAAcE,MAAM,QACP,GAAXpO,EAAckO,EAAE,cAAcE,MAAM,QACnCF,EAAE,cAAcE,MAAM,UAC5B7M,MAAM,SAAAC,GAAShB,QAAQC,IAAIe,OAItChB,QAAQC,IAAIe,KAsBKmP,CAAO,IAjBhCzR,EAAOoD,MAAMyG,KAAK,CACdtF,QAAS,UACTR,OAAQ7B,SAASC,eAAe,eAAe0F,QAEnDlG,IACAqN,EAAE,cAAcE,MAAM,QACP,GAAXpO,EAAckO,EAAE,cAAcE,MAAM,QACnCF,EAAE,cAAcE,MAAM,YAqCnCpK,OAAOmN,SAAW,SAAkB9L,GAC5B+L,IAAAA,EAAU,KACF,QAAR/L,EACA+L,EAAU,CACN/L,KAAMA,EACNqG,KAAM,IAEK,SAARrG,EACP+L,EAAU,CACN/L,KAAMA,EACNuE,KAAM,GACNtD,MAAO,KAEI,WAARjB,EACP+L,EAAU,CACN/L,KAAMA,EACNyG,OAAQ,GACRF,MAAO,SAEI,aAARvG,IACP+L,EAAU,CACN/L,KAAMA,EACNpC,OAAQ,kCACR6J,IAAK,GACLK,QAAS,GACTC,QAAS,OACTrL,MAAO,QAIA,MAAXqP,GAAiBlS,EAAOsF,KAAKb,OAAOhE,EAAO,EAAGyR,GAClDzM,KA82BJvD,SAASC,eAAe,UAAU2F,QAAU,WACxC5F,SAASC,eAAe,UAAU0F,MAAQ2H,WAAWtN,SAASC,eAAe,UAAU0F,MAAO,MAGlG3F,SAASC,eAAe,UAAU6I,SAAW,WACzChL,EAAO2O,KAAOzM,SAASC,eAAe,WAAWgB,UAAYjB,SAASC,eAAe,UAAU0F,OAEnG3F,SAASC,eAAe,aAAakC,QAAU,WAC3CsC,SAASzE,SAASC,eAAe,cACjCwE,SAASzE,SAASC,eAAe,eACjCD,SAASC,eAAe,UAAUgK,gBAAgB,aAEtDjK,SAASC,eAAe,cAAckC,QAAU,WAC5CsC,SAASzE,SAASC,eAAe,cACjCwE,SAASzE,SAASC,eAAe,eACjCD,SAASC,eAAe,UAAUQ,aAAa,WAAY,QAC3DhB,KAGJqN,EAAE,cAAcC,GAAG,kBAAmB,SAAAkD,GAClCjQ,SAASC,eAAe,cAAc2B,IAAM,GAC5C5B,SAASC,eAAe,aAAagB,UAAY,mBACjDjB,SAASC,eAAe,eAAe0F,MAAQ,GAC/C3F,SAASC,eAAe,YAAYgK,gBAAgB,YACpDjK,SAASC,eAAe,eAAegK,gBAAgB,YACvDqF,OAAOtP,SAASC,eAAe,kBAC/BqP,OAAOtP,SAASC,eAAe,qBAC/BqP,OAAOtP,SAASC,eAAe,oBAC/BoP,OAAOrP,SAASC,eAAe,cAC/BD,SAASC,eAAe,gBAAgBgK,gBAAgB,YACxDjK,SAASC,eAAe,iBAAiBgK,gBAAgB,YACzDjK,SAASC,eAAe,iBAAiBgK,gBAAgB,cAE7DjK,SAASC,eAAe,YAAYgP,iBAAiB,SAAU,SAAAgB,GAElDC,IACDC,GAFRpR,EAAWkR,EAAEG,OAAOC,MAAM,IAQjBZ,KAAOnC,WAAWvO,EAAS0Q,KAAM,IAC1CzP,SAASC,eAAe,aAAagB,UAAYlC,EAAS0Q,MAPlDU,EAAO,IAAIG,YACVC,cAAcxR,GACnBoR,EAAKK,OAAS,SAAUC,GACpBzQ,SAASC,eAAe,cAAc2B,IAAM6O,EAAGL,OAAOM,UAOlE1Q,SAASC,eAAe,eAAe6I,SAAW,WAC9C9I,SAASC,eAAe,cAAc2B,IAAM5B,SAASC,eAAe,eAAe0F,OAEvF3F,SAASC,eAAe,aAAakC,QAAU,WAC3CnD,EAAY,OACZgB,SAASC,eAAe,YAAYQ,aAAa,WAAY,QAC7DT,SAASC,eAAe,eAAegK,gBAAgB,YACvDoF,OAAOrP,SAASC,eAAe,qBAC/BqP,OAAOtP,SAASC,eAAe,qBAEnCD,SAASC,eAAe,aAAakC,QAAU,WAC3CnD,EAAY,MACZgB,SAASC,eAAe,YAAYgK,gBAAgB,YACpDjK,SAASC,eAAe,eAAeQ,aAAa,WAAY,QAChE6O,OAAOtP,SAASC,eAAe,qBAC/BoP,OAAOrP,SAASC,eAAe,qBAGnCD,SAASC,eAAe,aAAakC,QAAU,WACvCnC,SAASC,eAAe,aAAa8H,SACrCsH,OAAOrP,SAASC,eAAe,gBAC/BD,SAASC,eAAe,aAAaQ,aAAa,WAAY,UAE9D6O,OAAOtP,SAASC,eAAe,gBAC/BD,SAASC,eAAe,aAAagK,gBAAgB,cAI7DjK,SAASC,eAAe,eAAekC,QAAU,WAC7CrE,EAAO6S,SAAW,IAAIzS,SAASyF,UAAUC,UAAUgN,WAAY,IAAInS,KAAKA,KAAKC,OAAQmS,UAAY,KACjGpR,KAEJO,SAASC,eAAe,eAAekC,QAAU,WAC7CrE,EAAO6S,SAAW,IAAIzS,SAASyF,UAAUC,UAAUgN,WAAY,IAAInS,KAAKA,KAAKC,OAAQmS,UAAY,KACjGpR,KAGJO,SAASC,eAAe,cAAckC,QAAU,WAC5ChD,GAAGG,WAAW,gBAAgBC,IAAIxB,GAAOyB,OAAO,CAC5CqP,QAAQ,KAIhB7O,SAASC,eAAe,aAAakC,QAAU,WACvCrE,EAAOiR,QAAQnI,SAASoI,MACxBlR,EAAOiR,QAAQxM,OAAOzE,EAAOiR,QAAQnB,QAAQoB,KAAM,GACnDhP,SAASC,eAAe,aAAagB,UAAY,wCAEjDnD,EAAOiR,QAAQpH,KAAKqH,KACpBhP,SAASC,eAAe,aAAagB,UAAY,uCAErDxB,KAGJqN,EAAE,cAAcC,GAAG,iBAAkB,SAAAkD,GACjCjQ,SAASC,eAAe,aAAaQ,aAAa,UAAW,SAC7DT,SAASC,eAAe,aAAaQ,aAAa,UAAW,SAC7DT,SAASC,eAAe,YAAYgK,gBAAgB,YACpDjK,SAASC,eAAe,eAAegK,gBAAgB,YACvDqF,OAAOtP,SAASC,eAAe,qBAC/BqP,OAAOtP,SAASC,eAAe,sBAGnC6M,EAAE,eAAeC,GAAG,gBAAiB,SAAAkD,GAC7Ba,IAAAA,EAAMhT,EAAOiR,QAAQlE,OACpB/M,EAAOiR,QAAQnI,SAASoI,MAAM8B,IAC/BA,EAAM,GACNtP,QAAQxB,SAASC,eAAe,iBAAkB,UAClDD,SAASC,eAAe,iBAAiBC,UAAY,0EACrDF,SAASC,eAAe,cAAcoL,UAAUyD,IAAI,YAEpD9O,SAASC,eAAe,iBAAiBoL,UAAUC,OAAO,UAC1DtL,SAASC,eAAe,iBAAiBC,UAAY,sCACrDF,SAASC,eAAe,cAAcoL,UAAUC,OAAO,UACnDxN,EAAO2F,YAAYzD,SAASC,eAAe,eAAeoL,UAAUC,OAAO,aAqJvFtL,SAASC,eAAe,iBAAiBkC,QAAU,WAC3CrE,EAAO+Q,SACXvO,EAAQN,SAASC,eAAe,cAAe,KAC/CD,SAASC,eAAe,kBAAkBoL,UAAUC,OAAO,UAC3D2B,IACKnP,EAAO2F,YAyDRnD,EAAQN,SAASC,eAAe,cAAe,MAC/Cd,GAAGG,WAAW,gBAAgBC,IAAIxB,GAAOyB,OAAO,CAC5CqP,QAAQ,EACR7J,MAAO,IAAI9G,SAASyF,UAAUC,UAAUlF,IACxCqQ,QAAS,KACVrP,KAAK,WACJY,EAAQN,SAASC,eAAe,cAAe,MAC3CyE,IAAAA,EAAI5G,EAAO4F,UAAUiB,SACrBgI,EAAQjI,EAAEI,cAAc8H,WACxBlI,EAAEG,WAAa,IACf8H,GAAS,KAEbA,GAAUjI,EAAEG,WAAa,EACrBkM,IAAAA,EAAO,CACP7L,MAAOpH,EAAOoH,MACd8L,QAASlT,EAAO0P,YAChByD,IAAK,uCAAyCtE,EAAQ,IAAM7O,EAAO+O,KACnEvK,OAAQxE,EAAOwE,OACf4O,OAAQpT,EAAOgK,QACfqJ,KAAMlS,EACN4P,QAAQ,GAoBL1P,OAlBPmB,EAAQN,SAASC,eAAe,cAAe,MAC3CD,SAASC,eAAe,aAAa8H,SACrCgJ,EAAK/L,MAAQ,IAAI9G,SAASyF,UAAUC,UAAUlF,IAC9CqS,EAAK3L,QAAS,EACd2L,EAAKK,QAAS,IAEdL,EAAK3L,QAAS,EACd2L,EAAKK,QAAS,GAElB9Q,EAAQN,SAASC,eAAe,cAAe,MAC3CD,SAASC,eAAe,aAAa8H,SACrCgJ,EAAKM,QAAS,EACdN,EAAKO,WAAatR,SAASC,eAAe,aAAa0F,MAAME,SAE7DkL,EAAKM,QAAS,EACdN,EAAKO,WAAa,IAEtBhR,EAAQN,SAASC,eAAe,cAAe,MACxCd,GAAGG,WAAW,YAAYC,IAAIxB,GAAOyB,OAAOuR,KACpDrR,KAAK,WACJY,EAAQN,SAASC,eAAe,cAAe,MAC/CyM,MACDvM,MAAM,SAAAoR,GACLvR,SAASC,eAAe,cAAcgB,UAAY,qJAAuJsQ,EAAQ,wJACjNnS,QAAQC,IAAIkS,GACZ/O,WAAW,WACPxC,SAASC,eAAe,iBAAiBmC,SAC1C,KACH0K,EAAE,mBAAmBC,GAAG,kBAAmB,WACvC/M,SAASC,eAAe,cAAcgB,UAAY,SA3G1DX,EAAQN,SAASC,eAAe,cAAe,MAC/Cd,GAAGG,WAAW,gBAAgBC,IAAIxB,GAAOyB,OAAO,CAC5CiE,YAAY,EACZoL,QAAQ,EACR7J,MAAO,IAAI9G,SAASyF,UAAUC,UAAUlF,IACxCgF,UAAW,IAAIxF,SAASyF,UAAUC,UAAUlF,IAC5CqQ,QAAS,KACVrP,KAAK,WACJY,EAAQN,SAASC,eAAe,cAAe,MAC3CyE,IAAAA,EAAI5G,EAAO4F,UAAUiB,SACrBgI,EAAQjI,EAAEI,cAAc8H,WAKrBzN,OAJHuF,EAAEG,WAAa,IACf8H,GAAS,KAEbA,GAAUjI,EAAEG,WAAa,EAClB1F,GAAGG,WAAW,YAAYC,IAAIxB,GAAOyT,IAAI,CAC5CC,MAAO,EACPC,KAAM,EACNC,IAAK,EACL3M,MAAO,IAAI9G,SAASyF,UAAUC,UAAUlF,IACxCkT,KAAM,IAAI1T,SAASyF,UAAUC,UAAUlF,IACvC0G,QAAQ,EACRgM,QAAQ,EACRvC,QAAQ,EACR3J,MAAOpH,EAAOoH,MACd8L,QAASlT,EAAO0P,YAChByD,IAAK,uCAAyCtE,EAAQ,IAAM7O,EAAO+O,KACnEvK,OAAQxE,EAAOwE,OACf4O,OAAQpT,EAAOgK,QACfqJ,KAAMlS,MAEXS,KAAK,WACJY,EAAQN,SAASC,eAAe,cAAe,MAC/C7B,EAAK0C,IAAI,YAAc/C,GAAOyT,IAAI,CAC9BG,IAAK,EACLF,MAAO,EACPC,KAAM,GACP,SAAAtR,GACKA,EACAhB,QAAQC,IAAI,2BAA6Be,IAEzCE,EAAQN,SAASC,eAAe,cAAe,MAC/CyM,SAGTvM,MAAM,SAAAoR,GACLvR,SAASC,eAAe,cAAcgB,UAAY,qJAAuJsQ,EAAQ,wJACjNnS,QAAQC,IAAIkS,GACZ/O,WAAW,WACPxC,SAASC,eAAe,iBAAiBmC,SAC1C,KACH0K,EAAE,mBAAmBC,GAAG,kBAAmB,WACvC/M,SAASC,eAAe,cAAcgB,UAAY","file":"edit.6728f4cc.js","sourceRoot":"../src","sourcesContent":["import '../styles/edit.scss';\n\nvar store = firebase.storage();\nvar rtDb = firebase.database();\n\nlet docDat, docId;\nlet toDel = -1, toAdd = -1;\nlet lastSave = Date.now(), saved = false;\n\nlet addFrom = -1;\nlet toDelMed = -1, toAddMed = -1;\nlet newMedia = null;\nlet newMedSrc = null;\n\nlet keywords = [];\n\nwindow.loaded = function loaded() {\n    db.collection('galletasCont').where('file', '==', urlSrch.get('file')).limit(1).onSnapshot(snap => {\n        if (snap.empty) {\n            window.location.href = '../404';\n            return;\n        }\n        snap.forEach(doc => {\n            docDat = doc.data();\n            docId = doc.id;\n            document.getElementById('inFile').value = docDat.file;\n            document.getElementById('inDesc').value = docDat.description;\n            render();\n            fillMed();\n            if (docDat.public) {\n                document.getElementById('btnPrivate').classList.remove('d-none');\n                document.getElementById('btnAprove').classList.add('d-none');\n                document.getElementById('btnPub').classList.add('d-none');\n            } else {\n                document.getElementById('btnPrivate').classList.add('d-none');\n                document.getElementById('btnAprove').classList.remove('d-none');\n                document.getElementById('btnPub').classList.remove('d-none');\n            }\n            if (docDat.revised.includes(uid)) {\n                document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n            } else {\n                document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n            }\n            let d = docDat.published.toDate();\n            let month = d.getFullYear().toString();\n            if (d.getMonth() < 9) {\n                month += '0';\n            }\n            month += (d.getMonth() + 1);\n            document.getElementById('btnPrevCook').href = '../galletas/' + month + '/' + docDat.file;\n            document.getElementById('btnPrevMail').href = '../vista-email/' + docDat.file;\n            fillKW();\n        });\n    }, err => console.log(err))\n\n    function fileFrm() {\n        let file = document.getElementById('inFile').value;\n        db.collection('galletasCont').where('file', '==', file).limit(1).get().then(snap => {\n            if (!snap.empty && file != urlSrch.get('file')) {\n                document.getElementById('alrtPlusContainer').innerHTML = `<div class=\"alert alert-danger alert-dismissible fade show fixed-top\" role=\"alert\">\n                    Ese nombre de archivo ya esta en uso.\n                    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                </div>`;\n            } else {\n                docDat.description = document.getElementById('inDesc').value.trim();\n                docDat.file = file;\n                return saveDoc();\n            }\n        }).then(() => {\n            window.location.href = '?file=' + file;\n        }).catch(err => console.log(err));\n    }\n    document.getElementById(\"frmFile\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        fileFrm();\n    });\n\n    function addMed(atempt) {\n        let ref = store.ref('cookieMedia/' + docId + '/i' + atempt + newMedia.name);\n        ref.getDownloadURL().then(res => {\n            addMed(atempt + 1);\n        }).catch(err => {\n            if (err.code == 'storage/object-not-found') {\n                ref.put(newMedia).on('state_changed',\n                    function progress(snap) {\n                        setprog(document.getElementById('barNewMed'), Math.floor((snap.bytesTransferred / snap.totalBytes) * 100));\n                    },\n                    function error(err) {\n                        document.getElementById(\"alrtClsSsn\").innerHTML = '<div id=\"alrtClsSsnAlrt\" class=\"alert alert-warning alert-dismissible fade show fixed-bottom\" role=\"alert\"><strong>¡Ocurrió un error!</strong> ' + err.code + '<button id=\"btnAlrtClsSsn\" type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>';\n                        setTimeout(function () {\n                            if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                        }, 3000);\n                        console.log(err);\n                        $('#mdlAddMed').modal('hide');\n                    },\n                    function complete() {\n                        ref.getDownloadURL().then(medUrl => {\n                            docDat.media.push({\n                                medFile: 'i' + atempt + newMedia.name,\n                                medUrl: medUrl\n                            });\n                            normSave();\n                            fillMed();\n                            $('#mdlAddMed').modal('hide');\n                            if (addFrom == 0) $('#mdlMedMan').modal('show');\n                            else $('#mdlMedCho').modal('show');\n                        }).catch(err => { console.log(err) });\n                    }\n                );\n            } else {\n                console.log(err);\n            }\n        });\n    }\n    function addExtMed() {\n        docDat.media.push({\n            medFile: 'externo',\n            medUrl: document.getElementById('inNewMedUrl').value\n        });\n        normSave();\n        $('#mdlAddMed').modal('hide');\n        if (addFrom == 0) $('#mdlMedMan').modal('show');\n        else $('#mdlMedCho').modal('show');\n    }\n    document.getElementById(\"frmAddMed\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        setprog(document.getElementById('barNewMed'), \"0\");\n        showEl(document.getElementById(\"barNewMedCont\"));\n        hideEl(document.getElementById(\"frmAddMed\"));\n        document.getElementById(\"btnCnfNewMed\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanNewMed0\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanNewMed1\").setAttribute('disabled', 'true');\n        if (newMedSrc == \"home\") addMed(0);\n        else addExtMed();\n    });\n}\n\nlet savedInterval;\nfunction saveDoc() {\n    console.log('Saving...');\n    return db.collection('galletasCont').doc(docId).update(docDat);\n}\nfunction normSave() {\n    saveDoc().then(() => {\n        if (saved) clearInterval(savedInterval);\n        saved = true;\n        savedInterval = setInterval(() => {\n            let minutes = Math.floor((Date.now() - lastSave) / 60000);\n            if (minutes < 60) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n            else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n        }, 300010);\n        document.getElementById('tagLstSave').innerText = \"Se han guardado todos los cambios\";\n        lastSave = Date.now();\n    }).catch(err => {\n        document.getElementById('tagLstSave').innerText = \"Error, no se han guardado todos los cambios: \" + err.code;\n        console.log(err);\n    });\n}\n\nwindow.plusSect = function plusSect(type) {\n    let newSect = null;\n    if (type == 'html') {\n        newSect = {\n            type: type,\n            html: \"\"\n        };\n    } else if (type == 'parra') {\n        newSect = {\n            type: type,\n            text: \"\",\n            title: \"0\"\n        };\n    } else if (type == 'youtube') {\n        newSect = {\n            type: type,\n            vidUrl: \"\",\n            ratio: \"16by9\"\n        };\n    } else if (type == 'medSimple') {\n        newSect = {\n            type: type,\n            medUrl: \"https://via.placeholder.com/150\",\n            alt: \"\",\n            caption: \"\",\n            hasCapt: \"true\",\n            width: \"75%\"\n        };\n    }\n    //Add more@#\n    if (newSect != null) docDat.cont.splice(toAdd, 0, newSect);\n    render();\n}\n\nfunction setprog(bar, n) {\n    bar.setAttribute('aria-valuenow', n);\n    bar.style.width = n + '%';\n    bar.innerText = n + '%';\n}\n\nfunction removeMedia(medFileName) {\n    return store.ref('cookieMedia/' + docId + '/' + medFileName).delete();\n}\n\nfunction fillMed() {\n    document.getElementById('contMedMan').innerHTML = `<div class=\"col mb-4\">\n        <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n            <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlAddMed\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\" onclick=\"addFrom=0;\">\n                <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n            </a>\n        </div>\n    </div>`;\n    document.getElementById('contMedCho').innerHTML = `<div class=\"col mb-4\">\n        <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n            <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlAddMed\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\" onclick=\"addFrom=1;\">\n                <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n            </a>\n        </div>\n    </div>`;\n\n    docDat.media.forEach((itm, idx) => {\n        let col0 = document.createElement('div');\n        classes(col0, \"col mb-4\");\n        let card0 = document.createElement('div');\n        classes(card0, \"card text-light bg-dark\");\n        col0.appendChild(card0);\n        let img0 = document.createElement('img');\n        classes(img0, \"card-img\");\n        img0.src = itm.medUrl;\n        card0.appendChild(img0);\n        let over0 = document.createElement('div');\n        classes(over0, \"card-img-overlay pt-0\");\n        over0.style.paddingLeft = \".9rem\";\n        over0.style.paddingRight = \".9rem\";\n        card0.appendChild(over0);\n        let btns0 = document.createElement('div');\n        classes(btns0, \"row mb-2 p-0\");\n        over0.appendChild(btns0);\n        let medBtnDel = document.createElement('button');\n        classes(medBtnDel, \"btn btn-light btn-scckie btn-sm\");\n        medBtnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n        medBtnDel.onclick = function () {\n            if (toDelMed == idx) {\n                toDelMed = -1;\n                if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                if (itm.medFile != 'externo') {\n                    removeMedia(itm.medFile).then(() => {\n                        if (itm.medUrl == docDat.picUrl) {\n                            docDat.picUrl = \"\";\n                        }\n                        docDat.media.splice(idx, 1);\n                        normSave();\n                    }).catch(err => console.log(err));\n                } else {\n                    if (itm.medUrl == docDat.picUrl) {\n                        docDat.picUrl = \"\";\n                    }\n                    docDat.media.splice(idx, 1);\n                    normSave();\n                }\n            } else {\n                document.getElementById(\"alrtClsSsn\").innerHTML = `<div id=\"alrtClsSsnAlrt\" class=\"alert alert-danger alert-dismissible fade show fixed-top\" role=\"alert\">\n                    <strong>¿Quieres eliminar esta imagen?</strong> Presiona de nuevo el botón para confirmar.\n                    <button id=\"btnAlrtClsSsn\" type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>`;\n                toDelMed = idx;\n                setTimeout(() => {\n                    toDelMed = -1;\n                    if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                }, 3000);\n            }\n        };\n        btns0.appendChild(medBtnDel);\n        let tooltip = document.createElement('div');\n        classes(tooltip, \"tooltipn ml-auto\");\n        let medBtnCopy = document.createElement('button');\n        classes(medBtnCopy, \"btn btn-light btn-scckie btn-sm\");\n        let tltipTxt = document.createElement('span');\n        classes(tltipTxt, \"tooltipTextn\");\n        tltipTxt.innerHTML = \"Copiar\";\n        medBtnCopy.appendChild(tltipTxt);\n        medBtnCopy.innerHTML += '<i class=\"fas fa-link\"></i>';\n        medBtnCopy.onclick = function () {\n            /*var copyText = document.getElementById(\"toCopy\");\n            //copyText.classList.remove('d-none');\n            copyText.select();\n            copyText.setSelectionRange(0, 99999);\n            document.execCommand(\"copy\");\n            //classes(copyText, \"d-none\");*/\n            window.open(itm.medUrl).focus();\n\n            tltipTxt.innerHTML = \"URL copiado\";\n        };\n        medBtnCopy.onmouseout = function () {\n            tltipTxt.innerHTML = \"Copiar\";\n        }\n        tooltip.appendChild(medBtnCopy);\n        btns0.appendChild(tooltip);\n        let medBtnUnstar = document.createElement('button');\n        let medBtnStar = document.createElement('button');\n        if (itm.medUrl == docDat.picUrl) {\n            classes(medBtnUnstar, \"btn btn-light btn-scckie btn-sm ml-1\");\n            medBtnUnstar.innerHTML = '<i class=\"fas fa-star\"></i>';\n            medBtnUnstar.onclick = function () {\n                docDat.picUrl = \"\";\n                normSave();\n            };\n            btns0.appendChild(medBtnUnstar);\n        } else {\n            classes(medBtnStar, \"btn btn-light btn-scckie btn-sm ml-1\");\n            medBtnStar.innerHTML = '<i class=\"far fa-star\"></i>';\n            medBtnStar.onclick = function () {\n                docDat.picUrl = itm.medUrl;\n                normSave();\n            };\n            btns0.appendChild(medBtnStar);\n        }\n\n        document.getElementById('contMedMan').appendChild(col0);\n\n\n        let col1 = document.createElement('div');\n        classes(col1, \"col mb-4\");\n        let btnA1 = document.createElement('a');\n        classes(btnA1, 'text-decoration-none');\n        btnA1.setAttribute('type', 'button');\n        btnA1.onclick = function () {\n            if (toAddMed == -1) return;\n            docDat.cont[toAddMed].medUrl = itm.medUrl;\n            normSave();\n        };\n        btnA1.setAttribute(\"data-dismiss\", \"modal\");\n        col1.appendChild(btnA1);\n        let card1 = document.createElement('div');\n        classes(card1, \"card text-light bg-dark\");\n        btnA1.appendChild(card1);\n        let img1 = document.createElement('img');\n        classes(img1, \"card-img\");\n        img1.src = itm.medUrl;\n        card1.appendChild(img1);\n\n        document.getElementById('contMedCho').appendChild(col1);\n    });\n}\n\nfunction render() {\n    document.getElementById('cont').innerHTML = \"\";\n    let publishDate;\n    if (docDat.beenPublic) {\n        publishDate = docDat.published;\n    } else {\n        publishDate = new firebase.firestore.Timestamp.now();\n    }\n    docDat.cont.forEach((item, idx) => {\n        let sect = document.createElement('div');\n        sect.id = 'sect' + idx;\n        let div = document.createElement('div');\n        classes(div, 'dropdown-divider mx-2')\n        if (item.type != 'head') sect.appendChild(div);\n\n        let subt = document.createElement('div');\n        subt.id = \"sect\" + idx + \"t\";\n        let subf = document.createElement('div');\n        classes(subf, \"d-none\");\n        subf.id = \"sect\" + idx + \"f\";\n\n        let act = document.createElement('div');\n        classes(act, 'row mb-2 px-2');\n        let btnDel, btnEdit, btnCheck, btnAdd;\n\n        if (item.type != 'head' && item.type != 'ref') {\n            btnDel = document.createElement('button');\n            classes(btnDel, 'btn btn-light btn-link-scckie ml-2');\n            btnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n            btnDel.onclick = function () {\n                if (toDel == idx) {\n                    toDel = -1;\n                    if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                    docDat.cont.splice(idx, 1);\n                    render();//Important\n                    normSave();\n                } else {\n                    document.getElementById(\"alrtClsSsn\").innerHTML = `<div id=\"alrtClsSsnAlrt\" class=\"alert alert-danger alert-dismissible fade show fixed-top\" role=\"alert\">\n                        <strong>¿Quieres eliminar esta sección?</strong> Presiona de nuevo el botón para confirmar.\n                        <button id=\"btnAlrtClsSsn\" type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                            <span aria-hidden=\"true\">&times;</span>\n                        </button>\n                    </div>`;\n                    toDel = idx;\n                    setTimeout(() => {\n                        toDel = -1;\n                        if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                    }, 3000);\n                }\n            }\n            act.appendChild(btnDel);\n        }\n        if (item.type != 'ref') {\n            btnEdit = document.createElement('button');\n            classes(btnEdit, 'btn btn-light btn-link-scckie ml-auto');\n            btnEdit.innerHTML = '<i class=\"fas fa-edit\"></i>';\n            btnEdit.onclick = function () {\n                toggleEl(btnEdit);\n                toggleEl(btnCheck);\n                toggleEl(subf);\n                if (document.getElementById('tagLstSave').innerText == \"Se han guardado todos los cambios\") {\n                    let minutes = Math.floor((Date.now() - lastSave) / 60000);\n                    if (minutes > 0) {\n                        if (minutes > 59) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n                        else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n                    } else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor((Date.now() - lastSave) / 1000) + \" segundos\";\n                }\n            }\n            act.appendChild(btnEdit);\n            btnCheck = document.createElement('button');\n            classes(btnCheck, 'btn btn-light btn-link-scckie ml-auto d-none');\n            btnCheck.innerHTML = '<i class=\"fas fa-check\"></i>';\n            btnCheck.onclick = function () {\n                toggleEl(btnEdit);\n                toggleEl(btnCheck);\n                toggleEl(subf);\n                normSave();\n            }\n            act.appendChild(btnCheck);\n            btnAdd = document.createElement('button');\n            classes(btnAdd, 'btn btn-light btn-link-scckie mx-2');\n            btnAdd.innerHTML = '<i class=\"fas fa-plus\"></i>';\n            btnAdd.setAttribute('data-toggle', \"modal\");\n            btnAdd.setAttribute('data-target', \"#mdlPlusSect\");\n            btnAdd.onclick = function () {\n                toAdd = idx + 1;\n            }\n            act.appendChild(btnAdd);\n        }\n        sect.appendChild(act);\n\n        if (item.type == 'head') {\n            let d = publishDate.toDate();\n            d = d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();\n            let ld = docDat.ledit.toDate();\n            ld = ld.getDate() + '/' + (ld.getMonth() + 1) + '/' + ld.getFullYear();\n\n            let h = document.createElement('h1');\n            classes(h, \"text-center\");\n            h.innerHTML = docDat.cont[0].title;\n            subt.appendChild(h);\n            let pPub = document.createElement('p');\n            pPub.innerText = \"Publicado: \" + d;\n            subt.appendChild(pPub);\n            if (docDat.dledit) {\n                let pLEdit = document.createElement('p');\n                pLEdit.innerText = \"Ultima actualización: \" + ld;\n                subt.appendChild(pLEdit);\n            }\n            let pAuth = document.createElement('p');\n            pAuth.innerText = \"Autor(es):\" + docDat.cont[0].author;\n            subt.appendChild(pAuth);\n\n            let fd0 = document.createElement('div');\n            classes(fd0, \"row justify-content-center mb-2\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col col-lg-6\");\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control form-control-lg text-center\");\n            in0.setAttribute('type', 'text');\n            in0.setAttribute('placeholder', docDat.cont[0].title);\n            in0.value = docDat.cont[0].title;\n            fc0.appendChild(in0);\n            fd0.appendChild(fc0);\n            subf.appendChild(fd0);\n            in0.oninput = function () {\n                docDat.title = docDat.cont[0].title = in0.value.trim();\n                h.innerHTML = docDat.cont[0].title;\n            };\n\n            let fd1 = document.createElement('div');\n            classes(fd1, \"row mb-2\");\n            let fl1 = document.createElement('label');\n            classes(fl1, \"col-sm-2 col-form-label\");\n            fl1.innerText = \"Publicado: \";\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col\");\n            let in1 = document.createElement('input');\n            classes(in1, \"form-control\");\n            in1.setAttribute('type', 'text');\n            in1.setAttribute('readonly', 'true');\n            in1.value = d;\n            fc1.appendChild(in1);\n            fd1.appendChild(fl1);\n            fd1.appendChild(fc1);\n            subf.appendChild(fd1);\n\n            let fd2 = document.createElement('div');\n            let fl2 = document.createElement('label');\n            let fc2 = document.createElement('div');\n            let in2 = document.createElement('input');\n            if (docDat.dledit) {\n                classes(fd2, \"row mb-2\");\n                classes(fl2, \"col-sm-2 col-form-label\");\n                fl2.innerText = \"Ultima actualización: \";\n                classes(fc2, \"col\");\n                classes(in2, \"form-control\");\n                in2.setAttribute('type', 'text');\n                in2.setAttribute('readonly', 'true');\n                in2.value = ld;\n                fc2.appendChild(in2);\n                fd2.appendChild(fl2);\n                fd2.appendChild(fc2);\n                subf.appendChild(fd2);\n            }\n\n            let fd3 = document.createElement('div');\n            classes(fd3, \"row mb-2\");\n            let fl3 = document.createElement('label');\n            classes(fl3, \"col-sm-2 col-form-label\");\n            fl3.innerText = \"Autor(es): \";\n            let fr3 = document.createElement('div');\n            classes(fr3, \"form-row justify-content-around pt-2\");\n            let f3c0 = document.createElement('div');\n            classes(f3c0, \"form-group col-auto mr-2\");\n            let f3f0 = document.createElement('div');\n            classes(f3f0, \"form-check\");\n            f3c0.appendChild(f3f0);\n            let inAu0 = document.createElement('input');\n            classes(inAu0, \"form-check-input\");\n            inAu0.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Andrea Garma')) inAu0.setAttribute('checked', 'true');\n            inAu0.value = ' Andrea Garma';\n            let inAuL0 = document.createElement('label');\n            classes(inAuL0, \"form-check-label\");\n            inAu0.setAttribute('for', 'authr0');\n            inAuL0.innerText = \"Andrea Garma\";\n            f3f0.appendChild(inAu0);\n            f3f0.appendChild(inAuL0);\n            fr3.appendChild(f3c0);\n            let f3c1 = document.createElement('div');\n            classes(f3c1, \"form-group col-auto mr-2\");\n            let f3f1 = document.createElement('div');\n            classes(f3f1, \"form-check\");\n            f3c1.appendChild(f3f1);\n            let inAu1 = document.createElement('input');\n            classes(inAu1, \"form-check-input\");\n            inAu1.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Javier Pantoja')) inAu1.setAttribute('checked', 'true');\n            inAu1.value = ' Javier Pantoja';\n            let inAuL1 = document.createElement('label');\n            classes(inAuL1, \"form-check-label\");\n            inAu1.setAttribute('for', 'authr1');\n            inAuL1.innerText = \"Javier Pantoja\";\n            f3f1.appendChild(inAu1);\n            f3f1.appendChild(inAuL1);\n            fr3.appendChild(f3c1);\n            let f3c2 = document.createElement('div');\n            classes(f3c2, \"form-group col-auto mr-2\");\n            let f3f2 = document.createElement('div');\n            classes(f3f2, \"form-check\");\n            f3c2.appendChild(f3f2);\n            let inAu2 = document.createElement('input');\n            classes(inAu2, \"form-check-input\");\n            inAu2.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Paulina Vargas')) inAu2.setAttribute('checked', 'true');\n            inAu2.value = ' Paulina Vargas';\n            let inAuL2 = document.createElement('label');\n            classes(inAuL2, \"form-check-label\");\n            inAu2.setAttribute('for', 'authr2');\n            inAuL2.innerText = \"Paulina Vargas\";\n            f3f2.appendChild(inAu2);\n            f3f2.appendChild(inAuL2);\n            fr3.appendChild(f3c2);\n            function uptAuthors(a0, a1, a2) {\n                let arr = [];\n                if (a0) arr.push(\" Andrea Garma\");\n                if (a1) arr.push(\" Javier Pantoja\");\n                if (a2) arr.push(\" Paulina Vargas\");\n                if (arr.empty) arr.push(' Anónimo');\n                docDat.cont[0].author = arr.slice();\n                docDat.authors = arr.slice();\n                pAuth.innerText = \"Autor(es):\" + docDat.cont[0].author;\n            }\n            inAu0.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n            inAu1.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n            inAu2.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n\n            fd3.appendChild(fl3);\n            fd3.appendChild(fr3);\n            subf.appendChild(fd3);\n        } else if (item.type == 'ref') {\n            let h = document.createElement('h3');\n            h.innerHTML = '<br>Referencias';\n            subt.appendChild(h);\n            item.ref.forEach((ref, refIdx) => {\n                let refR = document.createElement('div');\n                classes(refR, \"row mb-2\");\n                let cLink = document.createElement('div');\n                classes(cLink, \"col\");\n                refR.appendChild(cLink);\n                let cLinkFrm = document.createElement('div');\n                classes(cLinkFrm, \"col d-none\");\n                refR.appendChild(cLinkFrm);\n                let cBtn = document.createElement('div');\n                classes(cBtn, \"col-auto\");\n                refR.appendChild(cBtn);\n                let pRef = document.createElement('p');\n                cLink.appendChild(pRef);\n                let aRef;\n\n                function makeRefCite(text) {\n                    pRef.innerHTML = text;\n                }\n                function makeRefWeb(text) {\n                    pRef.innerHTML = \"\";\n                    aRef = document.createElement('a');\n                    classes(aRef, \"text-warning text-break\")\n                    aRef.href = text;\n                    aRef.setAttribute('target', '_blank');\n                    aRef.setAttribute('rel', 'nofollow');\n                    aRef.innerHTML = text + ' <i class=\"fas fa-external-link-alt\"></i>'\n                    pRef.appendChild(aRef);\n                }\n                if (ref.type == 'web') {\n                    makeRefWeb(ref.link);\n                } else if (ref.type == 'cite') {\n                    makeRefCite(ref.link);\n                }\n\n                function changeRef() {\n                    in1.value = in1.value.trim();\n                    docDat.cont[idx].ref[refIdx].link = in0.value;\n                    docDat.cont[idx].ref[refIdx].type = in1.value;\n                    if (ref.type == 'web') {\n                        makeRefWeb(ref.link);\n                        in0.setAttribute('placeholder', 'https://google.com');\n                    } else if (ref.type == 'cite') {\n                        makeRefCite(ref.link);\n                        in0.setAttribute('placeholder', 'Referencia');\n                    }\n                }\n                let fr0 = document.createElement('div');\n                classes(fr0, \"row\");\n                let fc0 = document.createElement('div');\n                classes(fc0, \"col\");\n                let fc1 = document.createElement('div');\n                classes(fc1, \"col-auto\");\n                let in0 = document.createElement('input');\n                let in1 = document.createElement('select');\n                classes(in0, \"form-control\");\n                in0.setAttribute('type', 'text');\n                in0.value = ref.link;\n                if (ref.type == 'web') in0.setAttribute('placeholder', 'https://google.com');\n                if (ref.type == 'cite') in0.setAttribute('placeholder', 'Referencia');\n                in0.onchange = function () { changeRef(); }\n                classes(in1, \"form-control form-control-sm\");\n                let inOpt0 = document.createElement('option');\n                inOpt0.value = \"web\";\n                if (ref.type == 'web') inOpt0.setAttribute('selected', 'true');\n                inOpt0.innerText = 'Web';\n                in1.appendChild(inOpt0);\n                let inOpt1 = document.createElement('option');\n                if (ref.type == 'cite') inOpt1.setAttribute('selected', 'true');\n                inOpt1.value = \"cite\";\n                inOpt1.innerText = 'Otro';\n                in1.appendChild(inOpt1);\n                in1.onchange = function () { changeRef(); }\n                fc0.appendChild(in0);\n                fc1.appendChild(in1);\n                fr0.appendChild(fc0);\n                fr0.appendChild(fc1);\n                cLinkFrm.appendChild(fr0);\n\n                function toggleRef() {\n                    toggleEl(cLink);\n                    toggleEl(cLinkFrm);\n                    toggleEl(rBtnEdit);\n                    toggleEl(rBtnCheck);\n                }\n                let rBtnEdit, rBtnCheck;\n                rBtnEdit = document.createElement('button');\n                classes(rBtnEdit, 'btn btn-light btn-link-scckie ml-auto');\n                rBtnEdit.innerHTML = '<i class=\"fas fa-edit\"></i>';\n                rBtnEdit.onclick = function () {\n                    toggleRef();\n                    if (document.getElementById('tagLstSave').innerText == \"Se han guardado todos los cambios\") {\n                        document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor((Date.now() - lastSave) / 60000) + \" minutos\";\n                    }\n                };\n                rBtnCheck = document.createElement('button');\n                classes(rBtnCheck, 'btn btn-light btn-link-scckie ml-auto d-none');\n                rBtnCheck.innerHTML = '<i class=\"fas fa-check\"></i>';\n                rBtnCheck.onclick = function () {\n                    toggleRef();\n                    docDat.cont[idx].ref.sort((a, b) => {\n                        let linkA = a.link.toUpperCase();\n                        let linkB = b.link.toUpperCase();\n                        if (linkA < linkB) return -1;\n                        if (linkA > linkB) return 1;\n                        return 0;\n                    });\n                    normSave();\n                };\n                cBtn.appendChild(rBtnEdit);\n                cBtn.appendChild(rBtnCheck);\n                let rBtnDel = document.createElement('button');\n                classes(rBtnDel, 'btn btn-light btn-link-scckie ml-2');\n                rBtnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n                rBtnDel.onclick = function () {\n                    docDat.cont[idx].ref.splice(refIdx, 1);\n                    normSave();\n                    render();//@#Important, why?\n                };\n                cBtn.appendChild(rBtnDel);\n\n                subt.appendChild(refR);\n\n                if (ref.link == \"\") {\n                    rBtnEdit.click();\n                }\n            });\n            let btnPlusRef0 = document.createElement('a');\n            classes(btnPlusRef0, \"btn btn-light btn-scckie\");\n            btnPlusRef0.onclick = function () { plusRef(); };\n            btnPlusRef0.innerHTML = '<i class=\"fas fa-plus\"></i>'\n            h.appendChild(btnPlusRef0);\n            let btnPlusRef1 = document.createElement('a');\n            classes(btnPlusRef1, \"btn btn-light btn-scckie btn-lg btn-block border border-light\");\n            btnPlusRef1.onclick = function () { plusRef(); };\n            btnPlusRef1.innerHTML = '<i class=\"fas fa-plus\"></i>'\n            subt.appendChild(btnPlusRef1);\n            function plusRef() {\n                docDat.cont[idx].ref.push({\n                    type: \"web\",\n                    link: \"\"\n                });\n                render();\n            }\n        } else if (item.type == 'parra') {\n            let h;\n            if (Number(item.title) > 0) {\n                if (Number(item.title) == 2) subt.innerHTML = '<br>';\n                h = document.createElement('h' + item.title)\n                h.innerHTML = item.titleTxt;\n                subt.appendChild(h);\n            }\n            let p = document.createElement('p');\n            p.innerHTML = item.text;\n            subt.appendChild(p);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0 = document.createElement('input');\n            let in1 = document.createElement('select');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            if (Number(item.title) > 0) {\n                in0.value = item.titleTxt;\n                in0.setAttribute('placeholder', 'Subtítulo');\n                in0.removeAttribute('readonly');\n            } else {\n                in0.value = \"\";\n                in0.setAttribute('placeholder', '');\n                in0.setAttribute('readonly', 'true');\n            }\n            in0.oninput = function () {\n                docDat.cont[idx].titleTxt = h.innerHTML = in0.value;\n            }\n            classes(in1, \"form-control form-control-sm\");\n            for (let i = 0; i < 7; i++) {\n                let inOpt = document.createElement('option');\n                inOpt.value = i;\n                if (item.title == i) inOpt.setAttribute('selected', 'true');\n                inOpt.innerText = i;\n                in1.appendChild(inOpt);\n            }\n            in1.oninput = function () {\n                docDat.cont[idx].title = in1.value;\n                if (Number(in1.value) > 0) {\n                    in0.setAttribute('placeholder', 'Subtítulo');\n                    in0.removeAttribute('readonly');\n                    if (Number(item.title) == 2) subt.innerHTML = '<br>';\n                    else subt.innerHTML = \"\";\n                    h = document.createElement('h' + item.title)\n                    h.innerHTML = docDat.cont[idx].titleTxt = in0.value;\n                    subt.appendChild(h);\n                    subt.appendChild(p);\n                } else {\n                    in0.value = \"\";\n                    in0.setAttribute('placeholder', '');\n                    in0.setAttribute('readonly', 'true');\n                    docDat.cont[idx].titleTxt = in0.value;\n                    subt.innerHTML = \"\";\n                    subt.appendChild(p);\n                }\n            }\n            fc0.appendChild(in0);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            let fr1 = document.createElement('div');\n            classes(fr0, \"row mb-2\");\n            let f1c0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let in2 = document.createElement('textarea');\n            classes(in2, \"form-control\");\n            in2.setAttribute('rows', '8');\n            in2.value = item.text;\n            in2.oninput = function () {\n                docDat.cont[idx].text = p.innerHTML = in2.value.trim();\n            };\n            f1c0.appendChild(in2);\n            fr1.appendChild(f1c0);\n            subf.appendChild(fr1);\n\n            if (Number(item.title) > 0 && item.titleTxt == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'html') {\n            let html = document.createElement('div');\n            html.innerHTML = item.html;\n            subt.appendChild(html);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row mb-2\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let in0 = document.createElement('textarea');\n            classes(in0, \"form-control\");\n            in0.setAttribute('rows', '8');\n            in0.value = item.html;\n            in0.onchange = function () {\n                docDat.cont[idx].html = html.innerHTML = in0.value.trim();\n            };\n            fc0.appendChild(in0);\n            fr0.appendChild(fc0);\n            subf.appendChild(fr0);\n\n            if (item.html == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'youtube') {\n            let yt = document.createElement('div');\n            classes(yt, \"embed-responsive embed-responsive-\" + item.ratio);\n            let iframe = document.createElement('iframe');\n            iframe.src = item.vidUrl;\n            iframe.setAttribute('frameborder', \"0\");\n            iframe.setAttribute('allow', \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\");\n            iframe.setAttribute('allowfullscreen', \"true\");\n            yt.appendChild(iframe);\n            subt.appendChild(yt);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0L = document.createElement('label');\n            in0L.innerText = \"URL\";\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            in0.value = item.vidUrl;\n            in0.onchange = function () {\n                let convUrl = in0.value.trim();\n                if (convUrl.length == 11) convUrl = \"https://www.youtube.com/embed/\" + convUrl;\n                else {\n                    let part, i = 1;\n                    do {\n                        part = convUrl[i - 1] + convUrl[i];\n                        i++;\n                    } while (part != \"e/\" && part != \"v=\");\n                    convUrl = \"https://www.youtube.com/embed/\" + convUrl.substr(i, 11);\n                }\n                docDat.cont[idx].vidUrl = iframe.src = convUrl;\n            }\n            let help0 = document.createElement('small');\n            classes(help0, \"text-muted\");\n            help0.innerText = \"aaaaaaaaaaa o https://youtu.be/aaaaaaaaaaa o https://www.youtube.com/watch?v=aaaaaaaaaaa\";\n            let in1L = document.createElement('label');\n            in1L.innerText = \"Ratio\";\n            let in1 = document.createElement('select');\n            classes(in1, \"form-control form-control-sm\");\n            let ratios = ['21by9', '16by9', '4by3', '1by1'];\n            for (let i = 0; i < 4; i++) {\n                let inOpt = document.createElement('option');\n                inOpt.value = ratios[i];\n                if (item.ratio == ratios[i]) inOpt.setAttribute('selected', 'true');\n                inOpt.innerText = ratios[i].replaceAll('by', ':');\n                in1.appendChild(inOpt);\n            }\n            in1.oninput = function () {\n                docDat.cont[idx].ratio = in1.value;\n                ratios.forEach(rat => {\n                    yt.classList.remove('embed-responsive-' + rat);\n                })\n                classes(yt, \"embed-responsive-\" + item.ratio);\n            }\n            fc0.appendChild(in0L);\n            fc0.appendChild(in0);\n            fc0.appendChild(help0);\n            fc1.appendChild(in1L);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            if (item.vidUrl == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'medSimple') {\n            let fig = document.createElement('figure');\n            classes(fig, \"mx-auto\");\n            fig.style.width = item.width;\n            fig.style.position = \"relative\";\n            fig.style.borderRadius = \".25rem\";\n            let img0 = document.createElement('img');\n            img0.setAttribute('alt', item.alt);\n            img0.src = item.medUrl;\n            classes(img0, \"w-100\");\n            fig.appendChild(img0);\n            let over0 = document.createElement('div');\n            classes(over0, \"card-img-overlay pt-0\");\n            over0.style.paddingLeft = \".9rem\";\n            over0.style.paddingRight = \".9rem\";\n            let btns0 = document.createElement('div');\n            classes(btns0, \"row mb-2 p-0\");\n            over0.appendChild(btns0);\n            let btnChange = document.createElement('button');\n            classes(btnChange, \"btn btn-light btn-scckie btn-sm ml-auto\");\n            btnChange.innerHTML = '<i class=\"fas fa-exchange-alt\"></i>';\n            btnChange.setAttribute('data-toggle', \"modal\")\n            btnChange.setAttribute('data-target', \"#mdlMedCho\")\n            btnChange.onclick = function () {\n                toAddMed = idx;\n            };\n            btns0.appendChild(btnChange);\n            fig.appendChild(over0);\n            let capt = document.createElement('figcaption');\n            capt.style.fontSize = \"70%\";\n            capt.style.fontWeight = \"lighter\";\n            capt.innerHTML = item.caption;\n            if (item.hasCapt) {\n                fig.appendChild(capt);\n            }\n            subt.appendChild(fig);\n\n            let rcont = document.createElement('div');\n            classes(rcont, \"form-group mb-2\");\n            let rnL = document.createElement('label');\n            rnL.innerText = \"Tamaño\";\n            let ranR = document.createElement('div');\n            classes(ranR, \"row\");\n            let ranRC0 = document.createElement('div');\n            classes(ranRC0, \"col align-center d-flex pr-0\");\n            let in3 = document.createElement('input');\n            in3.setAttribute('type', 'range');\n            in3.setAttribute('max', '100');\n            in3.setAttribute('min', '0');\n            in3.setAttribute('step', '1');\n            in3.value = '75';\n            classes(in3, \"form-control-range\");\n            in3.oninput = function () {\n                valL.innerHTML = in3.value + '%';\n                fig.style.width = docDat.cont[idx].width = in3.value + '%';\n            }\n            ranRC0.appendChild(in3);\n            let valL = document.createElement('span');\n            classes(valL, \"badge badge-primary range-value-L\");\n            valL.innerText = '75%';\n            let ranRC1 = document.createElement('div');\n            classes(ranRC1, \"col-auto\");\n            ranRC1.appendChild(valL);\n            ranR.appendChild(ranRC0);\n            ranR.appendChild(ranRC1);\n            rcont.appendChild(rnL);\n            rcont.appendChild(ranR);\n            subf.appendChild(rcont);\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0L = document.createElement('label');\n            in0L.innerText = \"Pie de foto\";\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            in0.value = item.caption;\n            in0.oninput = function () {\n                capt.innerHTML = docDat.cont[idx].caption = in0.value.trim();\n            }\n            let in1 = document.createElement('select');\n            classes(in1, \"form-control form-control-sm\");\n            let inOpt0 = document.createElement('option');\n            inOpt0.value = \"true\";\n            if (item.hasCapt == \"true\") inOpt0.setAttribute('selected', 'true');\n            inOpt0.innerText = \"Sí\";\n            in1.appendChild(inOpt0);\n            let inOpt1 = document.createElement('option');\n            inOpt1.value = \"false\";\n            if (item.hasCapt == \"false\") inOpt1.setAttribute('selected', 'true');\n            inOpt1.innerText = \"No\";\n            in1.appendChild(inOpt1);\n            in1.oninput = function () {\n                docDat.cont[idx].hasCapt = in1.value;\n                if (in1.value == \"true\") {\n                    capt.innerHTML = in0.value = docDat.cont[idx].caption;\n                    in0.removeAttribute('readonly');\n                    fig.appendChild(capt);\n                } else {\n                    in0.value = docDat.cont[idx].caption = \"\";\n                    in0.setAttribute('readonly', 'true');\n                    capt.innerHTML = \"\";\n                    fig.innerHTML = \"\";\n                    fig.appendChild(img0);\n                    fig.appendChild(over0);\n                }\n            }\n            fc0.appendChild(in0L);\n            fc0.appendChild(in0);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            let fr1 = document.createElement('div');\n            classes(fr1, \"row\");\n            let f1c0 = document.createElement('div');\n            classes(f1c0, \"col\");\n            let in2L = document.createElement('label');\n            in2L.innerText = \"Alt\";\n            let in2 = document.createElement('input');\n            classes(in2, \"form-control\");\n            in2.setAttribute('type', 'text');\n            in2.value = item.alt;\n            in2.oninput = function () {\n                docDat.cont[idx].alt = in2.value.trim();\n                img0.setAttribute('alt', in2.value.trim());\n            }\n            f1c0.appendChild(in2L);\n            f1c0.appendChild(in2);\n            fr1.appendChild(f1c0);\n            subf.appendChild(fr1);\n\n            if (item.hasCapt == \"true\" && item.caption == \"\") {\n                btnEdit.click();\n            }\n        }//Add more@#*/\n        sect.appendChild(subt);\n        sect.appendChild(subf);\n        document.getElementById('cont').appendChild(sect);\n    });\n    document.getElementById('inJava').innerText = docDat.java;\n    document.getElementById('javaIns').innerHTML = docDat.java;\n}\n\ndocument.getElementById('inFile').oninput = function () {\n    document.getElementById('inFile').value = ultraClean(document.getElementById('inFile').value, '-');\n}\n\ndocument.getElementById('inJava').onchange = function () {\n    docDat.java = document.getElementById('javaIns').innerHTML = document.getElementById('inJava').value;\n}\ndocument.getElementById('btnEditJs').onclick = function () {\n    toggleEl(document.getElementById('btnEditJs'));\n    toggleEl(document.getElementById('btnCheckJs'));\n    document.getElementById('inJava').removeAttribute('readonly');\n};\ndocument.getElementById('btnCheckJs').onclick = function () {\n    toggleEl(document.getElementById('btnEditJs'));\n    toggleEl(document.getElementById('btnCheckJs'));\n    document.getElementById('inJava').setAttribute('readonly', 'true');\n    normSave();\n};\n\n$('#mdlAddMed').on('hidden.bs.modal', e => {\n    document.getElementById(\"prevNewMed\").src = '';\n    document.getElementById('inNewMedL').innerHTML = 'Elige una imagen';\n    document.getElementById('inNewMedUrl').value = \"\";\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"barNewMedCont\"));\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n    showEl(document.getElementById(\"frmAddMed\"));\n    document.getElementById(\"btnCnfNewMed\").removeAttribute('disabled');\n    document.getElementById(\"btnCanNewMed0\").removeAttribute('disabled');\n    document.getElementById(\"btnCanNewMed1\").removeAttribute('disabled');\n})\ndocument.getElementById('inNewMed').addEventListener('change', e => {\n    newMedia = e.target.files[0];\n    function prevMed() {\n        var read = new FileReader();\n        read.readAsDataURL(newMedia);\n        read.onload = function (e2) {\n            document.getElementById(\"prevNewMed\").src = e2.target.result;\n        };\n    };\n    newMedia.name = ultraClean(newMedia.name, '');\n    document.getElementById('inNewMedL').innerHTML = newMedia.name;\n    prevMed(newMedia);\n});\ndocument.getElementById('inNewMedUrl').onchange = function () {\n    document.getElementById(\"prevNewMed\").src = document.getElementById('inNewMedUrl').value;\n};\ndocument.getElementById('inMedSrc0').onclick = function () {\n    newMedSrc = \"home\";\n    document.getElementById('inNewMed').setAttribute('required', 'true');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    showEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n}\ndocument.getElementById('inMedSrc1').onclick = function () {\n    newMedSrc = \"out\";\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').setAttribute('required', 'true');\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    showEl(document.getElementById(\"inNewMedUrlCont\"));\n}\n\ndocument.getElementById('inSendUpt').onclick = function () {\n    if (document.getElementById('inSendUpt').checked) {\n        showEl(document.getElementById('uptDescCont'));\n        document.getElementById('inUptDesc').setAttribute('required', 'true');\n    } else {\n        hideEl(document.getElementById('uptDescCont'));\n        document.getElementById('inUptDesc').removeAttribute('required');\n    }\n}\n\ndocument.getElementById('btnPrevCook').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\ndocument.getElementById('btnPrevMail').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\n\ndocument.getElementById('btnPrivate').onclick = function () {\n    db.collection('galletasCont').doc(docId).update({\n        public: false\n    });\n};\n\ndocument.getElementById('btnAprove').onclick = function () {\n    if (docDat.revised.includes(uid)) {\n        docDat.revised.splice(docDat.revised.indexOf(uid), 1);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n    } else {\n        docDat.revised.push(uid);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n    }\n    normSave();\n};\n\n$('#mdlAddMed').on('hiden.bs.modal', e => {\n    document.getElementById('inMedSrc0').setAttribute('checked', 'false');\n    document.getElementById('inMedSrc1').setAttribute('checked', 'false');\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n});\n\n$('#mdlPublish').on('show.bs.modal', e => {\n    let rev = docDat.revised.length;\n    if (!docDat.revised.includes(uid)) rev++;\n    if (rev < 2) {\n        classes(document.getElementById('btnCnfPublish'), \"d-none\");\n        document.getElementById('mdlPublishTxt').innerText = \"Para publicar es necesario que lo hayan aprovado al menos dos personas.\";\n        document.getElementById('frmPublish').classList.add('d-none');\n    } else {\n        document.getElementById('btnCnfPublish').classList.remove(\"d-none\");\n        document.getElementById('mdlPublishTxt').innerText = \"La galleta está lista para publicar\";\n        document.getElementById('frmPublish').classList.remove('d-none');\n        if (docDat.beenPublic) document.getElementById('sendUptCont').classList.remove('d-none');\n    }\n});\n\nfunction finishPub() {\n    setprog(document.getElementById('barPublish'), '100');\n    classes(document.getElementById('barPublish'), 'bg-success');\n    document.getElementById(\"alrtClsSsn\").innerHTML = '<div id=\"alrtClsSsnAlrt\" class=\"alert alert-success alert-dismissible fade show fixed-bottom\" role=\"alert\">Publicado correctamente<strong></strong>                                                                           <button id=\"btnAlrtClsSsn\" type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>';\n    let d = docDat.published.toDate();\n    let month = d.getFullYear().toString();\n    if (d.getMonth() < 9) {\n        month += '0';\n    }\n    month += (d.getMonth() + 1);\n    setTimeout(function () {\n        window.open('../galletas/' + month + '/' + docDat.file, '_blank').focus();\n    }, 2500);\n    console.log(\"Data saved successfully.\");\n    setTimeout(function () {\n        document.getElementById(\"btnAlrtClsSsn\").click();\n    }, 3000);\n    $('#alrtClsSsnAlrt').on('closed.bs.alert', function () {\n        document.getElementById(\"alrtClsSsn\").innerHTML = '';\n    });\n    $('#mdlPublish').modal('hide');\n}\nfunction fillKW() {\n    let n = 0\n    function prog() {\n        setprog(document.getElementById('barPublish'), Math.floor(n).toString());\n    }\n    keywords = [];\n    keywords.push(docDat.published.toDate().getFullYear().toString());\n    keywords.push(docDat.ledit.toDate().getFullYear().toString());\n    n++;\n    prog();\n    //Categorías@#\n    if (document.getElementById('cat0').checked) keywords.push('astronomia');\n    if (document.getElementById('cat1').checked) keywords.push('biologia');\n    if (document.getElementById('cat2').checked) keywords.push('curiosidades');\n    if (document.getElementById('cat3').checked) keywords.push('fisica');\n    if (document.getElementById('cat4').checked) keywords.push('tecnologia');\n    n++;\n    prog();\n    docDat.authors.forEach(itm => {\n        itm.substring(1).split(' ').forEach(c => {\n            keywords.push(ultraClean(c, ''));\n        });\n        n += (3 / docDat.authors.length);\n        prog();\n    });\n\n    let toKW = [];\n\n    docDat.title.split(' ').forEach(itm => {\n        toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n    });\n    n++;\n    prog();\n\n    docDat.description.split(' ').forEach(itm => {\n        toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n        n += (3 / docDat.description.split(' ').length);\n        prog();\n    });\n\n    docDat.cont.forEach(sect => {\n        if (sect.type == 'parra') {\n            if (Number(sect.title) > 0) {\n                sect.titleTxt.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            sect.text.split(' ').forEach(itm => {\n                toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                n += (14 / docDat.cont.length / sect.text.split(' ').length);\n                prog();\n            });\n        } else if (sect.type == 'medSimple') {\n            if (sect.alt != \"\") {\n                sect.alt.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            if (sect.caption != \"\") {\n                sect.caption.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            n += (14 / docDat.cont.length);\n            prog();\n        }\n        //@#\n    });\n\n    let rToKW = [];\n    let l = toKW.length;\n    for (let i = 0; i < l; i++) {\n        let wrd = toKW[i];\n        let r = wrd.indexOf(' ');\n        if (r != -1) {\n            wrd.split(' ').forEach(itm => {\n                rToKW.push(itm);\n            });\n            toKW.splice(i, 1);\n            i--;\n            l--;\n        }\n    };\n\n    rToKW.forEach(itm => {\n        toKW.push(itm);\n    });\n    n++\n    prog();\n\n    l = toKW.length;\n    for (let i = 0; i < l; i++) {\n        toKW.splice(i, 1, ultraClean(toKW[i], ''));\n        n += (3 / toKW.length);\n        prog();\n    };\n\n    let kWObj = {}, sum = 0, wCount = 0;\n    let banWrds = [\"1\", \"2\", \"3\", \"4\", \"6\", \"7\", \"8\", \"9\", \"0\", \"tan\", \"ser\", \"los\", \"serian\", \"pero\", \"podemos\", \"su\", \"o\", \"y\", \"e\", \"la\", \"del\", \"es\", \"si\", \"en\", \"otro\", \"de\", \"tendrian\", \"no\", \"se\", \"una\", \"mas\", \"el\", \"a\", \"embargo\", \"las\", \"sin\", \"con\", \"un\", \"para\", \"por\", \"les\", \"\", \"vez\", \"gran\", \"este\", \"esta\", \"estos\", \"estas\", \"nos\", \"al\", \"dio\", \"has\", \"preguntado\", \"el\", \"lo\", \"tu\", \"tus\", \"hacen\", \"otros\", \"para\", \"ellos\", \"ellas\", \"ese\", \"esa\", \"esos\", \"esas\", \"detras\", \"delante\", \"nos\", \"le\", \"muy\", \"casi\", \"son\", \"pues\", \"a\", \"ha\", \"han\", \"fue\"];//@#\n    toKW.forEach(itm => {\n        if (!banWrds.includes(itm)) {\n            let num = kWObj[itm];\n            if (!num) {\n                kWObj[itm] = 1;\n                wCount++;\n            }\n            else kWObj[itm]++;\n            sum++;\n        }\n        n += (3 / toKW.length);\n        prog();\n    });\n\n    for (const [key, value] of Object.entries(kWObj)) {\n        if (value > sum / wCount) {\n            keywords.push(key);\n        }\n        n += (3 / Object.entries(kWObj).length);\n        prog();\n    }\n\n    console.log(keywords);\n}\ndocument.getElementById('btnCnfPublish').onclick = function () {\n    if (docDat.public) return;\n    setprog(document.getElementById('barPublish'), '0');\n    document.getElementById('barPublishCont').classList.remove('d-none');\n    fillKW();\n    if (!docDat.beenPublic) {\n        setprog(document.getElementById('barPublish'), '30');\n        db.collection('galletasCont').doc(docId).update({\n            beenPublic: true,\n            public: true,\n            ledit: new firebase.firestore.Timestamp.now(),\n            published: new firebase.firestore.Timestamp.now(),\n            revised: []\n        }).then(() => {\n            setprog(document.getElementById('barPublish'), '49');\n            let d = docDat.published.toDate();\n            let month = d.getFullYear().toString();\n            if (d.getMonth() < 9) {\n                month += '0';\n            }\n            month += (d.getMonth() + 1);\n            return db.collection('galletas').doc(docId).set({\n                likes: 0,\n                favs: 0,\n                pop: 0,\n                ledit: new firebase.firestore.Timestamp.now(),\n                date: new firebase.firestore.Timestamp.now(),\n                dledit: false,\n                notify: false,\n                public: true,\n                title: docDat.title,\n                descrip: docDat.description,\n                url: 'https://sciencecookies.net/galletas/' + month + '/' + docDat.file,\n                picUrl: docDat.picUrl,\n                authrs: docDat.authors,\n                cats: keywords\n            })\n        }).then(() => {\n            setprog(document.getElementById('barPublish'), '78');\n            rtDb.ref('galletas/' + docId).set({\n                pop: 0,\n                likes: 0,\n                favs: 0\n            }, err => {\n                if (err) {\n                    console.log(\"Data could not be saved.\" + err);\n                } else {\n                    setprog(document.getElementById('barPublish'), '84');\n                    finishPub();\n                }\n            });\n        }).catch(error => {\n            document.getElementById(\"alrtClsSsn\").innerHTML = '<div id=\"alrtClsSsnAlrt\" class=\"alert alert-danger alert-dismissible fade show fixed-bottom\" role=\"alert\"><strong>!Ha ocurrido un error! </strong>' + error + '<button id=\"btnAlrtClsSsn\" type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>';\n            console.log(error);\n            setTimeout(function () {\n                document.getElementById(\"btnAlrtClsSsn\").click();\n            }, 3000);\n            $('#alrtClsSsnAlrt').on('closed.bs.alert', function () {\n                document.getElementById(\"alrtClsSsn\").innerHTML = '';\n            });\n        });\n    } else {\n        setprog(document.getElementById('barPublish'), '30');\n        db.collection('galletasCont').doc(docId).update({\n            public: true,\n            ledit: new firebase.firestore.Timestamp.now(),\n            revised: []\n        }).then(() => {\n            setprog(document.getElementById('barPublish'), '42');\n            let d = docDat.published.toDate();\n            let month = d.getFullYear().toString();\n            if (d.getMonth() < 9) {\n                month += '0';\n            }\n            month += (d.getMonth() + 1);\n            let cook = {\n                title: docDat.title,\n                descrip: docDat.description,\n                url: 'https://sciencecookies.net/galletas/' + month + '/' + docDat.file,\n                picUrl: docDat.picUrl,\n                authrs: docDat.authors,\n                cats: keywords,\n                public: true,\n            };\n            setprog(document.getElementById('barPublish'), '57');\n            if (document.getElementById('inSendUpt').checked) {\n                cook.ledit = new firebase.firestore.Timestamp.now();\n                cook.dledit = true;\n                cook.notify = true;\n            } else {\n                cook.dledit = false;\n                cook.notify = false;\n            }\n            setprog(document.getElementById('barPublish'), '61');\n            if (document.getElementById('inSendUpt').checked) {\n                cook.uptMsg = true;\n                cook.uptDescrip = document.getElementById('inUptDesc').value.trim();\n            } else {\n                cook.uptMsg = false;\n                cook.uptDescrip = '';\n            }\n            setprog(document.getElementById('barPublish'), '66');\n            return db.collection('galletas').doc(docId).update(cook);\n        }).then(() => {\n            setprog(document.getElementById('barPublish'), '78');\n            finishPub();\n        }).catch(error => {\n            document.getElementById(\"alrtClsSsn\").innerHTML = '<div id=\"alrtClsSsnAlrt\" class=\"alert alert-danger alert-dismissible fade show fixed-bottom\" role=\"alert\"><strong>!Ha ocurrido un error! </strong>' + error + '<button id=\"btnAlrtClsSsn\" type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></div>';\n            console.log(error);\n            setTimeout(function () {\n                document.getElementById(\"btnAlrtClsSsn\").click();\n            }, 3000);\n            $('#alrtClsSsnAlrt').on('closed.bs.alert', function () {\n                document.getElementById(\"alrtClsSsn\").innerHTML = '';\n            });\n        });\n    }\n};"]}