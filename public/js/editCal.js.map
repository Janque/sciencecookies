{"mappings":"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","sources":["src/js/editCal.js"],"sourcesContent":["var store = firebase.storage();\nvar rtDb = firebase.database();\n\nlet docDat, docId, docRef, calConfig;\nlet lastSave = Date.now(), saved = false;\n\nlet newMedia = null;\nlet newMedSrc = null;\n\nlet eventToShow = null;\n\nasync function translateSimple(text, from, target) {\n    let translate = firebase.app().functions('us-east1').httpsCallable('translations-translateSimple');\n    let res = await translate({\n        text: text,\n        from: from,\n        target: target\n    });\n    return res.data;\n}\n\nconst daysOfWeek = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat']\nconst longDay = {\n    es: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sabado'],\n    en: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n}\nfunction fullMonth(n, l) {\n    if (l == \"es\") {\n        switch (n) {\n            case 1:\n                return \"Enero\";\n            case 2:\n                return \"Febrero\";\n            case 3:\n                return \"Marzo\";\n            case 4:\n                return \"Abril\";\n            case 5:\n                return \"Mayo\";\n            case 6:\n                return \"Junio\";\n            case 7:\n                return \"Julio\";\n            case 8:\n                return \"Agosto\";\n            case 9:\n                return \"Septiembre\";\n            case 10:\n                return \"Octubre\";\n            case 11:\n                return \"Noviembre\";\n            case 12:\n                return \"Diciembre\";\n            case 0:\n                return \"Diciembre\";\n            case 13:\n                return \"Enero\";\n        }\n    } else if (l == \"en\") {\n        switch (n) {\n            case 1:\n                return \"January\";\n            case 2:\n                return \"February\";\n            case 3:\n                return \"March\";\n            case 4:\n                return \"April\";\n            case 5:\n                return \"May\";\n            case 6:\n                return \"June\";\n            case 7:\n                return \"July\";\n            case 8:\n                return \"August\";\n            case 9:\n                return \"September\";\n            case 10:\n                return \"October\";\n            case 11:\n                return \"November\";\n            case 12:\n                return \"December\";\n            case 0:\n                return \"December\";\n            case 13:\n                return \"January\";\n        }\n    }\n}\n\nwindow.loaded = function loaded() {\n    db.collection('config').doc('calTypes').get().then(doc => {\n        calConfig = doc.data();\n        docRef = calendarsFSRef.doc(urlSrch.get('id'));\n        calendarsFSRef.doc(urlSrch.get('id')).onSnapshot(doc => {\n            if (!doc.exists) {\n                window.location.href = '../404';\n                return;\n            }\n            docDat = doc.data();\n            docId = doc.id;\n            document.getElementById('title').innerHTML = docDat.title;\n            document.getElementById('prevMed').src = docDat.picUrl;\n            document.getElementById('inPicCapt').value = docDat.picCapt;\n            document.getElementById('inPicAlt').value = docDat.picAlt;\n            document.getElementById('inDesc').value = docDat.description;\n            document.getElementById('inDescShort').value = docDat.descriptionShort;\n            render();\n            if (docDat.public) {\n                hideEl(document.getElementById('btnAprove'));\n                hideEl(document.getElementById('btnPub'));\n            } else {\n                showEl(document.getElementById('btnAprove'));\n                if (docDat.pastDue) showEl(document.getElementById('btnPub'));\n            }\n            if (docDat.revised.includes(uid)) {\n                document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n            } else {\n                document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n            }\n            document.getElementById('btnPrevCal').href = docDat.url;\n            document.getElementById('btnPrevMail').href = '/vista-email-calendario/' + docId;\n            document.getElementById('btnSrcCal').href = `https://in-the-sky.org/newscal.php?month=${urlSrch.get('id').substr(5, 6)}&year=${urlSrch.get('id').substr(0, 4)}&maxdiff=7&country=1484&reg1=3527646&reg2=8379372&town=3530597`;\n            document.getElementById('btnSrcCal2').href = `https://in-the-sky.org/newscal.php?month=${urlSrch.get('id').substr(5, 6)}&year=${urlSrch.get('id').substr(0, 4)}&maxdiff=7&country=1170&reg1=3688685&reg2=9609540&town=3688689`;\n            document.getElementById('btnSrcCal3').href = `https://in-the-sky.org/newscal.php?month=${urlSrch.get('id').substr(5, 6)}&year=${urlSrch.get('id').substr(0, 4)}&maxdiff=7&country=1724&reg1=3117732&reg2=6355233&town=3117735`;\n        }, err => console.log(err))\n    }).catch(err => console.log(err));\n\n    function descFrm() {\n        docDat.description = document.getElementById('inDesc').value.trim();\n        docDat.descriptionShort = document.getElementById('inDescShort').value.trim();\n        normSave();\n    }\n    document.getElementById(\"frmText\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        descFrm();\n    });\n    document.getElementById('btnFileTrans').onclick = function () {\n        let ori = document.getElementById('selFileTrans').value\n        db.collection('calendars/langs/' + ori).doc(docId).get().then(async function (doc) {\n            docDat.picCapt = document.getElementById('inPicCapt').value = await translateSimple(doc.data().picCapt, ori, lang);\n            docDat.picAlt = document.getElementById('inPicAlt').value = await translateSimple(doc.data().picAlt, ori, lang);\n            docDat.description = document.getElementById('inDesc').value = await translateSimple(doc.data().description, ori, lang);\n            docDat.descriptionShort = document.getElementById('inDescShort').value = await translateSimple(doc.data().descriptionShort, ori, lang);\n            descFrm();\n        }).catch(err => console.log(err));\n    }\n\n    function translateFrm() {\n        let translate = firebase.app().functions('us-east1').httpsCallable('translations-translateFullCalendar');\n        return translate({\n            docId: docId,\n            from: document.getElementById('inTransFrom').value,\n            target: lang\n        });\n    }\n    document.getElementById(\"frmTranslate\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        classes(document.getElementById('btnCnfTranslate'), \"disabled\")\n        classes(document.getElementById('btnCanTranslate0'), \"disabled\")\n        classes(document.getElementById('btnCanTranslate1'), \"disabled\")\n        setprog('barTranslate', 0);\n        showEl(document.getElementById('barTranslateCont'));\n        runprog('barTranslate', 0, 73);\n        translateFrm().then(res => {\n            runprog('barTranslate', 73, 90);\n            if (res) {\n                setprog('barTranslate', 100);\n                $('#mdlTranslate').modal('hide');\n                document.getElementById('btnCnfTranslate').classList.remove(\"disabled\");\n                document.getElementById('btnCanTranslate0').classList.remove(\"disabled\");\n                document.getElementById('btnCanTranslate1').classList.remove(\"disabled\");\n                hideEl(document.getElementById('barTranslateCont'))\n            } else {\n                if (lang == \"es\") {\n                    alertTop(\"<strong>¡Ha ocurrido un error!</strong>\", 0);\n                } else if (lang == \"en\") {\n                    alertTop(\"<strong>¡There has been an error!</strong>\", 0);\n                }\n                console.log('err');\n            }\n        });\n    });\n\n    function addMed() {\n        let ref = store.ref('calendarMedia/' + docId + '/pic');\n        ref.put(newMedia).on('state_changed',\n            function progress(snap) {\n                setprog('barChgImg', (snap.bytesTransferred / snap.totalBytes) * 100);\n            },\n            function error(err) {\n                if (lang == \"es\") {\n                    alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n                } else if (lang == \"en\") {\n                    alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n                }\n                console.log(err);\n                $('#mdlAddMed').modal('hide');\n            },\n            function complete() {\n                ref.getDownloadURL().then(medUrl => {\n                    docDat.picUrl = medUrl;\n                    normSave();\n                    resetChgImg(true);\n                    hideEl(document.getElementById(\"frmChgImg\"));\n                }).catch(err => { console.log(err) });\n            }\n        );\n    }\n    function addExtMed() {\n        docDat.picUrl = document.getElementById('inChgImgUrl').value;\n        normSave();\n        resetChgImg(true);\n        hideEl(document.getElementById(\"frmChgImg\"));\n    }\n    document.getElementById(\"frmChgImg\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        setprog('barChgImg', 0);\n        showEl(document.getElementById(\"barChgImgCont\"));\n        hideEl(document.getElementById(\"frmChgImg\"));\n        document.getElementById(\"btnCnfChgImg\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanChgImg\").setAttribute('disabled', 'true');\n        if (newMedSrc == \"home\") addMed();\n        else addExtMed();\n    });\n}\n\ndocument.getElementById('inPicCapt').oninput = () => {\n    docDat.picCapt = document.getElementById('inPicCapt').value.trim();\n}\ndocument.getElementById('inPicAlt').oninput = () => {\n    docDat.picAlt = document.getElementById('inPicAlt').value.trim();\n}\ndocument.getElementById('inDesc').oninput = () => {\n    docDat.picDesc = document.getElementById('inDesc').value.trim();\n}\ndocument.getElementById('inDescShort').oninput = () => {\n    docDat.picDescShort = document.getElementById('inDescShort').value.trim();\n}\n\nlet savedInterval;\nfunction saveDoc() {\n    console.log('Saving...');\n\n    const promises = [];\n    langs.forEach(l => {\n        if (l != lang) {\n            let syncUpt = {\n                published: docDat.published,\n                finished: docDat.finished,\n                pastDue: docDat.pastDue,\n                public: docDat.public,\n                sentMail: docDat.sentMail,\n                revised: docDat.revised,\n                translations: docDat.translations,\n            }\n            syncUpt.translations[lang] = docDat.url;\n            promises.push(db.collection('calendars/langs/' + l).doc(docId).update(syncUpt));\n        }\n    })\n    return Promise.all(promises).then(() => {\n        return docRef.update(docDat);\n    });\n}\nfunction normSave() {\n    saveDoc().then(() => {\n        if (eventToShow) showEvent();//IMPORTANT\n        if (saved) clearInterval(savedInterval);\n        saved = true;\n        savedInterval = setInterval(() => {\n            let minutes = Math.floor((Date.now() - lastSave) / 60000);\n            if (minutes < 60) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n            else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n        }, 300010);\n        document.getElementById('tagLstSave').innerText = \"Se han guardado los cambios\";\n        lastSave = Date.now();\n        console.log('Saved!');\n    }).catch(err => {\n        document.getElementById('tagLstSave').innerText = \"Error, no se han guardado todos los cambios: \" + err.code;\n        console.log(err);\n    });\n}\n\nfunction setprog(bar, n) {\n    bar = document.getElementById(bar);\n    n = Math.floor(n);\n    bar.setAttribute('aria-valuenow', n);\n    bar.style.width = n + '%';\n    bar.innerText = n + '%';\n}\nfunction runprog(bar, b, e) {\n    b = Math.floor(b);\n    e = Math.floor(e);\n    for (let i = b; i <= e; i++) {\n        setTimeout(() => {\n            setprog(bar, i);\n        }, 5);\n    }\n}\n\nfunction showEvent() {\n    Object.keys(docDat.events).forEach(key => {\n        hideEl(document.getElementById(key));\n    });\n    document.getElementById('mdlEventInfoL').innerHTML = docDat.events[eventToShow].date[lang];\n    showEl(document.getElementById(eventToShow));\n    enable(document.getElementById('btnPriorEve'));\n    enable(document.getElementById('btnNextEve'));\n}\ndocument.getElementById('btnPriorEve').onclick = () => {\n    let orderedKeys = Object.keys(docDat.events).slice().sort((a, b) => {\n        if (Number(a[0]) == Number(b[0])) {\n            if (a.substring(1, 4) == b.substring(1, 4)) {\n                return Number(a[4]) - Number(b[4]);\n            }\n            switch (a.substring(1, 4)) {\n                case \"sun\":\n                    return -1;\n                case \"mon\":\n                    if (b.substring(1, 4) == \"sun\") return 1;\n                    return -1;\n                case \"tue\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\") return 1\n                    return -1;\n                case \"wed\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\") return 1\n                    return -1;\n                case \"thu\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\" || b.substring(1, 4) == \"wed\") return 1\n                    return -1;\n                case \"fri\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\" || b.substring(1, 4) == \"wed\" || b.substring(1, 4) == \"thu\") return 1\n                    return -1;\n                case \"sat\":\n                    return 1;\n            }\n        }\n        return Number(a[0]) - Number(b[0]);\n    });\n    let n = orderedKeys.indexOf(eventToShow) - 1;\n    if (n >= 0) {\n        eventToShow = orderedKeys[n];\n        showEvent();\n    } else {\n        disable(document.getElementById('btnPriorEve'));\n    }\n};\ndocument.getElementById('btnNextEve').onclick = () => {\n    let orderedKeys = Object.keys(docDat.events).slice().sort((a, b) => {\n        if (Number(a[0]) == Number(b[0])) {\n            if (a.substring(1, 4) == b.substring(1, 4)) {\n                return Number(a[4]) - Number(b[4]);\n            }\n            switch (a.substring(1, 4)) {\n                case \"sun\":\n                    return -1;\n                case \"mon\":\n                    if (b.substring(1, 4) == \"sun\") return 1;\n                    return -1;\n                case \"tue\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\") return 1\n                    return -1;\n                case \"wed\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\") return 1\n                    return -1;\n                case \"thu\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\" || b.substring(1, 4) == \"wed\") return 1\n                    return -1;\n                case \"fri\":\n                    if (b.substring(1, 4) == \"sun\" || b.substring(1, 4) == \"mon\" || b.substring(1, 4) == \"tue\" || b.substring(1, 4) == \"wed\" || b.substring(1, 4) == \"thu\") return 1\n                    return -1;\n                case \"sat\":\n                    return 1;\n            }\n        }\n        return Number(a[0]) - Number(b[0]);\n    });\n    let n = orderedKeys.indexOf(eventToShow) + 1;\n    if (n < orderedKeys.length) {\n        eventToShow = orderedKeys[n];\n        showEvent();\n    } else {\n        disable(document.getElementById('btnNextEve'));\n    }\n};\n\nfunction render() {\n    document.getElementById('weeksCont').innerHTML = \"\";\n    docDat.weeks.forEach((week, wIdx) => {\n        let weekRow = document.createElement('tr');\n        weekRow.style.height = '10rem';\n        document.getElementById('weeksCont').appendChild(weekRow);\n        for (let i = 0; i < 7; i++) {\n            let day = week[daysOfWeek[i]]\n            let dayCell = document.createElement('td');\n            classes(dayCell, \"p-0\");\n            weekRow.appendChild(dayCell);\n            if (day) {\n                let num = document.createElement('p');\n                classes(num, \"m-0 p-1\");\n                num.style.fontSize = 'x-large';\n                num.innerHTML = '<b>' + day.date + '</b>';\n                dayCell.appendChild(num);\n\n                let events = document.createElement('div');\n                classes(events, \"autoOverflow\");\n                events.style.maxHeight = '7rem';\n                day.events.forEach((event, idx) => {\n                    let btnEvent = document.createElement('button');\n                    btnEvent.setAttribute(\"data-toggle\", \"modal\");\n                    btnEvent.setAttribute(\"data-target\", \"#mdlEventInfo\");\n                    classes(btnEvent, \"btn text-left p-1 mb-1 w-100\");\n                    btnEvent.style.backgroundColor = \"#c3e6cb\";\n                    btnEvent.style.borderColor = \"#8fd19e\";\n                    btnEvent.innerHTML = '<small>' + event.name + '</small>';\n                    btnEvent.onclick = () => {\n                        eventToShow = wIdx + daysOfWeek[i] + idx;\n                        showEvent();\n                    }\n                    events.appendChild(btnEvent);\n                });\n                let btnPlusEvent = document.createElement('button');\n                classes(btnPlusEvent, \"btn btn-scckie btn-block btn-sm\");\n                btnPlusEvent.innerHTML = '<i class=\"fas fa-plus\"></i>';\n                btnPlusEvent.onclick = () => {\n                    docDat.events[wIdx + daysOfWeek[i] + day.events.length] = {\n                        date: {\n                            es: longDay[\"es\"][i] + \" \" + day.date + \" de \" + fullMonth(docId % 100, lang),\n                            en: longDay[\"en\"][i] + \", \" + fullMonth(docId % 100, \"en\") + \" \" + day.date\n                        },\n                        typeIdx: 0,\n                        vals: {\n                            0: { label: \"Título\", val: \"Evento sin nombre\" },\n                            1: { label: \"Description\", val: \"Sin descripción\" },\n                        },\n                        name: \"Evento sin nombre\",\n                        description: \"Sin descripción\",\n                        visibilidad: calConfig.visOpts[lang][0],\n                        horario: [\"Ciudad de México:\", \"Bogotá:\", \"Madrid:\"]\n                    };\n                    day.events.push({\n                        name: \"Evento sin nombre\"\n                    });\n                    normSave();\n                }\n                events.appendChild(btnPlusEvent);\n                dayCell.appendChild(events);\n            }\n        }\n    });\n    document.getElementById('eventInfoCont').innerHTML = \"\";\n    for (const [key, event] of Object.entries(docDat.events)) {\n        let changed = false;\n\n        //@#Migration\n        if (event.typeIdx == undefined) {\n            event.typeIdx = 0;\n            event.vals = {\n                0: { label: \"Título\", val: event.name },\n                1: { label: \"Description\", val: event.description },\n            }\n            regenTxt();\n            changed = true;\n        }\n        if (typeof event.date != \"object\") {\n            event.date = {\n                es: longDay[\"es\"][daysOfWeek.indexOf(key.substring(1, 4))] + \" \" + docDat.weeks[parseInt(key.charAt(0))][key.substring(1, 4)].date + \" de \" + fullMonth(docId % 100, lang),\n                en: longDay[\"en\"][daysOfWeek.indexOf(key.substring(1, 4))] + \", \" + fullMonth(docId % 100, \"en\") + \" \" + docDat.weeks[parseInt(key.charAt(0))][key.substring(1, 4)].date\n            }\n            changed = true;\n        }\n        //End migration\n\n        let form = document.createElement('div');\n        form.id = key;\n        classes(form, \"d-none overflow-auto\");\n        let bod = document.createElement('div');\n        classes(bod, \"modal-body\");\n        form.appendChild(bod);\n\n        let fsec = document.createElement('div');\n        classes(fsec, \"d-none\");\n        bod.appendChild(fsec);\n        let fgType = document.createElement('div');\n        classes(fgType, \"form-group\");\n        fsec.appendChild(fgType);\n\n        let selTypeMainL = document.createElement('label');\n        if (lang == \"es\") {\n            selTypeMainL.innerText = \"Tipo de evento\";\n        } else if (lang == \"en\") {\n            selTypeMainL.innerText = \"Event type\";\n        }\n        fgType.appendChild(selTypeMainL);\n        let selTypeMain = document.createElement('select');\n        classes(selTypeMain, \"form-control\");\n        selTypeMain.setAttribute('multiple', 'true');\n        calConfig[lang].forEach((itm, idx) => {\n            let opt = document.createElement('option');\n            opt.value = idx;\n            opt.innerText = itm.label;\n            if ((!event.typeIdx && idx == 0) || idx == event.typeIdx) opt.setAttribute('selected', 'true');\n            selTypeMain.appendChild(opt);\n        });\n        selTypeMain.oninput = () => {\n            changed = true;\n            event.typeIdx = parseInt(selTypeMain.value);\n            if (!event.typeIdx) event.typeIdx = 0;\n            event.vals = {};\n            reloadForm();\n        }\n        fgType.appendChild(selTypeMain);\n\n        let inTitleHid = document.createElement('input');\n        inTitleHid.setAttribute(\"type\", \"text\");\n        inTitleHid.id = \"inEveTitle\" + key;\n        let inDescHid = document.createElement('textarea');\n        inDescHid.id = \"inEveDesc\" + key;\n\n        let fRow = document.createElement('div');\n        classes(fRow, \"form-row\");\n        fsec.insertBefore(fRow, fgType.nextSibling);\n\n        //Must be declared here\n        let sfRow = document.createElement('div');\n        classes(sfRow, \"form-row d-none\");\n        fsec.insertBefore(sfRow, fRow.nextSibling);\n\n        function reloadForm() {\n            fRow.innerHTML = \"\";\n            calConfig[lang][event.typeIdx].options.forEach((option, idx) => {\n                let fCol = document.createElement('div');\n                classes(fCol, \"col-auto form-group\");\n                let label = document.createElement('label');\n                label.innerText = option.label;\n                fCol.appendChild(label);\n                let inp;\n                switch (option.type) {\n                    case \"select\":\n                        inp = document.createElement('select');\n                        option.options.forEach((itm, i) => {\n                            let opt = document.createElement('option');\n                            opt.value = itm.val;\n                            opt.innerHTML = itm.label;\n                            if ((i == 0 && (!event.vals || !event.vals[idx])) || (event.vals && event.vals[idx] && event.vals[idx].val == itm.val)) {\n                                opt.selected = true;\n                                event.vals[idx] = {\n                                    label: itm.label,\n                                    val: itm.val,\n                                }\n                                if (option.valForSub == itm.val) showEl(sfRow);\n                                else hideEl(sfRow);\n                            }\n                            inp.appendChild(opt);\n                        });\n                        break;\n                    case \"textarea\":\n                        inp = document.createElement('textarea');\n                        inp.setAttribute(\"rows\", \"3\");\n                        if (event.vals[idx] && event.vals[idx].val) inp.value = event.vals[idx].val;\n                        break;\n                    default:\n                        inp = document.createElement('input');\n                        inp.setAttribute(\"type\", option.type);\n                        if (event.vals[idx] && event.vals[idx].val) inp.value = event.vals[idx].val;\n                }\n                if (option.placeholder) inp.placeholder = option.placeholder;\n                classes(inp, \"form-control form-control-sm\");\n                fCol.appendChild(inp);\n                fRow.appendChild(fCol);\n\n                //sfRow declared before\n                if (option.valForSub) {\n                    option.sub.forEach((soption, sidx) => {\n                        let sfCol = document.createElement('div');\n                        classes(sfCol, \"col-auto form-group\");\n                        let slabel = document.createElement('label');\n                        slabel.innerText = soption.label;\n                        sfCol.appendChild(slabel);\n                        let sinp;\n                        switch (soption.type) {\n                            case \"select\":\n                                sinp = document.createElement('select');\n                                soption.options.forEach((itm, i) => {\n                                    let opt = document.createElement('option');\n                                    opt.value = itm.val;\n                                    opt.innerHTML = itm.label;\n                                    if ((i == 0 && (!event.vals || !event.vals[idx + '-' + sidx])) || (event.vals && event.vals[idx + '-' + sidx] && event.vals[idx + '-' + sidx].val == itm.val)) {\n                                        opt.selected = true;\n                                        event.vals[idx + '-' + sidx] = {\n                                            label: itm.label,\n                                            val: itm.val,\n                                        }\n                                    }\n                                    sinp.appendChild(opt);\n                                });\n                                break;\n                            case \"textarea\":\n                                sinp = document.createElement('textarea');\n                                sinp.setAttribute(\"rows\", \"3\");\n                                if (event.vals[idx + '-' + sidx] && event.vals[idx + '-' + sidx].val) sinp.value = event.vals[idx + '-' + sidx].val;\n                                break;\n                            default:\n                                sinp = document.createElement('input');\n                                sinp.setAttribute(\"type\", soption.type);\n                                if (event.vals[idx + '-' + sidx] && event.vals[idx + '-' + sidx].val) sinp.value = event.vals[idx + '-' + sidx].val;\n                        }\n                        if (soption.placeholder) sinp.placeholder = soption.placeholder;\n                        classes(sinp, \"form-control form-control-sm\");\n                        sfCol.appendChild(sinp);\n                        sfRow.appendChild(sfCol);\n\n                        sinp.oninput = function () {\n                            changed = true;\n                            event.vals[idx + '-' + sidx] = {};\n                            event.vals[idx + '-' + sidx].val = sinp.value;\n                            if (option.type == \"select\") event.vals[idx + '-' + sidx].label = sinp.innerText;\n                            else event.vals[idx + '-' + sidx].label = soption.label;\n                            regenTxt();\n                        }\n                    });\n                }\n\n                inp.oninput = function () {\n                    changed = true;\n                    event.vals[idx] = {};\n                    event.vals[idx].val = inp.value;\n                    if (option.type == \"select\") event.vals[idx].label = inp.innerText;\n                    else event.vals[idx].label = option.label;\n                    if (option.valForSub) {\n                        if (option.valForSub == inp.value) showEl(sfRow);\n                        else hideEl(sfRow);\n                    }\n                    regenTxt();\n                }\n            });\n        }\n        reloadForm();\n\n        function regenTxt() {\n            if (calConfig[lang][event.typeIdx].multipleTxt) {\n                event.description = parseInt(event.vals[\"0\"].val.charAt(0));\n                event.name = parseInt(event.vals[\"0\"].val.charAt(1));\n            } else {\n                event.description = event.name = 0;\n            }\n            event.description = calConfig[lang][event.typeIdx].text[event.description];\n            event.name = calConfig[lang][event.typeIdx].titleTxt[event.name];\n            for (const [vKey, vVal] of Object.entries(event.vals)) {\n                event.description = event.description.replaceAll(\"$\" + vKey + \"L$\", vVal.label);\n                event.description = event.description.replaceAll(\"$\" + vKey + \"$\", vVal.val);\n                event.description = event.description.replaceAll(\"$g-year$\", Math.floor(docId / 100));\n                event.name = event.name.replaceAll(\"$\" + vKey + \"L$\", vVal.label);\n                event.name = event.name.replaceAll(\"$\" + vKey + \"$\", vVal.val);\n                event.name = event.name.replaceAll(\"$g-year$\", Math.floor(docId / 100));\n            }\n        }\n        regenTxt();\n\n        let fgVis = document.createElement('div');\n        classes(fgVis, \"form-group\");\n        fsec.appendChild(fgVis);\n        fgVis.innerHTML = '<label>Visiblidad</label>';\n        let inVis = document.createElement('select');\n        inVis.id = \"inVis\" + key;\n        classes(inVis, \"form-control\");\n        calConfig.visOpts[lang].forEach((itm, idx) => {\n            let opt = document.createElement('option');\n            opt.value = idx;\n            opt.innerHTML = itm;\n            if (itm == event.visibilidad) opt.setAttribute('selected', \"true\");\n            inVis.appendChild(opt);\n        });\n        fgVis.appendChild(inVis);\n\n        let fgTime = document.createElement('div');\n        classes(fgTime, \"form-group\");\n        fsec.appendChild(fgTime);\n        fgTime.innerHTML = '<label>Horario</label>';\n        let inTime = document.createElement('textarea');\n        classes(inTime, \"form-control\");\n        inTime.id = \"inTime\" + key;\n        inTime.setAttribute(\"rows\", \"4\");\n        fgTime.appendChild(inTime);\n        if (inVis.value == 5) hideEl(fgTime);\n        else showEl(fgTime);\n\n        inVis.oninput = () => {\n            changed = true;\n            if (inVis.value == 5) hideEl(fgTime);\n            else showEl(fgTime);\n        };\n        inTime.oninput = () => {\n            changed = true;\n        };\n\n        //Must be declared here\n        let saveBtn = document.createElement('button');\n\n        let selLangCC = document.createElement('div');\n        classes(selLangCC, \"row\");\n        let selLangC = document.createElement('div');\n        classes(selLangC, \"col-auto\");\n        selLangCC.appendChild(selLangC);\n        let selLang = document.createElement('select');\n        classes(selLang, \"form-control ml-auto h-100\");\n        selLang.setAttribute(\"name\", \"selTransLang\");\n        selLangC.appendChild(selLang);\n        let btnTrans = document.createElement('button');\n        classes(btnTrans, 'btn btn-scckie mx-2');\n        btnTrans.innerHTML = '<i class=\"fas fa-language\"></i>';\n        btnTrans.onclick = function () {\n            db.collection('calendars/langs/' + selLang.value).doc(docId).get().then(async function (doc) {\n                let newEve = doc.data().events[key];\n                if (!newEve) return;\n                event.typeIdx = newEve.typeIdx;\n                event.vals = newEve.vals;\n                for (let i = 0; i < calConfig[lang][event.typeIdx].options.length; i++) {\n                    const option = calConfig[lang][event.typeIdx].options[i];\n                    if (option.type == \"select\") {\n                        event.vals[i] = option.options[\n                            calConfig[selLang.value][event.typeIdx].options[i].options\n                                .map(function (e) {\n                                    return e.val;\n                                })\n                                .indexOf(event.vals[i].val)\n                        ];\n                    } else {\n                        if (option.translatable) {\n                            event.vals[i].val = await translateSimple(event.vals[i].val, selLang.value, lang)\n                        }\n                        event.vals[i].label = option.label;\n                    }\n                    if (event.vals[\"0\"].val == event.valForSub) {\n                        for (let j = 0; j < calConfig[lang][event.typeIdx].options[i].sub.length; j++) {\n                            const opt = calConfig[lang][event.typeIdx].options[i].sub[j];\n                            if (opt.type == \"select\") {\n                                event.vals[i + \"-\" + j] = option.options[\n                                    calConfig[selLang.value][event.typeIdx].options[i].options\n                                        .map(function (e) {\n                                            return e.val;\n                                        })\n                                        .indexOf(event.vals[i + \"-\" + j].val)\n                                ];\n                            } else {\n                                if (opt.translatable) {\n                                    event.vals[i + \"-\" + j].val = await translateSimple(event.vals[i + \"-\" + j].val, selLang.value, lang)\n                                }\n                                event.vals[i + \"-\" + j].label = opt.label;\n                            }\n                        }\n                    }\n                }\n                event.visibilidad = calConfig.visOpts[lang][calConfig.visOpts[selLang.value].indexOf(newEve.visibilidad)];\n                event.horario = [];\n                for (let i = 0; i < newEve.horario.length; i++) {\n                    event.horario.push(await translateSimple(newEve.horario[i], selLang.value, lang));\n                }\n                inTime.innerHTML = \"\";\n                event.horario.forEach(time => {\n                    inTime.innerHTML += time + \"\\n\";\n                });\n                changed = true;\n                saveBtn.click();\n            }).catch(err => console.log(err));\n        }\n        selLangCC.appendChild(btnTrans);\n        fsec.appendChild(selLangCC);\n\n        let tsec = document.createElement('div');\n        bod.appendChild(tsec);\n        let eveTit = document.createElement('h3');\n        eveTit.innerHTML = event.name;\n        tsec.appendChild(eveTit);\n        let eveDesc = document.createElement('p');\n        eveDesc.innerHTML = event.description;\n        tsec.appendChild(eveDesc);\n        let eveVis = document.createElement('p');\n        eveVis.innerHTML = \"Visibilidad: \" + event.visibilidad;\n        tsec.appendChild(eveVis);\n        let eveTime = document.createElement('p');\n        classes(eveTime, \"mb-0\");\n        eveTime.innerHTML = \"Horario: \";\n        tsec.appendChild(eveTime);\n        let eveTimeLst = document.createElement('ul');\n        tsec.appendChild(eveTimeLst);\n        event.horario.forEach(time => {\n            let li = document.createElement('li');\n            li.innerHTML = time;\n            eveTimeLst.appendChild(li);\n        });\n        if (event.visibilidad == calConfig.visOpts[lang][5]) {\n            hideEl(eveTime);\n            hideEl(eveTimeLst);\n        }\n        else {\n            showEl(eveTime);\n            showEl(eveTimeLst);\n        }\n\n\n        let foot = document.createElement('div');\n        classes(foot, \"modal-footer\");\n        form.appendChild(foot);\n\n        let delBtn = document.createElement('button');\n        classes(delBtn, \"btn btn-danger mr-auto\")\n        delBtn.setAttribute(\"type\", \"button\");\n        delBtn.innerText = \"Borrar\";\n        delBtn.onclick = () => {\n            for (let i = Number(key.substr(4)) + 1; i < docDat.weeks[Number(key[0])][key.substr(1, 3)].events.length; i++) {\n                docDat.events[key.substr(0, 4) + (i - 1)] = docDat.events[key.substr(0, 4) + i]\n            }\n            delete docDat.events[key.substr(0, 4) + (docDat.weeks[Number(key[0])][key.substr(1, 3)].events.length - 1)];\n            docDat.weeks[Number(key[0])][key.substr(1, 3)].events.splice(Number(key.substr(4)), 1);\n            $('#mdlEventInfo').modal('hide');\n            eventToShow = null;\n            normSave();\n        };\n        foot.appendChild(delBtn);\n        let editBtn = document.createElement('button');\n        classes(editBtn, \"btn btn-info\");\n        editBtn.setAttribute(\"type\", \"button\");\n        editBtn.innerText = \"Editar\";\n        editBtn.onclick = () => {\n            inVis.value = calConfig.visOpts[lang].indexOf(event.visibilidad);\n            if (inVis.value == 5) hideEl(fgTime);\n            else showEl(fgTime);\n            inTime.innerHTML = \"\";\n            event.horario.forEach(time => {\n                inTime.innerHTML += time + \"\\n\";\n            });\n            hideEl(tsec);\n            showEl(fsec);\n            showEl(saveBtn);\n            enable(saveBtn);\n            hideEl(editBtn);\n        };\n        foot.appendChild(editBtn);\n        //Declared before\n        classes(saveBtn, \"btn btn-scckie d-none\");\n        saveBtn.setAttribute(\"type\", \"button\");\n        disable(saveBtn);\n        saveBtn.innerText = \"Guardar\";\n        saveBtn.onclick = () => {\n            disable(saveBtn);\n            if (changed) {\n                regenTxt();\n                docDat.weeks[Number(key[0])][key.substr(1, 3)].events[key[4]].name = event.name;\n                event.visibilidad = calConfig.visOpts[lang][inVis.value];\n                event.horario = [];\n                inTime.value.trim().split('\\n').forEach(time => {\n                    if (time != \"\" && time != \" \") event.horario.push(time);\n                });\n                normSave();\n            }\n            hideEl(fsec);\n            showEl(tsec);\n            hideEl(saveBtn);\n            showEl(editBtn);\n        };\n        foot.appendChild(saveBtn);\n\n        document.getElementById('eventInfoCont').appendChild(form);\n    }\n\n    document.getElementsByName('selTransLang').forEach(itm => {\n        itm.innerHTML = '';\n    });\n    langs.forEach((l, i) => {\n        if (l != lang) {\n            let opt = document.createElement('option');\n            if (i == 0) {\n                opt.setAttribute('selected', 'true');\n            }\n            opt.value = opt.innerText = l;\n            document.getElementsByName('selTransLang').forEach(itm => {\n                itm.appendChild(opt.cloneNode(true));\n            });\n        }\n    });\n}\n\n\nfunction resetChgImg(uncheck) {\n    document.getElementById('prevMed').src = docDat.picUrl;\n    if (uncheck) {\n        document.getElementById('inMedSrc0').checked = false;\n        document.getElementById('inMedSrc1').checked = false;\n    }\n    document.getElementById('inChgImg').value = \"\";\n    document.getElementById('inChgImgUrl').value = \"\";\n    document.getElementById('inChgImg').removeAttribute('required');\n    document.getElementById('inChgImgUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"barChgImgCont\"));\n    hideEl(document.getElementById(\"inChgImgFileCont\"));\n    hideEl(document.getElementById(\"inChgImgUrlCont\"));\n    document.getElementById(\"btnCnfChgImg\").removeAttribute('disabled');\n    document.getElementById(\"btnCanChgImg\").removeAttribute('disabled');\n}\ndocument.getElementById('btnChgImg').onclick = () => {\n    resetChgImg(true);\n    toggleEl(document.getElementById(\"frmChgImg\"));\n};\ndocument.getElementById('inChgImg').addEventListener('change', e => {\n    newMedia = e.target.files[0];\n    function prevMed() {\n        var read = new FileReader();\n        read.readAsDataURL(newMedia);\n        read.onload = function (e2) {\n            document.getElementById(\"prevMed\").src = e2.target.result;\n        };\n    };\n    newMedia.name = ultraClean(newMedia.name, '');\n    document.getElementById('inChgImgL').innerHTML = newMedia.name;\n    prevMed(newMedia);\n});\ndocument.getElementById('inChgImgUrl').onchange = function () {\n    document.getElementById(\"prevMed\").src = document.getElementById('inChgImgUrl').value;\n};\ndocument.getElementById('inMedSrc0').onclick = function () {\n    newMedSrc = \"home\";\n    resetChgImg(false);\n    document.getElementById('inChgImg').setAttribute('required', 'true');\n    showEl(document.getElementById(\"inChgImgFileCont\"));\n}\ndocument.getElementById('inMedSrc1').onclick = function () {\n    newMedSrc = \"out\";\n    resetChgImg(false);\n    document.getElementById('inChgImgUrl').setAttribute('required', 'true');\n    showEl(document.getElementById(\"inChgImgUrlCont\"));\n}\n\ndocument.getElementById('btnPrevCal').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\ndocument.getElementById('btnPrevMail').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\n\nfunction validateRevision() {\n    let revLangs = 0;\n    langs.forEach(l => {\n        let rev = docDat.revised[l] ? docDat.revised[l].length : 0;\n        if (docDat.revised[l] && !docDat.revised[l].includes(uid)) rev++;\n        if (rev >= 2) revLangs++;\n    });\n    return revLangs == langs.length;\n}\n\ndocument.getElementById('btnAprove').onclick = function () {\n    if (docDat.revised[lang] && docDat.revised[lang].includes(uid)) {\n        docDat.revised[lang].splice(docDat.revised[lang].indexOf(uid), 1);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n    } else {\n        if (!docDat.revised[lang]) docDat.revised[lang] = [];\n        docDat.revised[lang].push(uid);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n    }\n    if (validateRevision()) {\n        docDat.finished = true;\n        newCal();\n    } else {\n        docDat.finished = false;\n    }\n    normSave();\n};\n\nfunction newCal() {\n    let nextCalID;\n    rtDb.ref('nextCal').transaction(nCal => {\n        if (nCal) {\n            nextCalID = nCal;\n            nCal++;\n            if (nCal % 100 == 13) {\n                nCal -= 12;\n                nCal += 100;\n            }\n        }\n        return nCal;\n    }, (error) => {\n        if (error) {\n            console.log(error);\n        } else {\n            let date = new Date((nextCalID - nextCalID % 100) / 100 + ' ' + nextCalID % 100 + ' ' + '00:00');\n            let weeks = [];\n            let days;\n            if (date.getMonth() == 1) {\n                if (date.getFullYear() % 4 == 0) {\n                    days = 29;\n                } else {\n                    days = 28;\n                }\n            } else if (date.getMonth() % 2 == 0) {\n                if (date.getMonth() <= 6) days = 31;\n                else days = 30;\n            } else {\n                if (date.getMonth() <= 6) days = 30;\n                else days = 31;\n            }\n            let bDay = date.getDay();\n            for (let i = 1; i <= days; i = i) {\n                let week = {};\n                for (let j = bDay; j < daysOfWeek.length; j++) {\n                    if (i > days) break;\n                    week[daysOfWeek[j]] = {\n                        date: i,\n                        events: []\n                    }\n                    i++;\n                }\n                weeks.push(week);\n                bDay = 0;\n            }\n            const promises = [];\n            langs.forEach(l => {\n                let newC = {\n                    events: {},\n                    published: firebase.firestore.Timestamp.fromDate(date),\n                    description: \"\",\n                    descriptionShort: \"\",\n                    finished: false,\n                    pastDue: false,\n                    picUrl: \"\",\n                    picAlt: \"\",\n                    picCapt: \"\",\n                    public: false,\n                    sentMail: false,\n                    revised: {},\n                    title: \"\",\n                    url: \"\",\n                    nextCal: \"\",\n                    priorCal: \"\",\n                    weeks: weeks,\n                    translations: {}\n                }\n\n                let intId = parseInt(nextCalID);\n                let year = (intId - intId % 100) / 100;\n                let nYear = (intId - intId % 100) / 100;\n                let pYear = (intId - intId % 100) / 100;\n                if (intId % 100 == 12) nYear++;\n                if (intId % 100 == 1) pYear--;\n                let month = fullMonth(intId % 100, l);\n                let nMonth = fullMonth(intId % 100 + 1, l).toLowerCase();\n                let pMonth = fullMonth(intId % 100 - 1, l).toLowerCase();\n                let calsText = \"\";\n                switch (l) {\n                    case \"es\":\n                        calsText = \"calendario-astronomico\";\n                        newC.title = \"Calendario Astronómico de \" + month + \" \" + year;\n                        break;\n                    case \"en\":\n                        calsText = \"astronomic-calendar\";\n                        newC.title = \"Astronomic Calendar of \" + month + \" \" + year;\n                        break;\n                }\n                newC.url = \"https://sciencecookies.net/\" + calsText + \"/\" + year + \"/\" + month.toLowerCase() + \"/\";\n                newC.nextCal = \"https://sciencecookies.net/\" + calsText + \"/\" + nYear + \"/\" + nMonth + \"/\";\n                newC.priorCal = \"https://sciencecookies.net/\" + calsText + \"/\" + pYear + \"/\" + pMonth + \"/\";\n\n                promises.push(db.collection('calendars/langs/' + l).doc(Math.abs(nextCalID).toString()).set(newC));\n\n            })\n            return Promise.all(promises).then(() => {\n                console.log('exito');\n            }).catch(err => console.log(err));\n        }\n    });\n}\n\n$('#mdlPublish').on('show.bs.modal', e => {\n    if (validateRevision()) {\n        showEl(document.getElementById('btnCnfPublish'));\n        document.getElementById('mdlPublishTxt').innerText = \"El calendario está listo para publicar\";\n    } else {\n        hideEl(document.getElementById('btnCnfPublish'));\n        document.getElementById('mdlPublishTxt').innerText = \"Para publicar es necesario que lo hayan aprovado al menos dos personas.\";\n    }\n});\n\ndocument.getElementById('btnCnfPublish').onclick = function () {\n    if (docDat.public) return;\n    setprog('barPublish', 0);\n    showEl(document.getElementById('barPublishCont'));\n\n    docDat.public = true;\n    setprog('barPublish', 25);\n\n    saveDoc().then(() => {\n        setprog('barPublish', 58);\n        admin.database().ref('calendarios/' + docId).set({\n            pop: 0\n        }, err => {\n            if (err) {\n                if (lang == \"es\") {\n                    alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n                } else if (lang == \"en\") {\n                    alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n                }\n                console.log(err);\n            } else {\n                setprog('barPublish', 100);\n                classes(document.getElementById('barPublish'), 'bg-success');\n                if (lang == \"es\") {\n                    alertTop(\"Publicado correctamente\", 1);\n                } else if (lang == \"en\") {\n                    alertTop(\"Published successfully\", 1);\n                }\n                setTimeout(function () {\n                    window.open(docDat.url, '_blank').focus();\n                }, 2500);\n                $('#mdlPublish').modal('hide');\n                console.log('Published ' + docId + ' calendar');\n                return null;\n            }\n        });\n    }).catch(err => {\n        if (lang == \"es\") {\n            alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n        } else if (lang == \"en\") {\n            alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n        }\n        console.log(err);\n    });\n};"],"names":["$a15b832e2152a95d3323ba3c2a34be40$var$store","firebase","storage","$a15b832e2152a95d3323ba3c2a34be40$var$rtDb","database","$a15b832e2152a95d3323ba3c2a34be40$var$docDat","$a15b832e2152a95d3323ba3c2a34be40$var$docId","$a15b832e2152a95d3323ba3c2a34be40$var$docRef","$a15b832e2152a95d3323ba3c2a34be40$var$calConfig","$a15b832e2152a95d3323ba3c2a34be40$var$lastSave","Date","now","$a15b832e2152a95d3323ba3c2a34be40$var$saved","$a15b832e2152a95d3323ba3c2a34be40$var$newMedia","$a15b832e2152a95d3323ba3c2a34be40$var$newMedSrc","$a15b832e2152a95d3323ba3c2a34be40$var$eventToShow","$a15b832e2152a95d3323ba3c2a34be40$var$translateSimple","text","from","target","translate","app","functions","httpsCallable","data","$a15b832e2152a95d3323ba3c2a34be40$var$daysOfWeek","$a15b832e2152a95d3323ba3c2a34be40$var$longDay","$a15b832e2152a95d3323ba3c2a34be40$var$fullMonth","n","l","$a15b832e2152a95d3323ba3c2a34be40$var$savedInterval","$a15b832e2152a95d3323ba3c2a34be40$var$saveDoc","console","log","promises","langs","forEach","lang","syncUpt","published","finished","pastDue","public","sentMail","revised","translations","url","push","db","collection","doc","update","Promise","all","then","$a15b832e2152a95d3323ba3c2a34be40$var$normSave","$a15b832e2152a95d3323ba3c2a34be40$var$showEvent","clearInterval","setInterval","minutes","Math","floor","document","getElementById","innerText","catch","err","code","$a15b832e2152a95d3323ba3c2a34be40$var$setprog","bar","setAttribute","style","width","$a15b832e2152a95d3323ba3c2a34be40$var$runprog","b","e","i","setTimeout","Object","keys","events","key","hideEl","innerHTML","date","showEl","enable","$a15b832e2152a95d3323ba3c2a34be40$var$resetChgImg","uncheck","src","picUrl","checked","value","removeAttribute","$a15b832e2152a95d3323ba3c2a34be40$var$validateRevision","revLangs","rev","length","includes","uid","window","loaded","descFrm","description","trim","descriptionShort","get","calendarsFSRef","urlSrch","onSnapshot","doc1","exists","id","title","picCapt","picAlt","weeks","week","wIdx","weekRow","createElement","height","appendChild","day","dayCell","classes","num","fontSize","maxHeight","event","idx","btnEvent","backgroundColor","borderColor","name","onclick","btnPlusEvent","es","en","typeIdx","vals","0","label","val","1","visibilidad","visOpts","horario","entries","changed","undefined","regenTxt","indexOf","substring","parseInt","charAt","form","bod","fsec","fgType","selTypeMainL","selTypeMain","itm","opt","oninput","reloadForm","inTitleHid","fRow","insertBefore","nextSibling","sfRow","options","option","fCol","inp","type","selected","valForSub","placeholder","sub","soption","sidx","sfCol","sinp","slabel","multipleTxt","titleTxt","vKey","vVal","replaceAll","fgVis","inVis","fgTime","inTime","saveBtn","selLangCC","selLangC","selLang","btnTrans","async","newEve","map","translatable","j","i1","time","click","tsec","eveTit","eveDesc","eveVis","eveTime","eveTimeLst","li","foot","delBtn","Number","substr","splice","$","modal","editBtn","disable","split","getElementsByName","cloneNode","$a15b832e2152a95d3323ba3c2a34be40$var$render","href","location","addEventListener","preventDefault","ori","docId","res","classList","remove","alertTop","ref","put","on","snap","bytesTransferred","totalBytes","getDownloadURL","medUrl","addMed","picDesc","picDescShort","orderedKeys","slice","sort","a","toggleEl","read","files","ultraClean","FileReader","readAsDataURL","onload","e2","result","onchange","timePrev","firestore","Timestamp","fromMillis","getTime","nextCalID","transaction","nCal","error","days","getMonth","getFullYear","bDay","getDay","newC","fromDate","nextCal","priorCal","intId","year","nYear","pYear","month","nMonth","toLowerCase","pMonth","calsText","abs","toString","set","$a15b832e2152a95d3323ba3c2a34be40$var$newCal","admin","pop","open","focus"],"version":3,"file":"editCal.js.map"}