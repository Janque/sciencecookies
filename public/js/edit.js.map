{"mappings":"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","sources":["src/js/edit.js"],"sourcesContent":["var store = firebase.storage();\nvar rtDb = firebase.database();\n\nlet docDat, docId, docRef;\nlet toDel = -1, toAdd = -1;\nlet lastSave = Date.now(), saved = false;\n\nlet addFrom = -1;\nlet toDelMed = -1, toAddMed = -1;\nlet newMedia = null;\nlet newMedSrc = null;\n\nlet keywords = [];\n\nasync function translateSimple(text, from, target) {\n    let translate = firebase.app().functions('us-east1').httpsCallable('translations-translateSimple');\n    let res = await translate({\n        text: text,\n        from: from,\n        target: target\n    });\n    return res.data;\n}\n\nwindow.loaded = function loaded() {\n    allCats.forEach((cat, i) => {\n        let fat = document.createElement('div');\n        classes(fat, \"form-group col-auto\");\n        let div = document.createElement('div');\n        classes(div, \"form-check\");\n        let inp = document.createElement('input');\n        inp.id = \"cat\" + i;\n        classes(inp, \"form-check-input\");\n        inp.value = cat;\n        inp.setAttribute('type', 'checkbox');\n        inp.onclick = function () {\n            if (inp.checked == true) {\n                docDat.fixedCats.push(this.value);\n            } else {\n                docDat.fixedCats.splice(docDat.fixedCats.indexOf(this.value), 1);\n            }\n        }\n        div.appendChild(inp);\n        let lab = document.createElement('label');\n        lab.setAttribute('for', 'cat' + i);\n        classes(lab, \"form-check-label\")\n        lab.innerText = textCats[i];\n        div.appendChild(lab);\n        fat.appendChild(div);\n        document.getElementById('catFrmCont').appendChild(fat);\n    });\n\n    docRef = cookiesFSRef.doc(urlSrch.get('id'));\n    docRef.onSnapshot(doc => {\n        docDat = doc.data();\n        docId = doc.id;\n        document.getElementById('inFile').value = docDat.file;\n        document.getElementById('inDesc').value = docDat.description;\n        allCats.forEach((cat, i) => {\n            document.getElementById('cat' + i).checked = docDat.fixedCats.includes(document.getElementById('cat' + i).value);\n        });\n        render();\n        fillMed();\n        if (docDat.public) {\n            document.getElementById('btnPrivate').classList.remove('d-none');\n            document.getElementById('btnAprove').classList.add('d-none');\n            document.getElementById('btnPub').classList.add('d-none');\n        } else {\n            document.getElementById('btnPrivate').classList.add('d-none');\n            document.getElementById('btnAprove').classList.remove('d-none');\n            document.getElementById('btnPub').classList.remove('d-none');\n        }\n        if (docDat.revised[lang] && docDat.revised[lang].includes(uid)) {\n            document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n        } else {\n            document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n        }\n        document.getElementById('btnPrevCook').href = docDat.url;\n        document.getElementById('btnPrevMail').href = '../vista-email/' + docDat.file;\n    }, err => { console.log(err) });\n\n    fillTrans();\n    function translateFrm() {\n        let translate = firebase.app().functions('us-east1').httpsCallable('translations-translateFullCookie');\n        return translate({\n            docId: docId,\n            from: document.getElementById('inTransFrom').value,\n            target: lang\n        });\n    }\n    document.getElementById(\"frmTranslate\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        classes(document.getElementById('btnCnfTranslate'), \"disabled\")\n        classes(document.getElementById('btnCanTranslate0'), \"disabled\")\n        classes(document.getElementById('btnCanTranslate1'), \"disabled\")\n        setprog('barTranslate', 0);\n        showEl(document.getElementById('barTranslateCont'));\n        runprog('barTranslate', 0, 73);\n        translateFrm().then(res => {\n            runprog('barTranslate', 73, 90);\n            if (res) {\n                setprog('barTranslate', 100);\n                $('#mdlTranslate').modal('hide');\n                document.getElementById('btnCnfTranslate').classList.remove(\"disabled\");\n                document.getElementById('btnCanTranslate0').classList.remove(\"disabled\");\n                document.getElementById('btnCanTranslate1').classList.remove(\"disabled\");\n                hideEl(document.getElementById('barTranslateCont'))\n            } else {\n                if (lang == \"es\") {\n                    alertTop(\"<strong>¡Ha ocurrido un error!</strong>\", 0);\n                } else if (lang == \"en\") {\n                    alertTop(\"<strong>¡There has been an error!</strong>\", 0);\n                }\n                console.log('err');\n            }\n        });\n    });\n\n    function fileFrm() {\n        let file = document.getElementById('inFile').value;\n        cookiesFSRef.where(\"file\", \"==\", file).get().then(snap => {\n            if (!snap.empty && file != docDat.file) {\n                if (lang == \"es\") {\n                    alertTop(\"Ese nombre de archivo ya esta en uso.\", 0);\n                } else if (lang == \"en\") {\n                    alertTop(\"That file name is already in use.\", 0);\n                }\n            } else {\n                docDat.description = document.getElementById('inDesc').value.trim();\n                docDat.file = file;\n                normSave();\n            }\n        }).then(() => { console.log('exito') }).catch(err => console.log(err));\n    }\n    document.getElementById(\"frmFile\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        fileFrm();\n    });\n    langs.forEach((l, i) => {\n        if (l != lang) {\n            let opt = document.createElement('option');\n            if (i == 0) {\n                opt.setAttribute('selected', 'true');\n            }\n            opt.value = opt.innerText = l;\n            document.getElementById('selFileTrans').appendChild(opt);\n        }\n    })\n    document.getElementById('btnFileTrans').onclick = function () {\n        let ori = document.getElementById('selFileTrans').value\n        db.collection('cookies/langs/' + ori).doc(docId).get().then(async function (doc) {\n            let file = doc.data().file;\n            let desc = doc.data().description;\n            document.getElementById('inFile').value = await translateSimple(file, ori, lang);\n            document.getElementById('inFile').value = document.getElementById('inFile').value.trim().toLowerCase().replaceAll(' ', '-');\n            document.getElementById('inDesc').value = await translateSimple(desc, ori, lang);\n            fileFrm();\n        }).catch(err => console.log(err));\n    }\n\n    function addMed(atempt) {\n        let ref = store.ref('cookieMedia/' + docId + '/i' + atempt + newMedia.name);\n        ref.getDownloadURL().then(res => {\n            addMed(atempt + 1);\n        }).catch(err => {\n            if (err.code == 'storage/object-not-found') {\n                ref.put(newMedia).on('state_changed',\n                    function progress(snap) {\n                        setprog('barNewMed', (snap.bytesTransferred / snap.totalBytes) * 100);\n                    },\n                    function error(err) {\n                        if (lang == \"es\") {\n                            alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n                        } else if (lang == \"en\") {\n                            alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n                        }\n                        console.log(err);\n                        $('#mdlAddMed').modal('hide');\n                    },\n                    function complete() {\n                        ref.getDownloadURL().then(medUrl => {\n                            docDat.media.push({\n                                medFile: 'i' + atempt + newMedia.name,\n                                medUrl: medUrl\n                            });\n                            normSave();\n                            fillMed();\n                            $('#mdlAddMed').modal('hide');\n                            if (addFrom == 0) $('#mdlMedMan').modal('show');\n                            else $('#mdlMedCho').modal('show');\n                        }).catch(err => { console.log(err) });\n                    }\n                );\n            } else {\n                console.log(err);\n            }\n        });\n    }\n    function addExtMed() {\n        docDat.media.push({\n            medFile: 'externo',\n            medUrl: document.getElementById('inNewMedUrl').value\n        });\n        normSave();\n        $('#mdlAddMed').modal('hide');\n        if (addFrom == 0) $('#mdlMedMan').modal('show');\n        else $('#mdlMedCho').modal('show');\n    }\n    document.getElementById(\"frmAddMed\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        setprog('barNewMed', 0);\n        showEl(document.getElementById(\"barNewMedCont\"));\n        hideEl(document.getElementById(\"frmAddMed\"));\n        document.getElementById(\"btnCnfNewMed\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanNewMed0\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanNewMed1\").setAttribute('disabled', 'true');\n        if (newMedSrc == \"home\") addMed(0);\n        else addExtMed();\n    });\n}\n\nlet savedInterval;\nfunction saveDoc() {\n    console.log('Saving...');\n    let d = docDat.published.toDate();\n    let month = d.getFullYear().toString();\n    if (d.getMonth() < 9) {\n        month += '0';\n    }\n    month += (d.getMonth() + 1);\n    let galletasText = \"\";\n    switch (lang) {\n        case \"es\":\n            galletasText = \"galletas\";\n            break;\n        case \"en\":\n            galletasText = \"cookies\";\n            break;\n    }\n    docDat.url = 'https://sciencecookies.net/' + galletasText + '/' + month + '/' + docDat.file + '/';\n    fillKW();\n    const promises = [];\n    langs.forEach(l => {\n        if (l != lang) {\n            let syncUpt = {\n                authors: docDat.authors.slice(),\n                media: docDat.media.slice(),\n                java: docDat.java,\n                notify: docDat.notify,\n                public: docDat.public,\n                beenPublic: docDat.beenPublic,\n                dledit: docDat.dledit,\n                created: docDat.created,\n                ledit: docDat.ledit,\n                published: docDat.published,\n                pop: docDat.pop,\n                likes: docDat.likes,\n                favs: docDat.favs,\n                revised: docDat.revised,\n                translations: docDat.translations,\n                fixedCats: docDat.fixedCats.slice(),\n                timePrev: docDat.timePrev | null,\n            }\n            syncUpt.fixedCats.forEach(function (cat, idx) {\n                syncUpt.fixedCats.splice(idx, 1, catTranslations[cat][l]);\n            });\n            syncUpt.translations[lang] = docDat.url;\n            promises.push(db.collection('cookies/langs/' + l).doc(docId).update(syncUpt));\n        }\n    })\n    return Promise.all(promises).then(() => {\n        return docRef.update(docDat);\n    });\n}\nfunction normSave() {\n    saveDoc().then(() => {\n        if (saved) clearInterval(savedInterval);\n        saved = true;\n        savedInterval = setInterval(() => {\n            let minutes = Math.floor((Date.now() - lastSave) / 60000);\n            if (minutes < 60) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n            else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n        }, 300010);\n        document.getElementById('tagLstSave').innerText = \"Se han guardado todos los cambios\";\n        lastSave = Date.now();\n    }).catch(err => {\n        document.getElementById('tagLstSave').innerText = \"Error, no se han guardado todos los cambios: \" + err.code;\n        console.log(err);\n    });\n}\n\nwindow.plusSect = function plusSect(type) {\n    let newSect = null;\n    if (type == 'html') {\n        newSect = {\n            type: type,\n            html: \"\"\n        };\n    } else if (type == 'parra') {\n        newSect = {\n            type: type,\n            text: \"\",\n            title: \"0\"\n        };\n    } else if (type == 'youtube') {\n        newSect = {\n            type: type,\n            vidUrl: \"\",\n            ratio: \"16by9\"\n        };\n    } else if (type == 'medSimple') {\n        newSect = {\n            type: type,\n            medUrl: \"https://via.placeholder.com/150.webp\",\n            alt: \"\",\n            caption: \"\",\n            hasCapt: \"true\",\n            width: \"75%\"\n        };\n    }\n    //Add more@#\n    if (newSect != null) docDat.cont.splice(toAdd, 0, newSect);\n    render();\n}\n\nfunction setprog(bar, n) {\n    bar = document.getElementById(bar);\n    n = Math.floor(n);\n    bar.setAttribute('aria-valuenow', n);\n    bar.style.width = n + '%';\n    bar.innerText = n + '%';\n}\nfunction runprog(bar, b, e) {\n    b = Math.floor(b);\n    e = Math.floor(e);\n    for (let i = b; i <= e; i++) {\n        setTimeout(() => {\n            setprog(bar, i);\n        }, 5);\n    }\n}\n\nfunction removeMedia(medFileName) {\n    return store.ref('cookieMedia/' + docId + '/' + medFileName).delete();\n}\n\nfunction fillMed() {\n    document.getElementById('contMedMan').innerHTML = `<div class=\"col mb-4\">\n        <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n            <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlAddMed\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\" onclick=\"addFrom=0;\">\n                <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n            </a>\n        </div>\n    </div>`;\n    document.getElementById('contMedCho').innerHTML = `<div class=\"col mb-4\">\n        <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n            <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlAddMed\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\" onclick=\"addFrom=1;\">\n                <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n            </a>\n        </div>\n    </div>`;\n\n    docDat.media.forEach((itm, idx) => {\n        let col0 = document.createElement('div');\n        classes(col0, \"col mb-4\");\n        let card0 = document.createElement('div');\n        classes(card0, \"card text-light bg-dark\");\n        col0.appendChild(card0);\n        let img0 = document.createElement('img');\n        classes(img0, \"card-img\");\n        img0.src = itm.medUrl;\n        card0.appendChild(img0);\n        let over0 = document.createElement('div');\n        classes(over0, \"card-img-overlay pt-0\");\n        over0.style.paddingLeft = \".9rem\";\n        over0.style.paddingRight = \".9rem\";\n        card0.appendChild(over0);\n        let btns0 = document.createElement('div');\n        classes(btns0, \"row mb-2 p-0\");\n        over0.appendChild(btns0);\n        let medBtnDel = document.createElement('button');\n        classes(medBtnDel, \"btn btn-light btn-scckie btn-sm\");\n        medBtnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n        medBtnDel.onclick = function () {\n            if (toDelMed == idx) {\n                toDelMed = -1;\n                if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                if (itm.medFile != 'externo') {\n                    removeMedia(itm.medFile).then(() => {\n                        if (itm.medUrl == docDat.picUrl) {\n                            docDat.picUrl = \"\";\n                        }\n                        docDat.media.splice(idx, 1);\n                        normSave();\n                    }).catch(err => console.log(err));\n                } else {\n                    if (itm.medUrl == docDat.picUrl) {\n                        docDat.picUrl = \"\";\n                    }\n                    docDat.media.splice(idx, 1);\n                    normSave();\n                }\n            } else {\n                if (lang == \"es\") {\n                    alertTop(\"<strong>¿Quieres eliminar esta imagen?</strong> Presiona de nuevo el botón para confirmar.\", 2);\n                } else if (lang == \"en\") {\n                    alertTop(\"<strong>Do you want to delete this image? </strong> Press the button again to confirm.\", 2);\n                }\n                toDelMed = idx;\n                setTimeout(() => {\n                    toDelMed = -1;\n                }, 3000);\n            }\n        };\n        btns0.appendChild(medBtnDel);\n        let tooltip = document.createElement('div');\n        classes(tooltip, \"tooltipn ml-auto\");\n        let medBtnCopy = document.createElement('button');\n        classes(medBtnCopy, \"btn btn-light btn-scckie btn-sm\");\n        let tltipTxt = document.createElement('span');\n        classes(tltipTxt, \"tooltipTextn\");\n        tltipTxt.innerHTML = \"Copiar\";\n        medBtnCopy.appendChild(tltipTxt);\n        medBtnCopy.innerHTML += '<i class=\"fas fa-link\"></i>';\n        medBtnCopy.onclick = function () {\n            /*var copyText = document.getElementById(\"toCopy\");\n            //copyText.classList.remove('d-none');\n            copyText.select();\n            copyText.setSelectionRange(0, 99999);\n            document.execCommand(\"copy\");\n            //classes(copyText, \"d-none\");*/\n            window.open(itm.medUrl).focus();\n\n            tltipTxt.innerHTML = \"URL copiado\";\n        };\n        medBtnCopy.onmouseout = function () {\n            tltipTxt.innerHTML = \"Copiar\";\n        }\n        tooltip.appendChild(medBtnCopy);\n        btns0.appendChild(tooltip);\n        let medBtnUnstar = document.createElement('button');\n        let medBtnStar = document.createElement('button');\n        if (itm.medUrl == docDat.picUrl) {\n            classes(medBtnUnstar, \"btn btn-light btn-scckie btn-sm ml-1\");\n            medBtnUnstar.innerHTML = '<i class=\"fas fa-star\"></i>';\n            medBtnUnstar.onclick = function () {\n                docDat.picUrl = \"\";\n                normSave();\n            };\n            btns0.appendChild(medBtnUnstar);\n        } else {\n            classes(medBtnStar, \"btn btn-light btn-scckie btn-sm ml-1\");\n            medBtnStar.innerHTML = '<i class=\"far fa-star\"></i>';\n            medBtnStar.onclick = function () {\n                docDat.picUrl = itm.medUrl;\n                normSave();\n            };\n            btns0.appendChild(medBtnStar);\n        }\n\n        document.getElementById('contMedMan').appendChild(col0);\n\n\n        let col1 = document.createElement('div');\n        classes(col1, \"col mb-4\");\n        let btnA1 = document.createElement('a');\n        classes(btnA1, 'text-decoration-none');\n        btnA1.setAttribute('type', 'button');\n        btnA1.onclick = function () {\n            if (toAddMed == -1) return;\n            docDat.cont[toAddMed].medUrl = itm.medUrl;\n            normSave();\n        };\n        btnA1.setAttribute(\"data-dismiss\", \"modal\");\n        col1.appendChild(btnA1);\n        let card1 = document.createElement('div');\n        classes(card1, \"card text-light bg-dark\");\n        btnA1.appendChild(card1);\n        let img1 = document.createElement('img');\n        classes(img1, \"card-img\");\n        img1.src = itm.medUrl;\n        card1.appendChild(img1);\n\n        document.getElementById('contMedCho').appendChild(col1);\n    });\n}\n\nfunction render() {\n    document.getElementById('cont').innerHTML = \"\";\n    let publishDate;\n    if (docDat.beenPublic) {\n        publishDate = docDat.published;\n    } else {\n        docDat.published = publishDate = new firebase.firestore.Timestamp.now();\n    }\n    docDat.cont.forEach((item, idx) => {\n        let sect = document.createElement('div');\n        sect.id = 'sect' + idx;\n        let div = document.createElement('div');\n        classes(div, 'dropdown-divider mx-2')\n        if (item.type != 'head') sect.appendChild(div);\n\n        let subt = document.createElement('div');\n        subt.id = \"sect\" + idx + \"t\";\n        let subf = document.createElement('div');\n        classes(subf, \"d-none\");\n        subf.id = \"sect\" + idx + \"f\";\n\n        let act = document.createElement('div');\n        classes(act, 'row mb-2 px-2');\n        let btnDel, btnEdit, btnCheck, btnAdd, btnTrans, selLang;\n\n        if (item.type != 'head' && item.type != 'ref') {\n            btnDel = document.createElement('button');\n            classes(btnDel, 'btn btn-light btn-link-scckie ml-2');\n            btnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n            btnDel.onclick = function () {\n                if (toDel == idx) {\n                    toDel = -1;\n                    if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                    docDat.cont.splice(idx, 1);\n                    render();//Important\n                    normSave();\n                } else {\n                    if (lang == \"es\") {\n                        alertTop(\"<strong>¿Quieres eliminar esta sección?</strong> Presiona de nuevo el botón para confirmar.\", 2);\n                    } else if (lang == \"en\") {\n                        alertTop(\"<strong>Do you want to delete this section? </strong> Press the button again to confirm.\", 2);\n                    }\n                    toDel = idx;\n                    setTimeout(() => {\n                        toDel = -1;\n                    }, 3000);\n                }\n            }\n            act.appendChild(btnDel);\n        }\n\n        let selLangC = document.createElement('div');\n        classes(selLangC, \"col-auto\");\n        selLang = document.createElement('select');\n        classes(selLang, \"form-control mr-0 ml-2 h-100\");\n        langs.forEach((l, i) => {\n            if (l != lang) {\n                let opt = document.createElement('option');\n                if (i == 0) {\n                    opt.setAttribute('selected', 'true');\n                }\n                opt.value = opt.innerText = l;\n                selLang.appendChild(opt);\n            }\n        })\n\n        if (item.type != 'ref') {\n            selLangC.appendChild(selLang);\n            act.appendChild(selLangC);\n            btnTrans = document.createElement('button');\n            classes(btnTrans, 'btn btn-light btn-link-scckie');\n            btnTrans.innerHTML = '<i class=\"fas fa-language\"></i>';\n            btnTrans.onclick = function () {\n                db.collection('cookies/langs/' + selLang.value).doc(docId).get().then(async function (doc) {\n                    let sect = doc.data().cont[idx];\n                    if (item.type != sect.type) return;\n                    if (sect.type == 'head') {\n                        docDat.cont[idx].title = await translateSimple(sect.title, selLang.value, lang);\n                    } else if (sect.type == 'html') {\n                        docDat.cont[idx].html = await translateSimple(sect.html, selLang.value, lang);\n                    } else if (sect.type == 'parra') {\n                        docDat.cont[idx].text = await translateSimple(sect.text, selLang.value, lang);\n                        if (sect.title != \"0\") {\n                            docDat.cont[idx].titleTxt = await translateSimple(sect.titleTxt, selLang.value, lang);\n                        }\n                    } else if (sect.type == 'medSimple') {\n                        docDat.cont[idx].alt = await translateSimple(sect.alt, selLang.value, lang);\n                        docDat.cont[idx].caption = await translateSimple(sect.caption, selLang.value, lang);\n                    }\n                    console.log(docDat.cont[idx]);\n                    normSave();\n                }).catch(err => console.log(err));\n            }\n            act.appendChild(btnTrans);\n\n            btnEdit = document.createElement('button');\n            classes(btnEdit, 'btn btn-light btn-link-scckie ml-auto');\n            btnEdit.innerHTML = '<i class=\"fas fa-edit\"></i>';\n            btnEdit.onclick = function () {\n                toggleEl(btnEdit);\n                toggleEl(btnCheck);\n                toggleEl(subf);\n                if (document.getElementById('tagLstSave').innerText == \"Se han guardado todos los cambios\") {\n                    let minutes = Math.floor((Date.now() - lastSave) / 60000);\n                    if (minutes > 0) {\n                        if (minutes > 59) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n                        else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n                    } else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor((Date.now() - lastSave) / 1000) + \" segundos\";\n                }\n            }\n            act.appendChild(btnEdit);\n            btnCheck = document.createElement('button');\n            classes(btnCheck, 'btn btn-light btn-link-scckie ml-auto d-none');\n            btnCheck.innerHTML = '<i class=\"fas fa-check\"></i>';\n            btnCheck.onclick = function () {\n                toggleEl(btnEdit);\n                toggleEl(btnCheck);\n                toggleEl(subf);\n                normSave();\n            }\n            act.appendChild(btnCheck);\n            btnAdd = document.createElement('button');\n            classes(btnAdd, 'btn btn-light btn-link-scckie mx-2');\n            btnAdd.innerHTML = '<i class=\"fas fa-plus\"></i>';\n            btnAdd.setAttribute('data-toggle', \"modal\");\n            btnAdd.setAttribute('data-target', \"#mdlPlusSect\");\n            btnAdd.onclick = function () {\n                toAdd = idx + 1;\n            }\n            act.appendChild(btnAdd);\n        }\n        sect.appendChild(act);\n\n        if (item.type == 'head') {\n            let d = publishDate.toDate();\n            d = d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();\n            let ld = docDat.ledit.toDate();\n            ld = ld.getDate() + '/' + (ld.getMonth() + 1) + '/' + ld.getFullYear();\n\n            let h = document.createElement('h1');\n            classes(h, \"text-center\");\n            h.innerHTML = docDat.cont[0].title;\n            subt.appendChild(h);\n            let pPub = document.createElement('p');\n            let publishTxt, lstUptTxt, authrsTxt;\n            if (lang == \"es\") {\n                publishTxt = \"Publicado: \";\n                lstUptTxt = \"Ultima actualización: \";\n                authrsTxt = \"Autor(es): \"\n            } else if (lang == \"en\") {\n                publishTxt = \"Published: \";\n                lstUptTxt = \"Last updated: \";\n                authrsTxt = \"Author(s):\"\n            }\n            pPub.innerText = publishTxt + d;\n            subt.appendChild(pPub);\n            if (docDat.dledit) {\n                let pLEdit = document.createElement('p');\n                pLEdit.innerText = lstUptTxt + ld;\n                subt.appendChild(pLEdit);\n            }\n            let pAuth = document.createElement('p');\n            pAuth.innerText = authrsTxt + docDat.cont[0].author;\n            subt.appendChild(pAuth);\n\n            let fd0 = document.createElement('div');\n            classes(fd0, \"row justify-content-center mb-2\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col col-lg-6\");\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control form-control-lg text-center\");\n            in0.setAttribute('type', 'text');\n            in0.setAttribute('placeholder', docDat.cont[0].title);\n            in0.value = docDat.cont[0].title;\n            fc0.appendChild(in0);\n            fd0.appendChild(fc0);\n            subf.appendChild(fd0);\n            in0.oninput = function () {\n                docDat.title = docDat.cont[0].title = in0.value.trim();\n                h.innerHTML = docDat.cont[0].title;\n            };\n\n            let fd1 = document.createElement('div');\n            classes(fd1, \"row mb-2\");\n            let fl1 = document.createElement('label');\n            classes(fl1, \"col-sm-2 col-form-label\");\n            fl1.innerText = publishTxt;\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col\");\n            let in1 = document.createElement('input');\n            classes(in1, \"form-control\");\n            in1.setAttribute('type', 'text');\n            in1.setAttribute('readonly', 'true');\n            in1.value = d;\n            fc1.appendChild(in1);\n            fd1.appendChild(fl1);\n            fd1.appendChild(fc1);\n            subf.appendChild(fd1);\n\n            let fd2 = document.createElement('div');\n            let fl2 = document.createElement('label');\n            let fc2 = document.createElement('div');\n            let in2 = document.createElement('input');\n            if (docDat.dledit) {\n                classes(fd2, \"row mb-2\");\n                classes(fl2, \"col-sm-2 col-form-label\");\n                fl2.innerText = lstUptTxt;\n                classes(fc2, \"col\");\n                classes(in2, \"form-control\");\n                in2.setAttribute('type', 'text');\n                in2.setAttribute('readonly', 'true');\n                in2.value = ld;\n                fc2.appendChild(in2);\n                fd2.appendChild(fl2);\n                fd2.appendChild(fc2);\n                subf.appendChild(fd2);\n            }\n\n            let fd3 = document.createElement('div');\n            classes(fd3, \"row mb-2\");\n            let fl3 = document.createElement('label');\n            classes(fl3, \"col-sm-2 col-form-label\");\n            fl3.innerText = authrsTxt;\n            let fr3 = document.createElement('div');\n            classes(fr3, \"form-row justify-content-around pt-2\");\n            let f3c0 = document.createElement('div');\n            classes(f3c0, \"form-group col-auto mr-2\");\n            let f3f0 = document.createElement('div');\n            classes(f3f0, \"form-check\");\n            f3c0.appendChild(f3f0);\n            let inAu0 = document.createElement('input');\n            classes(inAu0, \"form-check-input\");\n            inAu0.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Andrea Garma')) inAu0.setAttribute('checked', 'true');\n            inAu0.value = ' Andrea Garma';\n            let inAuL0 = document.createElement('label');\n            classes(inAuL0, \"form-check-label\");\n            inAu0.setAttribute('for', 'authr0');\n            inAuL0.innerText = \"Andrea Garma\";\n            f3f0.appendChild(inAu0);\n            f3f0.appendChild(inAuL0);\n            fr3.appendChild(f3c0);\n            let f3c1 = document.createElement('div');\n            classes(f3c1, \"form-group col-auto mr-2\");\n            let f3f1 = document.createElement('div');\n            classes(f3f1, \"form-check\");\n            f3c1.appendChild(f3f1);\n            let inAu1 = document.createElement('input');\n            classes(inAu1, \"form-check-input\");\n            inAu1.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Javier Pantoja')) inAu1.setAttribute('checked', 'true');\n            inAu1.value = ' Javier Pantoja';\n            let inAuL1 = document.createElement('label');\n            classes(inAuL1, \"form-check-label\");\n            inAu1.setAttribute('for', 'authr1');\n            inAuL1.innerText = \"Javier Pantoja\";\n            f3f1.appendChild(inAu1);\n            f3f1.appendChild(inAuL1);\n            fr3.appendChild(f3c1);\n            let f3c2 = document.createElement('div');\n            classes(f3c2, \"form-group col-auto mr-2\");\n            let f3f2 = document.createElement('div');\n            classes(f3f2, \"form-check\");\n            f3c2.appendChild(f3f2);\n            let inAu2 = document.createElement('input');\n            classes(inAu2, \"form-check-input\");\n            inAu2.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Paulina Vargas')) inAu2.setAttribute('checked', 'true');\n            inAu2.value = ' Paulina Vargas';\n            let inAuL2 = document.createElement('label');\n            classes(inAuL2, \"form-check-label\");\n            inAu2.setAttribute('for', 'authr2');\n            inAuL2.innerText = \"Paulina Vargas\";\n            f3f2.appendChild(inAu2);\n            f3f2.appendChild(inAuL2);\n            fr3.appendChild(f3c2);\n            function uptAuthors(a0, a1, a2) {\n                let arr = [];\n                if (a0) arr.push(\" Andrea Garma\");\n                if (a1) arr.push(\" Javier Pantoja\");\n                if (a2) arr.push(\" Paulina Vargas\");\n                if (arr.empty) arr.push(' Anónimo');\n                docDat.cont[0].author = arr.slice();\n                docDat.authors = arr.slice();\n                pAuth.innerText = \"Autor(es):\" + docDat.cont[0].author;\n            }\n            inAu0.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n            inAu1.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n            inAu2.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n\n            fd3.appendChild(fl3);\n            fd3.appendChild(fr3);\n            subf.appendChild(fd3);\n        } else if (item.type == 'ref') {\n            let h = document.createElement('h3');\n            if (lang == \"es\") {\n                h.innerHTML = '<br>Referencias';\n            } else if (lang == \"en\") {\n                h.innerHTML = '<br>References';\n            }\n            subt.appendChild(h);\n            item.ref.forEach((ref, refIdx) => {\n                let refR = document.createElement('div');\n                classes(refR, \"row mb-2\");\n                let cLink = document.createElement('div');\n                classes(cLink, \"col\");\n                refR.appendChild(cLink);\n                let cLinkFrm = document.createElement('div');\n                classes(cLinkFrm, \"col d-none\");\n                refR.appendChild(cLinkFrm);\n                let cBtn = document.createElement('div');\n                classes(cBtn, \"col-auto\");\n                refR.appendChild(cBtn);\n                let pRef = document.createElement('p');\n                cLink.appendChild(pRef);\n                let aRef;\n\n                function makeRefCite(text) {\n                    pRef.innerHTML = text;\n                }\n                function makeRefWeb(text) {\n                    pRef.innerHTML = \"\";\n                    aRef = document.createElement('a');\n                    classes(aRef, \"text-warning text-break\")\n                    aRef.href = text;\n                    aRef.setAttribute('target', '_blank');\n                    aRef.setAttribute('rel', 'nofollow');\n                    aRef.innerHTML = text + ' <i class=\"fas fa-external-link-alt\"></i>'\n                    pRef.appendChild(aRef);\n                }\n                if (ref.type == 'web') {\n                    makeRefWeb(ref.link);\n                } else if (ref.type == 'cite') {\n                    makeRefCite(ref.link);\n                }\n\n                function changeRef() {\n                    in1.value = in1.value.trim();\n                    docDat.cont[idx].ref[refIdx].link = in0.value;\n                    docDat.cont[idx].ref[refIdx].type = in1.value;\n                    if (ref.type == 'web') {\n                        makeRefWeb(ref.link);\n                        in0.setAttribute('placeholder', 'https://google.com');\n                    } else if (ref.type == 'cite') {\n                        makeRefCite(ref.link);\n                        in0.setAttribute('placeholder', 'Ref');\n                    }\n                }\n                let fr0 = document.createElement('div');\n                classes(fr0, \"row\");\n                let fc0 = document.createElement('div');\n                classes(fc0, \"col\");\n                let fc1 = document.createElement('div');\n                classes(fc1, \"col-auto\");\n                let in0 = document.createElement('input');\n                let in1 = document.createElement('select');\n                classes(in0, \"form-control\");\n                in0.setAttribute('type', 'text');\n                in0.value = ref.link;\n                if (ref.type == 'web') in0.setAttribute('placeholder', 'https://google.com');\n                if (ref.type == 'cite') in0.setAttribute('placeholder', 'Ref');\n                in0.onchange = function () { changeRef(); }\n                classes(in1, \"form-control form-control-sm\");\n                let inOpt0 = document.createElement('option');\n                inOpt0.value = \"web\";\n                if (ref.type == 'web') inOpt0.setAttribute('selected', 'true');\n                inOpt0.innerText = 'Web';\n                in1.appendChild(inOpt0);\n                let inOpt1 = document.createElement('option');\n                if (ref.type == 'cite') inOpt1.setAttribute('selected', 'true');\n                inOpt1.value = \"cite\";\n                inOpt1.innerText = 'Otro';\n                in1.appendChild(inOpt1);\n                in1.onchange = function () { changeRef(); }\n                fc0.appendChild(in0);\n                fc1.appendChild(in1);\n                fr0.appendChild(fc0);\n                fr0.appendChild(fc1);\n                cLinkFrm.appendChild(fr0);\n\n                function toggleRef() {\n                    toggleEl(cLink);\n                    toggleEl(cLinkFrm);\n                    toggleEl(rBtnEdit);\n                    toggleEl(rBtnCheck);\n                }\n                let rBtnEdit, rBtnCheck;\n                rBtnEdit = document.createElement('button');\n                classes(rBtnEdit, 'btn btn-light btn-link-scckie ml-auto');\n                rBtnEdit.innerHTML = '<i class=\"fas fa-edit\"></i>';\n                rBtnEdit.onclick = function () {\n                    toggleRef();\n                    if (document.getElementById('tagLstSave').innerText == \"Se han guardado todos los cambios\") {\n                        document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor((Date.now() - lastSave) / 60000) + \" minutos\";\n                    }\n                };\n                rBtnCheck = document.createElement('button');\n                classes(rBtnCheck, 'btn btn-light btn-link-scckie ml-auto d-none');\n                rBtnCheck.innerHTML = '<i class=\"fas fa-check\"></i>';\n                rBtnCheck.onclick = function () {\n                    toggleRef();\n                    docDat.cont[idx].ref.sort((a, b) => {\n                        let linkA = a.link.toUpperCase();\n                        let linkB = b.link.toUpperCase();\n                        if (linkA < linkB) return -1;\n                        if (linkA > linkB) return 1;\n                        return 0;\n                    });\n                    normSave();\n                };\n                cBtn.appendChild(rBtnEdit);\n                cBtn.appendChild(rBtnCheck);\n                let rBtnDel = document.createElement('button');\n                classes(rBtnDel, 'btn btn-light btn-link-scckie ml-2');\n                rBtnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n                rBtnDel.onclick = function () {\n                    docDat.cont[idx].ref.splice(refIdx, 1);\n                    normSave();\n                    render();//@#Important, why?\n                };\n                cBtn.appendChild(rBtnDel);\n\n                subt.appendChild(refR);\n\n                if (ref.link == \"\") {\n                    rBtnEdit.click();\n                }\n            });\n            let btnPlusRef0 = document.createElement('a');\n            classes(btnPlusRef0, \"btn btn-light btn-scckie\");\n            btnPlusRef0.onclick = function () { plusRef(); };\n            btnPlusRef0.innerHTML = '<i class=\"fas fa-plus\"></i>'\n            h.appendChild(btnPlusRef0);\n            let btnPlusRef1 = document.createElement('a');\n            classes(btnPlusRef1, \"btn btn-light btn-scckie btn-lg btn-block border border-light\");\n            btnPlusRef1.onclick = function () { plusRef(); };\n            btnPlusRef1.innerHTML = '<i class=\"fas fa-plus\"></i>'\n            subt.appendChild(btnPlusRef1);\n            function plusRef() {\n                docDat.cont[idx].ref.push({\n                    type: \"web\",\n                    link: \"\"\n                });\n                render();\n            }\n        } else if (item.type == 'parra') {\n            let h;\n            if (Number(item.title) > 0) {\n                if (Number(item.title) == 2) subt.innerHTML = '<br>';\n                h = document.createElement('h' + item.title)\n                h.innerHTML = item.titleTxt;\n                subt.appendChild(h);\n            }\n            let p = document.createElement('p');\n            p.innerHTML = item.text;\n            subt.appendChild(p);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0 = document.createElement('input');\n            let in1 = document.createElement('select');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            if (Number(item.title) > 0) {\n                in0.value = item.titleTxt;\n                in0.setAttribute('placeholder', 'Subtítulo');\n                in0.removeAttribute('readonly');\n            } else {\n                in0.value = \"\";\n                in0.setAttribute('placeholder', '');\n                in0.setAttribute('readonly', 'true');\n            }\n            in0.oninput = function () {\n                docDat.cont[idx].titleTxt = h.innerHTML = in0.value;\n            }\n            classes(in1, \"form-control form-control-sm\");\n            for (let i = 0; i < 7; i++) {\n                let inOpt = document.createElement('option');\n                inOpt.value = i;\n                if (item.title == i) inOpt.setAttribute('selected', 'true');\n                inOpt.innerText = i;\n                in1.appendChild(inOpt);\n            }\n            in1.oninput = function () {\n                docDat.cont[idx].title = in1.value;\n                if (Number(in1.value) > 0) {\n                    in0.setAttribute('placeholder', 'Subtítulo');\n                    in0.removeAttribute('readonly');\n                    if (Number(item.title) == 2) subt.innerHTML = '<br>';\n                    else subt.innerHTML = \"\";\n                    h = document.createElement('h' + item.title)\n                    h.innerHTML = docDat.cont[idx].titleTxt = in0.value;\n                    subt.appendChild(h);\n                    subt.appendChild(p);\n                } else {\n                    in0.value = \"\";\n                    in0.setAttribute('placeholder', '');\n                    in0.setAttribute('readonly', 'true');\n                    docDat.cont[idx].titleTxt = in0.value;\n                    subt.innerHTML = \"\";\n                    subt.appendChild(p);\n                }\n            }\n            fc0.appendChild(in0);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            let fr1 = document.createElement('div');\n            classes(fr0, \"row mb-2\");\n            let f1c0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let in2 = document.createElement('textarea');\n            classes(in2, \"form-control\");\n            in2.setAttribute('rows', '8');\n            in2.value = item.text;\n            in2.oninput = function () {\n                docDat.cont[idx].text = p.innerHTML = in2.value.trim();\n            };\n            f1c0.appendChild(in2);\n            fr1.appendChild(f1c0);\n            subf.appendChild(fr1);\n\n            if (Number(item.title) > 0 && item.titleTxt == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'html') {\n            let html = document.createElement('div');\n            html.innerHTML = item.html;\n            subt.appendChild(html);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row mb-2\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let in0 = document.createElement('textarea');\n            classes(in0, \"form-control\");\n            in0.setAttribute('rows', '8');\n            in0.value = item.html;\n            in0.onchange = function () {\n                docDat.cont[idx].html = html.innerHTML = in0.value.trim();\n            };\n            fc0.appendChild(in0);\n            fr0.appendChild(fc0);\n            subf.appendChild(fr0);\n\n            if (item.html == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'youtube') {\n            let yt = document.createElement('div');\n            classes(yt, \"embed-responsive embed-responsive-\" + item.ratio);\n            let iframe = document.createElement('iframe');\n            iframe.src = item.vidUrl;\n            iframe.setAttribute('frameborder', \"0\");\n            iframe.setAttribute('allow', \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\");\n            iframe.setAttribute('allowfullscreen', \"true\");\n            yt.appendChild(iframe);\n            subt.appendChild(yt);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0L = document.createElement('label');\n            in0L.innerText = \"URL\";\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            in0.value = item.vidUrl;\n            in0.onchange = function () {\n                let convUrl = in0.value.trim();\n                if (convUrl.length == 11) convUrl = \"https://www.youtube.com/embed/\" + convUrl;\n                else {\n                    let part, i = 1;\n                    do {\n                        part = convUrl[i - 1] + convUrl[i];\n                        i++;\n                    } while (part != \"e/\" && part != \"v=\");\n                    convUrl = \"https://www.youtube.com/embed/\" + convUrl.substr(i, 11);\n                }\n                docDat.cont[idx].vidUrl = iframe.src = convUrl;\n            }\n            let help0 = document.createElement('small');\n            classes(help0, \"text-muted\");\n            help0.innerText = \"aaaaaaaaaaa o https://youtu.be/aaaaaaaaaaa o https://www.youtube.com/watch?v=aaaaaaaaaaa\";\n            let in1L = document.createElement('label');\n            in1L.innerText = \"Ratio\";\n            let in1 = document.createElement('select');\n            classes(in1, \"form-control form-control-sm\");\n            let ratios = ['21by9', '16by9', '4by3', '1by1'];\n            for (let i = 0; i < 4; i++) {\n                let inOpt = document.createElement('option');\n                inOpt.value = ratios[i];\n                if (item.ratio == ratios[i]) inOpt.setAttribute('selected', 'true');\n                inOpt.innerText = ratios[i].replaceAll('by', ':');\n                in1.appendChild(inOpt);\n            }\n            in1.oninput = function () {\n                docDat.cont[idx].ratio = in1.value;\n                ratios.forEach(rat => {\n                    yt.classList.remove('embed-responsive-' + rat);\n                })\n                classes(yt, \"embed-responsive-\" + item.ratio);\n            }\n            fc0.appendChild(in0L);\n            fc0.appendChild(in0);\n            fc0.appendChild(help0);\n            fc1.appendChild(in1L);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            if (item.vidUrl == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'medSimple') {\n            let fig = document.createElement('figure');\n            classes(fig, \"mx-auto\");\n            fig.style.width = item.width;\n            fig.style.position = \"relative\";\n            fig.style.borderRadius = \".25rem\";\n            let img0 = document.createElement('img');\n            img0.setAttribute('alt', item.alt);\n            img0.src = item.medUrl;\n            classes(img0, \"w-100\");\n            fig.appendChild(img0);\n            let over0 = document.createElement('div');\n            classes(over0, \"card-img-overlay pt-0\");\n            over0.style.paddingLeft = \".9rem\";\n            over0.style.paddingRight = \".9rem\";\n            let btns0 = document.createElement('div');\n            classes(btns0, \"row mb-2 p-0\");\n            over0.appendChild(btns0);\n            let btnChange = document.createElement('button');\n            classes(btnChange, \"btn btn-light btn-scckie btn-sm ml-auto\");\n            btnChange.innerHTML = '<i class=\"fas fa-exchange-alt\"></i>';\n            btnChange.setAttribute('data-toggle', \"modal\")\n            btnChange.setAttribute('data-target', \"#mdlMedCho\")\n            btnChange.onclick = function () {\n                toAddMed = idx;\n            };\n            btns0.appendChild(btnChange);\n            fig.appendChild(over0);\n            let capt = document.createElement('figcaption');\n            capt.style.fontSize = \"70%\";\n            capt.style.fontWeight = \"lighter\";\n            capt.innerHTML = item.caption;\n            if (item.hasCapt) {\n                fig.appendChild(capt);\n            }\n            subt.appendChild(fig);\n\n            let rcont = document.createElement('div');\n            classes(rcont, \"form-group mb-2\");\n            let rnL = document.createElement('label');\n            rnL.innerText = \"Tamaño\";\n            let ranR = document.createElement('div');\n            classes(ranR, \"row\");\n            let ranRC0 = document.createElement('div');\n            classes(ranRC0, \"col align-center d-flex pr-0\");\n            let in3 = document.createElement('input');\n            in3.setAttribute('type', 'range');\n            in3.setAttribute('max', '100');\n            in3.setAttribute('min', '0');\n            in3.setAttribute('step', '1');\n            in3.value = '75';\n            classes(in3, \"form-control-range\");\n            in3.oninput = function () {\n                valL.innerHTML = in3.value + '%';\n                fig.style.width = docDat.cont[idx].width = in3.value + '%';\n            }\n            ranRC0.appendChild(in3);\n            let valL = document.createElement('span');\n            classes(valL, \"badge badge-primary range-value-L\");\n            valL.innerText = '75%';\n            let ranRC1 = document.createElement('div');\n            classes(ranRC1, \"col-auto\");\n            ranRC1.appendChild(valL);\n            ranR.appendChild(ranRC0);\n            ranR.appendChild(ranRC1);\n            rcont.appendChild(rnL);\n            rcont.appendChild(ranR);\n            subf.appendChild(rcont);\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0L = document.createElement('label');\n            in0L.innerText = \"Pie de foto\";\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            in0.value = item.caption;\n            in0.oninput = function () {\n                capt.innerHTML = docDat.cont[idx].caption = in0.value.trim();\n            }\n            let in1 = document.createElement('select');\n            classes(in1, \"form-control form-control-sm\");\n            let inOpt0 = document.createElement('option');\n            inOpt0.value = \"true\";\n            if (item.hasCapt == \"true\") inOpt0.setAttribute('selected', 'true');\n            inOpt0.innerText = \"Sí\";\n            in1.appendChild(inOpt0);\n            let inOpt1 = document.createElement('option');\n            inOpt1.value = \"false\";\n            if (item.hasCapt == \"false\") inOpt1.setAttribute('selected', 'true');\n            inOpt1.innerText = \"No\";\n            in1.appendChild(inOpt1);\n            in1.oninput = function () {\n                docDat.cont[idx].hasCapt = in1.value;\n                if (in1.value == \"true\") {\n                    capt.innerHTML = in0.value = docDat.cont[idx].caption;\n                    in0.removeAttribute('readonly');\n                    fig.appendChild(capt);\n                } else {\n                    in0.value = docDat.cont[idx].caption = \"\";\n                    in0.setAttribute('readonly', 'true');\n                    capt.innerHTML = \"\";\n                    fig.innerHTML = \"\";\n                    fig.appendChild(img0);\n                    fig.appendChild(over0);\n                }\n            }\n            fc0.appendChild(in0L);\n            fc0.appendChild(in0);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            let fr1 = document.createElement('div');\n            classes(fr1, \"row\");\n            let f1c0 = document.createElement('div');\n            classes(f1c0, \"col\");\n            let in2L = document.createElement('label');\n            in2L.innerText = \"Alt\";\n            let in2 = document.createElement('input');\n            classes(in2, \"form-control\");\n            in2.setAttribute('type', 'text');\n            in2.value = item.alt;\n            in2.oninput = function () {\n                docDat.cont[idx].alt = in2.value.trim();\n                img0.setAttribute('alt', in2.value.trim());\n            }\n            f1c0.appendChild(in2L);\n            f1c0.appendChild(in2);\n            fr1.appendChild(f1c0);\n            subf.appendChild(fr1);\n\n            if (item.hasCapt == \"true\" && item.caption == \"\") {\n                btnEdit.click();\n            }\n        }//Add more@#*/\n        sect.appendChild(subt);\n        sect.appendChild(subf);\n        document.getElementById('cont').appendChild(sect);\n    });\n    document.getElementById('inJava').innerText = docDat.java;\n    document.getElementById('javaIns').innerHTML = docDat.java;\n}\n\ndocument.getElementById('inFile').oninput = function () {\n    document.getElementById('inFile').value = ultraClean(document.getElementById('inFile').value, '-');\n}\n\ndocument.getElementById('inJava').onchange = function () {\n    docDat.java = document.getElementById('javaIns').innerHTML = document.getElementById('inJava').value;\n}\ndocument.getElementById('btnEditJs').onclick = function () {\n    toggleEl(document.getElementById('btnEditJs'));\n    toggleEl(document.getElementById('btnCheckJs'));\n    document.getElementById('inJava').removeAttribute('readonly');\n};\ndocument.getElementById('btnCheckJs').onclick = function () {\n    toggleEl(document.getElementById('btnEditJs'));\n    toggleEl(document.getElementById('btnCheckJs'));\n    document.getElementById('inJava').setAttribute('readonly', 'true');\n    normSave();\n};\n\nfunction fillTrans() {\n    langs.forEach(l => {\n        if (l != lang) {\n            let opt = document.createElement('option');\n            opt.value = opt.innerText = l;\n            document.getElementById('inTransFrom').appendChild(opt);\n        }\n    })\n}\n\n$('#mdlAddMed').on('hidden.bs.modal', e => {\n    document.getElementById(\"prevNewMed\").src = '';\n    document.getElementById('inNewMedL').innerHTML = 'Elige una imagen';\n    document.getElementById('inNewMedUrl').value = \"\";\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"barNewMedCont\"));\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n    showEl(document.getElementById(\"frmAddMed\"));\n    document.getElementById(\"btnCnfNewMed\").removeAttribute('disabled');\n    document.getElementById(\"btnCanNewMed0\").removeAttribute('disabled');\n    document.getElementById(\"btnCanNewMed1\").removeAttribute('disabled');\n})\ndocument.getElementById('inNewMed').addEventListener('change', e => {\n    newMedia = e.target.files[0];\n    function prevMed() {\n        var read = new FileReader();\n        read.readAsDataURL(newMedia);\n        read.onload = function (e2) {\n            document.getElementById(\"prevNewMed\").src = e2.target.result;\n        };\n    };\n    newMedia.name = ultraClean(newMedia.name, '');\n    document.getElementById('inNewMedL').innerHTML = newMedia.name;\n    prevMed(newMedia);\n});\ndocument.getElementById('inNewMedUrl').onchange = function () {\n    document.getElementById(\"prevNewMed\").src = document.getElementById('inNewMedUrl').value;\n};\ndocument.getElementById('inMedSrc0').onclick = function () {\n    newMedSrc = \"home\";\n    document.getElementById('inNewMed').setAttribute('required', 'true');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    showEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n}\ndocument.getElementById('inMedSrc1').onclick = function () {\n    newMedSrc = \"out\";\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').setAttribute('required', 'true');\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    showEl(document.getElementById(\"inNewMedUrlCont\"));\n}\n\ndocument.getElementById('inSendUpt').onclick = function () {\n    if (document.getElementById('inSendUpt').checked) {\n        showEl(document.getElementById('uptDescCont'));\n        document.getElementById('inUptDesc').setAttribute('required', 'true');\n    } else {\n        hideEl(document.getElementById('uptDescCont'));\n        document.getElementById('inUptDesc').removeAttribute('required');\n    }\n}\n\ndocument.getElementById('btnPrevCook').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 10 * 60000);\n    normSave();\n};\ndocument.getElementById('btnPrevMail').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 10 * 60000);\n    normSave();\n};\n\ndocument.getElementById('btnPrivate').onclick = function () {\n    docDat.public = false;\n    normSave();\n};\n\ndocument.getElementById('btnAprove').onclick = function () {\n    if (docDat.revised[lang] && docDat.revised[lang].includes(uid)) {\n        docDat.revised[lang].splice(docDat.revised[lang].indexOf(uid), 1);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n    } else {\n        if (!docDat.revised[lang]) docDat.revised[lang] = [];\n        docDat.revised[lang].push(uid);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n    }\n    normSave();\n};\n\n$('#mdlAddMed').on('hiden.bs.modal', e => {\n    document.getElementById('inMedSrc0').setAttribute('checked', 'false');\n    document.getElementById('inMedSrc1').setAttribute('checked', 'false');\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n});\n\n$('#mdlPublish').on('show.bs.modal', e => {\n    let revLangs = 0;\n    langs.forEach(l => {\n        let rev = docDat.revised[l] ? docDat.revised[l].length : 0;\n        if (docDat.revised[l] && !docDat.revised[l].includes(uid)) rev++;\n        if (rev >= 2) revLangs++;\n    });\n    if (revLangs == langs.length) {\n        classes(document.getElementById('btnCnfPublish'), \"d-none\");\n        document.getElementById('mdlPublishTxt').innerText = \"Para publicar es necesario que lo hayan aprovado al menos dos personas.\";\n        document.getElementById('frmPublish').classList.add('d-none');\n    } else {\n        document.getElementById('btnCnfPublish').classList.remove(\"d-none\");\n        document.getElementById('mdlPublishTxt').innerText = \"La galleta está lista para publicar\";\n        document.getElementById('frmPublish').classList.remove('d-none');\n        if (docDat.beenPublic) document.getElementById('sendUptCont').classList.remove('d-none');\n    }\n});\n\nfunction finishPub() {\n    setprog('barPublish', 100);\n    classes(document.getElementById('barPublish'), 'bg-success');\n    if (lang == \"es\") {\n        alertTop(\"Publicado correctamente\", 1);\n    } else if (lang == \"en\") {\n        alertTop(\"Published successfully\", 1);\n    }\n    setTimeout(function () {\n        window.open(docDat.url, '_blank').focus();\n    }, 2500);\n    console.log(\"Data saved successfully.\");\n    $('#mdlPublish').modal('hide');\n}\nfunction fillKW() {\n    let n = 0\n    function prog() {\n        setprog('barPublish', n);\n    }\n    keywords = [];\n    keywords.push(docDat.published.toDate().getFullYear().toString());\n    if (docDat.published.toDate().getFullYear().toString() != docDat.ledit.toDate().getFullYear().toString()) keywords.push(docDat.ledit.toDate().getFullYear().toString());\n    n++;\n    prog();\n    docDat.authors.forEach(itm => {\n        itm.substring(1).split(' ').forEach(c => {\n            keywords.push(ultraClean(c, ''));\n        });\n        n += (3 / docDat.authors.length);\n        prog();\n    });\n\n    let toKW = [];\n\n    docDat.title.split(' ').forEach(itm => {\n        toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n    });\n    n++;\n    prog();\n\n    docDat.description.split(' ').forEach(itm => {\n        toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n        n += (3 / docDat.description.split(' ').length);\n        prog();\n    });\n\n    docDat.cont.forEach(sect => {\n        if (sect.type == 'parra') {\n            if (Number(sect.title) > 0) {\n                sect.titleTxt.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            sect.text.split(' ').forEach(itm => {\n                toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                n += (14 / docDat.cont.length / sect.text.split(' ').length);\n                prog();\n            });\n        } else if (sect.type == 'medSimple') {\n            if (sect.alt != \"\") {\n                sect.alt.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            if (sect.caption != \"\") {\n                sect.caption.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            n += (14 / docDat.cont.length);\n            prog();\n        }\n        //@#\n    });\n\n    let rToKW = [];\n    let l = toKW.length;\n    for (let i = 0; i < l; i++) {\n        let wrd = toKW[i];\n        let r = wrd.indexOf(' ');\n        if (r != -1) {\n            wrd.split(' ').forEach(itm => {\n                rToKW.push(itm);\n            });\n            toKW.splice(i, 1);\n            i--;\n            l--;\n        }\n    };\n\n    rToKW.forEach(itm => {\n        toKW.push(itm);\n    });\n    n++\n    prog();\n\n    l = toKW.length;\n    for (let i = 0; i < l; i++) {\n        toKW.splice(i, 1, ultraClean(toKW[i], ''));\n        n += (3 / toKW.length);\n        prog();\n    };\n\n    let kWObj = {}, sum = 0, wCount = 0;\n    let banWrds = [\"1\", \"2\", \"3\", \"4\", \"6\", \"7\", \"8\", \"9\", \"0\", \"tan\", \"ser\", \"los\", \"serian\", \"pero\", \"podemos\", \"su\", \"o\", \"y\", \"e\", \"la\", \"del\", \"es\", \"si\", \"en\", \"otro\", \"de\", \"tendrian\", \"no\", \"se\", \"una\", \"mas\", \"el\", \"a\", \"embargo\", \"las\", \"sin\", \"con\", \"un\", \"para\", \"por\", \"les\", \"\", \"vez\", \"gran\", \"este\", \"esta\", \"estos\", \"estas\", \"nos\", \"al\", \"dio\", \"has\", \"preguntado\", \"el\", \"lo\", \"tu\", \"tus\", \"hacen\", \"otros\", \"para\", \"ellos\", \"ellas\", \"ese\", \"esa\", \"esos\", \"esas\", \"detras\", \"delante\", \"nos\", \"le\", \"muy\", \"casi\", \"son\", \"pues\", \"a\", \"ha\", \"han\", \"fue\"];//@#\n    toKW.forEach(itm => {\n        if (!banWrds.includes(itm)) {\n            let num = kWObj[itm];\n            if (!num) {\n                kWObj[itm] = 1;\n                wCount++;\n            }\n            else kWObj[itm]++;\n            sum++;\n        }\n        n += (3 / toKW.length);\n        prog();\n    });\n\n    for (const [key, value] of Object.entries(kWObj)) {\n        if (value > sum / wCount) {\n            keywords.push(key);\n        }\n        n += (3 / Object.entries(kWObj).length);\n        prog();\n    }\n    docDat.fixedCats.forEach(itm => {\n        keywords.push(itm);\n    });\n    docDat.cats = keywords;\n    console.log(keywords);\n}\n\ndocument.getElementById('btnCnfPublish').onclick = function () {\n    if (docDat.public) return;\n    setprog('barPublish', 0);\n    showEl(document.getElementById(\"barPublishCont\"));\n\n    docDat.public = true;\n    docDat.ledit = new firebase.firestore.Timestamp.now();\n    docDat.beenPublic = true;\n    docDat.revised = {};\n    setprog('barPublish', 31);\n\n    if (!docDat.beenPublic) {\n        docDat.notify = true;\n        docDat.published = new firebase.firestore.Timestamp.now();\n        setprog('barPublish', 62);\n    } else {\n        if (document.getElementById('inSendUpt').checked) {\n            docDat.dledit = true;\n            docDat.notify = true;\n        } else {\n            docDat.dledit = false;\n            docDat.notify = false;\n        }\n        setprog('barPublish', 45);\n        if (document.getElementById('inSendUpt').checked) {\n            docDat.uptMsg = true;\n            docDat.uptDescrip = document.getElementById('inUptDesc').value.trim();\n        } else {\n            docDat.uptMsg = false;\n            docDat.uptDescrip = \"\";\n        }\n        setprog('barPublish', 62);\n    }\n\n    saveDoc().then(() => {\n        rtDb.ref('galletas/' + docId).set({\n            pop: docDat.pop,\n            likes: docDat.likes,\n            favs: docDat.favs\n        }, err => {\n            if (err) {\n                console.log(\"Data could not be saved.\" + err);\n            } else {\n                setprog('barPublish', 84);\n                finishPub();\n            }\n        });\n    }).catch(err => {\n        if (lang == \"es\") {\n            alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n        } else if (lang == \"en\") {\n            alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n        }\n        console.log(err);\n    });\n};"],"names":["$4b4c6c48a7ac760c2be5150e4a5453b9$var$store","firebase","storage","$4b4c6c48a7ac760c2be5150e4a5453b9$var$rtDb","database","$4b4c6c48a7ac760c2be5150e4a5453b9$var$docDat","$4b4c6c48a7ac760c2be5150e4a5453b9$var$docId","$4b4c6c48a7ac760c2be5150e4a5453b9$var$docRef","$4b4c6c48a7ac760c2be5150e4a5453b9$var$savedInterval","$4b4c6c48a7ac760c2be5150e4a5453b9$var$toDel","$4b4c6c48a7ac760c2be5150e4a5453b9$var$toAdd","$4b4c6c48a7ac760c2be5150e4a5453b9$var$lastSave","Date","now","$4b4c6c48a7ac760c2be5150e4a5453b9$var$saved","$4b4c6c48a7ac760c2be5150e4a5453b9$var$toDelMed","$4b4c6c48a7ac760c2be5150e4a5453b9$var$toAddMed","$4b4c6c48a7ac760c2be5150e4a5453b9$var$newMedia","$4b4c6c48a7ac760c2be5150e4a5453b9$var$newMedSrc","$4b4c6c48a7ac760c2be5150e4a5453b9$var$keywords","$4b4c6c48a7ac760c2be5150e4a5453b9$var$translateSimple","text","from","target","translate","app","functions","httpsCallable","data","$4b4c6c48a7ac760c2be5150e4a5453b9$var$saveDoc","console","log","d","published","toDate","month","getFullYear","toString","getMonth","galletasText","lang","url","file","n","prog","$4b4c6c48a7ac760c2be5150e4a5453b9$var$setprog","push","ledit","authors","forEach","itm","substring","split","c","ultraClean","length","toKW","title","replaceAll","trim","description","cont","sect","type","Number","titleTxt","alt","caption","rToKW","l","i","wrd","indexOf","splice","i1","kWObj","sum","wCount","banWrds","includes","key","value","Object","entries","fixedCats","cats","$4b4c6c48a7ac760c2be5150e4a5453b9$var$fillKW","promises","langs","syncUpt","slice","media","java","notify","public","beenPublic","dledit","created","pop","likes","favs","revised","translations","timePrev","cat","idx","catTranslations","db","collection","doc","update","Promise","all","then","$4b4c6c48a7ac760c2be5150e4a5453b9$var$normSave","clearInterval","setInterval","minutes","Math","floor","document","getElementById","innerText","catch","err","code","bar","setAttribute","style","width","$4b4c6c48a7ac760c2be5150e4a5453b9$var$runprog","b","e","setTimeout","$4b4c6c48a7ac760c2be5150e4a5453b9$var$fillMed","innerHTML","col0","createElement","classes","card0","appendChild","img0","src","medUrl","over0","paddingLeft","paddingRight","btns0","medBtnDel","onclick","medFileName","click","medFile","ref","delete","picUrl","alertTop","tooltip","medBtnCopy","tltipTxt","window","open","focus","onmouseout","medBtnUnstar","medBtnStar","col1","btnA1","card1","img1","$4b4c6c48a7ac760c2be5150e4a5453b9$var$render","publishDate","firestore","Timestamp","item","id","div","subt","subf","btnDel","btnEdit","btnCheck","btnAdd","btnTrans","selLang","act","selLangC","opt","get","async","sect1","html","toggleEl","getDate","ld","h","publishTxt","lstUptTxt","authrsTxt","pPub","pLEdit","pAuth","author","fd0","fc0","in0","oninput","fd1","fl1","fc1","in1","fd2","fl2","fc2","in2","fd3","fl3","fr3","f3c0","f3f0","inAu0","inAuL0","f3c1","f3f1","inAu1","inAuL1","f3c2","f3f2","inAu2","inAuL2","uptAuthors","a0","a1","a2","arr","empty","checked","refIdx","refR","cLink","cLinkFrm","cBtn","aRef","pRef","makeRefCite","makeRefWeb","href","changeRef","link","fr0","onchange","inOpt0","rBtnEdit","rBtnCheck","inOpt1","toggleRef","sort","a","linkA","toUpperCase","linkB","rBtnDel","btnPlusRef0","plusRef","btnPlusRef1","p","removeAttribute","inOpt","fr1","f1c0","yt","ratio","iframe","vidUrl","in0L","convUrl","part","substr","help0","in1L","ratios","rat","classList","remove","fig","position","borderRadius","btnChange","capt","fontSize","fontWeight","hasCapt","rcont","rnL","ranR","ranRC0","in3","valL","ranRC1","in2L","loaded","fileFrm","cookiesFSRef","where","snap","addMed","atempt","name","getDownloadURL","res","put","on","bytesTransferred","totalBytes","err1","$","modal","allCats","fat","inp","this","lab","textCats","urlSrch","onSnapshot","add","uid","addEventListener","event","preventDefault","showEl","docId","hideEl","ori","desc","toLowerCase","plusSect","newSect","read","files","FileReader","readAsDataURL","onload","e2","result","fromMillis","getTime","revLangs","rev","uptMsg","uptDescrip","set"],"version":3,"file":"edit.js.map"}