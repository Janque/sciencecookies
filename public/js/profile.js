!function(){var e,t,n,d,c,l,a,i,m,o,s,u,r,g,E=!1,B=!1,y=null;function I(){document.getElementById("inNewNck").value="",document.getElementById("inNwPP").value="",document.getElementById("preVIn").src="",document.getElementById("inNwPPL").innerHTML="Elige una imagen",document.getElementById("prBar").classList.add("d-none"),document.getElementById("frmChngPP").classList.remove("d-none"),document.getElementById("btnCnfNwPP").classList.remove("disabled"),document.getElementById("btnCanNwPP").classList.remove("disabled")}function v(){B?(document.getElementById("btnCanPref").disabled=!1,document.getElementById("btnCnfPref").disabled=!1):(document.getElementById("btnCanPref").setAttribute("disabled","true"),document.getElementById("btnCnfPref").setAttribute("disabled","true"))}function b(e){"pref"==e?(document.getElementById("crdFav").classList.add("d-none"),document.getElementById("navBtnFav").classList.remove("active"),document.getElementById("crdLike").classList.add("d-none"),document.getElementById("navBtnLike").classList.remove("active"),document.getElementById("crdPrfl").classList.add("d-none"),document.getElementById("navBtnPrfl").classList.remove("active"),document.getElementById("navBtnPref").classList.add("active"),document.getElementById("inPubPrfl").checked=i,i?(document.getElementById("inPubEmail").disabled=!1,document.getElementById("inPubFL").disabled=!1,document.getElementById("inPubEmail").checked=vemail,document.getElementById("inPubFL").checked=m):(document.getElementById("inPubEmail").setAttribute("disabled","true"),document.getElementById("inPubFL").setAttribute("disabled","true"),document.getElementById("inPubEmail").checked=!1,document.getElementById("inPubFL").checked=!1),document.getElementById("inNews").checked=o,s=i,u=vemail,r=m,g=o,B=!1,v(),document.getElementById("crdPref").classList.remove("d-none")):"favs"==e?(document.getElementById("crdPrfl").classList.add("d-none"),document.getElementById("navBtnPrfl").classList.remove("active"),document.getElementById("crdLike").classList.add("d-none"),document.getElementById("navBtnLike").classList.remove("active"),document.getElementById("crdPref").classList.add("d-none"),document.getElementById("navBtnPref").classList.remove("active"),function(){document.getElementById("navBtnFav").classList.add("active");let e="";n.forEach((function(t,n){e=e+'<li class="list-group-item text-light border-light bg-transparent"><a class="text-decoration-none text-light" href="galletas/'+d[n]+'">'+t+' <i class="fas fa-link"></i></a></li>'})),document.getElementById("cntFav").innerHTML=e,document.getElementById("crdFav").classList.remove("d-none")}()):"likes"==e?(document.getElementById("crdFav").classList.add("d-none"),document.getElementById("navBtnFav").classList.remove("active"),document.getElementById("crdPrfl").classList.add("d-none"),document.getElementById("navBtnPrfl").classList.remove("active"),document.getElementById("crdPref").classList.add("d-none"),document.getElementById("navBtnPref").classList.remove("active"),function(){document.getElementById("navBtnLike").classList.add("active");let e="";c.forEach((function(t,n){e=e+'<li class="list-group-item text-light border-light bg-transparent"><a class="text-decoration-none text-light" href="galletas/'+l[n]+'">'+t+' <i class="fas fa-link"></i></a></li>'})),document.getElementById("cntLike").innerHTML=e,document.getElementById("crdLike").classList.remove("d-none")}()):(document.getElementById("crdFav").classList.add("d-none"),document.getElementById("navBtnFav").classList.remove("active"),document.getElementById("crdLike").classList.add("d-none"),document.getElementById("navBtnLike").classList.remove("active"),document.getElementById("crdPref").classList.add("d-none"),document.getElementById("navBtnPref").classList.remove("active"),document.getElementById("navBtnPrfl").classList.add("active"),document.getElementById("disPP").setAttribute("onerror","this.src='https://via.placeholder.com/20.webp'"),document.getElementById("disPP").src=photoURL,document.getElementById("disMail").innerHTML=email,document.getElementById("disName").innerHTML=displayName,document.getElementById("crdPrfl").classList.remove("d-none"))}window.loaded=function(){firebase.auth().onAuthStateChanged((function(B){var y;B?(document.getElementById("picUsr").setAttribute("onerror","this.src='https://via.placeholder.com/20.webp'"),document.getElementById("picUsr").src=photoURL,y=urlSrch.get("tab"),0==E?(db.collection("users").doc(uid).get().then((function(E){E.data().fav,E.data().liked,n=E.data().favn,d=E.data().favl,c=E.data().likedn,l=E.data().likedl,e=E.data().points,t=E.data().rank,a=E.data().publicID,i=E.data().visible,vemail=E.data().vemail,m=E.data().vfl,s=E.data().visible,u=E.data().vmail,r=E.data().vfl,o=E.data().rNews,g=E.data().rNews,b(y)})).catch((function(e){console.log(e)})),E=!0):b(y)):$("#mdlRgstr").modal("show")})),document.getElementById("frmChngNk").addEventListener("submit",(function(i){i.preventDefault(),displayName=document.getElementById("inNewNck").value,firebase.auth().currentUser.updateProfile({displayName:displayName}).then((function(){db.collection("usersPublic").doc(a).update({name:displayName,pic:photoURL,email:email,favn:n,favl:d,likedn:c,likedl:l,points:e,rank:t,visible:document.getElementById("inPubPrfl").checked,vemail:document.getElementById("inPubEmail").checked,vfl:document.getElementById("inPubFL").checked}).then((()=>{I(),document.getElementById("disName").innerHTML=newNk})).catch((e=>{console.log(e)}))})).catch((function(e){console.log(e)})),$("#mdlCngNck").modal("hide")})),document.getElementById("frmPref").addEventListener("submit",(function(E){E.preventDefault(),document.getElementById("btnCanPref").setAttribute("disabled","true"),document.getElementById("btnCnfPref").setAttribute("disabled","true"),db.collection("users").doc(uid).update({visible:document.getElementById("inPubPrfl").checked,vemail:document.getElementById("inPubEmail").checked,vfl:document.getElementById("inPubFL").checked,rNews:document.getElementById("inNews").checked}).then((()=>{if(o!=g){let e=db.collection("newsletters").doc("base");g?e.update({emails:firebase.firestore.FieldValue.arrayUnion(email)}):e.update({emails:firebase.firestore.FieldValue.arrayRemove(email)})}i=s,vemail=u,m=r,o=g,db.collection("usersPublic").doc(a).update({name:displayName,pic:photoURL,email:email,favn:n,favl:d,likedn:c,likedl:l,points:e,rank:t,visible:document.getElementById("inPubPrfl").checked,vemail:document.getElementById("inPubEmail").checked,vfl:document.getElementById("inPubFL").checked}).then((()=>{})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)})),"es"==lang?alertTop("Se han guardado los cambios",1):"en"==lang&&alertTop("Changes have been saved",1)})),document.getElementById("frmChngPP").addEventListener("submit",(function(i){i.preventDefault(),document.getElementById("prBar").classList.remove("d-none"),document.getElementById("frmChngPP").classList.add("d-none"),document.getElementById("btnCnfNwPP").classList.add("disabled"),document.getElementById("btnCanNwPP").classList.add("disabled"),function(i){let m=storage.ref("ppics/"+a+"/pp");m.put(i).on("state_changed",(function(e){let t=e.bytesTransferred/e.totalBytes*100;document.getElementById("prBarDis").style.width=t+"%"}),(function(e){I(),$("#mdlCngPP").modal("hide"),"es"==lang?alertTop("<strong>¡Ha ocurrido un error!</strong> Revisa que tu archivo cumpla los límites y sea una imagen e intenta de nuevo.",2):"en"==lang&&alertTop("<strong>¡There has been an error!</strong> Check that your file meets the limits and is an image and try again.",2)}),(function(){document.getElementById("picUsr").src=document.getElementById("preVIn").src,document.getElementById("disPP").src=document.getElementById("preVIn").src,I(),$("#mdlCngPP").modal("hide"),m.getDownloadURL().then((i=>{i=i.replace("pp?","pp_200x200?"),firebase.auth().currentUser.updateProfile({photoURL:i}).then((()=>{db.collection("usersPublic").doc(a).update({pic:i,email:email,favn:n,favl:d,likedn:c,likedl:l,points:e,rank:t}).then((()=>{})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)}))}))}(y)})),document.getElementById("inNwPP").addEventListener("change",(function(e){var t;y=e.target.files[0],document.getElementById("inNwPPL").innerHTML=y.name,(t=new FileReader).readAsDataURL(y),t.onload=function(e){document.getElementById("preVIn").src=e.target.result}}))},document.getElementById("inPubPrfl").onclick=function(){s?(document.getElementById("inPubEmail").setAttribute("disabled","true"),document.getElementById("inPubFL").setAttribute("disabled","true"),document.getElementById("inPubEmail").checked=!1,document.getElementById("inPubFL").checked=!1):(document.getElementById("inPubEmail").disabled=!1,document.getElementById("inPubFL").disabled=!1,document.getElementById("inPubEmail").checked=u,document.getElementById("inPubFL").checked=r),s=!s,B=!(document.getElementById("inPubPrfl").checked==i&&document.getElementById("inPubEmail").checked==vemail&&document.getElementById("inPubFL").checked==m&&document.getElementById("inNews").checked==o),v()},document.getElementById("inPubEmail").onclick=function(){u=!u,B=!(document.getElementById("inPubPrfl").checked==i&&document.getElementById("inPubEmail").checked==vemail&&document.getElementById("inPubFL").checked==m&&document.getElementById("inNews").checked==o),v()},document.getElementById("inPubFL").onclick=function(){r=!r,B=!(document.getElementById("inPubPrfl").checked==i&&document.getElementById("inPubEmail").checked==vemail&&document.getElementById("inPubFL").checked==m&&document.getElementById("inNews").checked==o),v()},document.getElementById("inNews").onclick=function(){g=!g,B=!(document.getElementById("inPubPrfl").checked==i&&document.getElementById("inPubEmail").checked==vemail&&document.getElementById("inPubFL").checked==m&&document.getElementById("inNews").checked==o),v()}}();
//# sourceMappingURL=profile.js.map
