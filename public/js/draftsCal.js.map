{"mappings":"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","sources":["src/js/draftsCal.js"],"sourcesContent":["window.loaded = function loaded() {\n    initSrch(false);\n}\n\nconst previewLim = 21;\n//Get search params\nvar nxtp = false, paglast = [null], page = 1;\nvar allChk = false;\nfunction initSrch(stAf) {\n    if (page > 1 && stAf && paglast[page - 1] != null && paglast[page - 1] != undefined) {\n        srchRef = calendarsFSRef.orderBy('published', 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n    } else {\n        srchRef = calendarsFSRef.orderBy('published', 'desc').limit(previewLim);\n    }\n    shwSrch();\n}\nfunction shwSrch() {\n    document.getElementById('crdContainer').innerHTML = \"\";\n    srchRef.get().then(snap => {\n        let docs = snap.docs;\n        nxtp = false;\n        docs.forEach((doc, idx) => {\n            let dat = doc.data();\n\n            let col = document.createElement('col');\n            classes(col, 'col');\n            classes(col, 'mb-4');\n\n            let card = document.createElement('div');\n            classes(card, \"card text-dark bg-light h-100 cardBorder\");\n            if (dat.public) {\n                classes(card, 'border-success');\n            } else {\n                classes(card, 'border-secondary');\n            }\n\n            let h = document.createElement('div');\n            classes(h, \"card-header bg-light m-0 py-0 text-right\")\n            let row = document.createElement('div');\n            classes(row, 'row');\n            classes(row, 'justify-content-between');\n            if (!dat.public) {\n                let col0 = document.createElement('div');\n                classes(col0, 'col-auto');\n                classes(col0, 'p-0');\n                let badge = document.createElement('span');\n                classes(badge, 'badge');\n                classes(badge, 'badge-warning');\n                badge.innerText = 'Pendiente';\n                col0.appendChild(badge);\n                row.appendChild(col0);\n            }\n            let col1 = document.createElement('div');\n            classes(col1, 'col-auto');\n            classes(col1, 'p-0');\n            classes(col1, 'ml-auto');\n            let drp = document.createElement('div');\n            classes(drp, 'dropdown');\n            let btndrp = document.createElement('button');\n            classes(btndrp, 'btn');\n            classes(btndrp, 'btn-light');\n            btndrp.setAttribute('type', 'button');\n            btndrp.setAttribute('data-toogle', 'dropdown');\n            btndrp.setAttribute('aria-haspopup', \"true\");\n            btndrp.setAttribute('aria-expanded', \"false\");\n            btndrp.innerHTML = '<i class=\"fas fa-ellipsis-h\"></i>';\n            btndrp.onclick = function () {\n                if (document.getElementById(\"drpMenu\" + doc.id).classList.contains('show')) {\n                    $(\"#drpMenu\" + doc.id).dropdown('hide');\n                } else {\n                    $(\"#drpMenu\" + doc.id).dropdown('show');\n                    setTimeout(function () {\n                        $(\"#drpMenu\" + doc.id).dropdown('hide');\n                    }, 5000);\n                }\n            };\n            drp.appendChild(btndrp);\n            let drpmenu = document.createElement('div');\n            classes(drpmenu, 'dropdown-menu');\n            classes(drpmenu, 'dropdown-menu-right');\n            drpmenu.setAttribute('id', \"drpMenu\" + doc.id);\n            let drpitm0 = document.createElement('button');\n            classes(drpitm0, 'dropdown-item');\n            drpitm0.onclick = function () {\n                if (lang == \"es\") {\n                    window.location.href = '../editar-calendario?id=' + doc.id;\n                } else if (lang == \"en\") {\n                    window.location.href = '../edit-calendar?id=' + doc.id;\n                }\n            };\n            drpitm0.innerHTML = 'Editar <i class=\"fas fa-edit\"></i>';\n            drpmenu.appendChild(drpitm0);\n            let drpitm1 = document.createElement('button');\n            classes(drpitm1, 'dropdown-item');\n            drpitm1.onclick = function () {\n                window.open('../vista-email-calendario/' + doc.id, '_blank').focus();\n            };\n            drpitm1.innerHTML = 'Vista correo <i class=\"fas fa-envelope\"></i>';\n            drpmenu.appendChild(drpitm1);\n            let drpitm2 = document.createElement('button');\n            if (dat.public) {\n                classes(drpitm2, 'dropdown-item');\n                drpitm2.onclick = function () {\n                    window.open(dat.url, '_blank').focus();\n                };\n                drpitm2.innerHTML = 'Ver calendario <i class=\"fas fa-eye\"></i>';\n                drpmenu.appendChild(drpitm2);\n            }\n            drp.appendChild(drpmenu);\n            col1.appendChild(drp);\n            row.appendChild(col1);\n            h.appendChild(row);\n            card.appendChild(h);\n\n            let noImgTxt;\n            if (lang == \"es\") {\n                noImgTxt = \"No hay imagen\";\n            } else if (lang == \"en\") {\n                noImgTxt = \"No image\";\n            }\n\n            let a = document.createElement('a');\n            if (lang == \"es\") {\n                a.href = '../editar-calendario?id=' + doc.id;\n            } else if (lang == \"en\") {\n                a.href = '../edit-calendar?id=' + doc.id;\n            }\n            classes(a, 'text-decoration-none');\n            classes(a, 'text-dark');\n            let img = document.createElement('img');\n            img.src = dat.picUrl;\n            classes(img, 'card-img-top');\n            img.alt = noImgTxt;\n            a.appendChild(img);\n            let cbody = document.createElement('div');\n            classes(cbody, 'card-body');\n            cbody.innerHTML = '<h3 class=\"card-title\">' + dat.title + '</h3>\\n<p class=\"card-text\">' + dat.description + '</p>\\n'\n            a.appendChild(cbody);\n            card.appendChild(a);\n\n            col.appendChild(card);\n            document.getElementById('crdContainer').appendChild(col);\n            if (idx == previewLim - 1) {\n                if (paglast[page] == undefined || paglast[page] == null) {\n                    paglast.push(docs[docs.length - 1]);\n                } else if (paglast[page] != docs[docs.length - 1]) {\n                    paglast.splice(page, 1, docs[docs.length - 1]);\n                }\n                nxtp = true;\n                document.getElementById(\"pgNavT\").classList.remove('d-none');\n                document.getElementById(\"pgNavB\").classList.remove('d-none');\n            }\n        });\n        if (!nxtp) {\n            document.getElementById(\"pgTNxt\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBNxt\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTNxt\").removeAttribute('disabled');\n            document.getElementById(\"pgBNxt\").removeAttribute('disabled');\n        }\n        if (page == 1) {\n            document.getElementById(\"pgTPrv\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBPrv\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTPrv\").removeAttribute('disabled');\n            document.getElementById(\"pgBPrv\").removeAttribute('disabled');\n        }\n    }).catch(err => { console.log(err) });\n}\n\ndocument.getElementById(\"pgTPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgBPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgTNxt\").onclick = function () { reSrch(1); };\ndocument.getElementById(\"pgBNxt\").onclick = function () { reSrch(1); };\nfunction reSrch(np) {\n    if (page < 1 && np == -1) return;\n    if (!nxtp && np == 1) return;\n    page += np;\n    document.getElementById('disPgT').innerText = page;\n    document.getElementById('disPgB').innerText = page;\n    initSrch(true);\n    document.getElementById(\"cookCnt\").scrollIntoView();\n}"],"names":["window","loaded","$ee363275fe453b4d9b3edd0caa96b9dd$var$initSrch","$ee363275fe453b4d9b3edd0caa96b9dd$var$nxtp","$ee363275fe453b4d9b3edd0caa96b9dd$var$paglast","$ee363275fe453b4d9b3edd0caa96b9dd$var$page","stAf","undefined","srchRef","calendarsFSRef","orderBy","startAfter","limit","document","getElementById","innerHTML","get","then","snap","docs","forEach","doc","idx","dat","data","col","createElement","classes","card","public","h","row","col0","badge","innerText","appendChild","col1","drp","btndrp","setAttribute","onclick","id","classList","contains","$","dropdown","setTimeout","drpmenu","drpitm0","lang","location","href","drpitm1","open","focus","noImgTxt","drpitm2","url","a","img","src","picUrl","alt","cbody","title","description","$ee363275fe453b4d9b3edd0caa96b9dd$var$previewLim","push","length","splice","remove","removeAttribute","catch","err","console","log","$ee363275fe453b4d9b3edd0caa96b9dd$var$reSrch","np","scrollIntoView"],"version":3,"file":"draftsCal.js.map"}