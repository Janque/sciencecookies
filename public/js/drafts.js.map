{"mappings":"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","sources":["src/js/drafts.js"],"sourcesContent":["var rtDB = firebase.database();\n\nwindow.loaded = function loaded() {\n    initSrch(false);\n    function newSrch() {\n        let srchStr = '?k=';\n        let wordArr = document.getElementById('srcBox').value.split(' ');\n        srchStr = srchStr + wordArr[0];\n        for (let i = 1; i < wordArr.length; i++) {\n            srchStr = srchStr + '+' + wordArr[i];\n        }\n        srchStr = srchStr + '&o=' + document.getElementById('inOrd').value;\n        srchStr = srchStr + '&d=' + document.getElementById('inDir').value;\n        window.location.href = srchStr;\n    }\n    document.getElementById(\"frmSrch\").addEventListener(\"submit\", e => {\n        e.preventDefault();\n        newSrch();\n    });\n\n    function plusCookie() {\n        let title = document.getElementById('inTitle').value.trim();\n        let file = document.getElementById('inFile').value;\n        cookiesFSRef.where('file', '==', file).limit(1).get().then(snap => {\n            if (!snap.empty) {\n                if (lang == \"es\") {\n                    alertTop(\"Ese nombre de archivo ya esta en uso.\", 0, 'alrtPlusContainer');\n                } else if (lang == \"en\") {\n                    alertTop(\"That file name is already in use.\", 0, 'alrtPlusContainer');\n                }\n            } else {\n                document.getElementById('btnPlusConf').classList.add('d-none');\n                document.getElementById('btnCanPlus0').setAttribute('disabled', 'true');\n                document.getElementById('btnCanPlus1').setAttribute('disabled', 'true');\n                document.getElementById('barCont').classList.remove('d-none');\n                setprog('3');\n                let id;\n                rtDB.ref('tdaysID').transaction(today => {\n                    if (today) {\n                        today.last++;\n                        id = today.today;\n                        if (today.last < 10) id += '0';\n                        id += today.last;\n                    }\n                    return today;\n                }, err => {\n                    if (err) {\n                        setprog('0');\n                        if (lang == \"es\") {\n                            alertTop(\"<strong>Ocurrió un error: \" + err + \".</strong><br>LLamar a Javier.\", 0, 'alrtPlusContainer');\n                        } else if (lang == \"en\") {\n                            alertTop(\"<strong>There has been an error: \" + err + \".</strong><br>Call Javier.\", 0, 'alrtPlusContainer');\n                        }\n                        console.log(err);\n                    } else {\n                        setprog('52');\n                        const promises = [];\n                        langs.forEach((l, i) => {\n                            setprog(30 / langs.length * i);\n                            promises.push(db.collection('cookies/langs/' + l).doc(id).set({\n                                authors: [author],\n                                cont: [\n                                    {\n                                        type: \"head\",\n                                        title: title,\n                                        author: [author]\n                                    },\n                                    {\n                                        type: \"ref\",\n                                        ref: []\n                                    }\n                                ],\n                                media: [],\n                                picUrl: \"\",\n                                title: title,\n                                description: \"\",\n                                file: file,\n                                owner: uid,\n                                java: \"\",\n                                revised: {},\n                                notify: false,\n                                public: false,\n                                beenPublic: false,\n                                dledit: false,\n                                created: new firebase.firestore.Timestamp.now(),\n                                ledit: new firebase.firestore.Timestamp.now(),\n                                published: new firebase.firestore.Timestamp.now(),\n                                pop: 0,\n                                likes: 0,\n                                favs: 0,\n                                url: \"\",\n                                fixedCats: [],\n                                cats: [],\n                                translations: {\n                                    es: file\n                                }\n                            }));\n                        });\n                        Promise.all(promises).then(() => {\n                            setprog('90');\n                            setTimeout(function () {\n                                setprog('100');\n                                document.getElementById('bar').classList.add('bg-success');\n                                if (lang == \"es\") {\n                                    alertTop(`Creado con exito. Redirigiendo...<br>Si no te redirige automáticamente, haz <a class=\"btn-link-scckie\" href=\"../editar?id=${id}\">click aqui</a>.`, 1, 'alrtPlusContainer');\n                                } else if (lang == \"en\") {\n                                    alertTop(`Successfully created. Redirigiendo...<br>If you aren't automatically redirected, <a class=\"btn-link-scckie\" href=\"../edit?id=${id}\">click here</a>.`, 1, 'alrtPlusContainer');\n                                }\n                            }, 1000);\n                            setTimeout(function () {\n                                if (lang == \"es\") {\n                                    window.location.href = '../editar?id=' + id;\n                                } else if (lang == \"en\") {\n                                    window.location.href = '../edit?id=' + id;\n                                }\n                            }, 3000);\n                        }).catch(err => console.log(err));\n                    }\n                });\n            }\n        }).catch(err => console.log(err));\n    }\n    document.getElementById(\"frmPlus\").addEventListener(\"submit\", e => {\n        e.preventDefault();\n        plusCookie();\n    });\n}\n\nconst previewLim = 21;\n//Get search params\nvar kywords, srtOrd, desc, srchRef;\nvar nxtp = false, paglast = [null], page = 1;\nvar allChk = false;\nfunction initSrch(stAf) {\n    kywords = \"\";\n    if (urlSrch.get('k') != null) {\n        kywords = urlSrch.get('k').replace('+', ' ');\n        document.getElementById('srcBox').value = kywords;\n    };\n    document.getElementById(\"inSrchOrd0\").selected = false;\n    document.getElementById(\"inSrchOrd1\").selected = false;\n    document.getElementById(\"inSrchOrd2\").selected = false;\n    document.getElementById(\"inSrchOrd3\").selected = false;\n    srtOrd = urlSrch.get('o');\n    switch (srtOrd) {\n        case 'created':\n            document.getElementById(\"inSrchOrd0\").selected = true;\n            break;\n        case 'published':\n            document.getElementById(\"inSrchOrd1\").selected = true;\n            break;\n        case 'ledit':\n            document.getElementById(\"inSrchOrd2\").selected = true;\n            break;\n        case 'pop':\n            document.getElementById(\"inSrchOrd3\").selected = true;\n            break;\n        default:\n            srtOrd = 'created';\n            break;\n    }\n    document.getElementById(\"inSrchDir0\").selected = false;\n    document.getElementById(\"inSrchDir1\").selected = false;\n    desc = urlSrch.get('d');\n    if (desc == 'asc') {\n        desc = false;\n        document.getElementById(\"inSrchDir1\").selected = true;\n    } else {\n        desc = true;\n        document.getElementById(\"inSrchDir0\").selected = true;\n    }\n    if (page > 1 && stAf && paglast[page - 1] != null && paglast[page - 1] != undefined) {\n        if (kywords == undefined || kywords == null || kywords == \"\") {\n            if (!desc) {\n                srchRef = cookiesFSRef.orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n            }\n        } else {\n            if (!desc) {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n            } else {\n                srchRef = dcookiesFSRef.where('title', '==', kywords).orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n            }\n        }\n    } else {\n        if (kywords == undefined || kywords == null || kywords == \"\") {\n            if (!desc) {\n                srchRef = cookiesFSRef.orderBy(srtOrd).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.orderBy(srtOrd, 'desc').limit(previewLim);\n            }\n        } else {\n            if (!desc) {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd, 'desc').limit(previewLim);\n            }\n        }\n    }\n    shwSrch();\n}\nfunction shwSrch() {\n    if ((kywords == undefined || kywords == null || kywords == \"\") && page == 1) {\n        document.getElementById('crdContainer').innerHTML = `<div class=\"col mb-4\">\n            <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n                <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlPlus\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\">\n                    <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n                </a>\n            </div>\n        </div>`;\n    } else {\n        document.getElementById('crdContainer').innerHTML = \"\";\n    }\n    srchRef.get().then(snap => {\n        let docs = snap.docs;\n        nxtp = false;\n        let idx = 0;\n        if (docs.length < 1) {\n            document.getElementById('crdContainer').innerHTML = `<h5 class=\"mt-0 text-center\">No se han encontrado resultados</h5><div class=\"col mb-4\">\n            <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n                <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlPlus\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\">\n                    <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n                </a>\n            </div>\n        </div>`;\n        }\n        docs.forEach(function (doc) {\n            let col = document.createElement('col');\n            col.classList.add('col');\n            col.classList.add('mb-4');\n\n            let card = document.createElement('div');\n            let helpStr = \"card text-dark bg-light h-100 cardBorder\";\n            helpStr = helpStr.split(' ');\n            helpStr.forEach(clas => {\n                card.classList.add(clas);\n            });\n            if (doc.data().owner == uid) {\n                card.classList.add('border-success');\n            } else {\n                card.classList.add('border-secondary');\n            }\n\n            let h = document.createElement('div');\n            helpStr = \"card-header bg-light m-0 py-0 text-right\";\n            helpStr = helpStr.split(' ');\n            helpStr.forEach(clas => {\n                h.classList.add(clas);\n            });\n            let row = document.createElement('div');\n            row.classList.add('row');\n            row.classList.add('justify-content-between');\n            if (!doc.data().public) {\n                let col0 = document.createElement('div');\n                col0.classList.add('col-auto');\n                col0.classList.add('p-0');\n                let badge = document.createElement('span');\n                badge.classList.add('badge');\n                badge.classList.add('badge-warning');\n                badge.innerText = 'Draft';\n                col0.appendChild(badge);\n                row.appendChild(col0);\n            }\n            let col1 = document.createElement('div');\n            col1.classList.add('col-auto');\n            col1.classList.add('p-0');\n            col1.classList.add('ml-auto');\n            let drp = document.createElement('div');\n            drp.classList.add('dropdown');\n            let btndrp = document.createElement('button');\n            btndrp.classList.add('btn');\n            btndrp.classList.add('btn-light');\n            btndrp.setAttribute('type', 'button');\n            btndrp.setAttribute('data-toogle', 'dropdown');\n            btndrp.setAttribute('aria-haspopup', \"true\");\n            btndrp.setAttribute('aria-expanded', \"false\");\n            btndrp.innerHTML = '<i class=\"fas fa-ellipsis-h\"></i>';\n            btndrp.onclick = function () {\n                if (document.getElementById(\"drpMenu\" + doc.id).classList.contains('show')) {\n                    $(\"#drpMenu\" + doc.id).dropdown('hide');\n                } else {\n                    $(\"#drpMenu\" + doc.id).dropdown('show');\n                    setTimeout(function () {\n                        $(\"#drpMenu\" + doc.id).dropdown('hide');\n                    }, 5000);\n                }\n            };\n            drp.appendChild(btndrp);\n            let drpmenu = document.createElement('div');\n            drpmenu.classList.add('dropdown-menu');\n            drpmenu.classList.add('dropdown-menu-right');\n            drpmenu.setAttribute('id', \"drpMenu\" + doc.id);\n            let drpitm0 = document.createElement('button');\n            drpitm0.classList.add('dropdown-item');\n            drpitm0.onclick = function () {\n                if (lang == \"es\") {\n                    window.location.href = '../editar?id=' + doc.id;\n                } else if (lang == \"en\") {\n                    window.location.href = '../edit?id=' + doc.id;\n                }\n            };\n            if (lang == \"es\") {\n                drpitm0.innerHTML = 'Editar <i class=\"fas fa-edit\"></i>';\n            } else if (lang == \"en\") {\n                drpitm0.innerHTML = 'Edit <i class=\"fas fa-edit\"></i>';\n            }\n            drpmenu.appendChild(drpitm0);\n            let drpitm1 = document.createElement('button');\n            drpitm1.classList.add('dropdown-item');\n            drpitm1.onclick = function () {\n                window.open('../vista-email/' + doc.data().file, '_blank').focus();\n            };\n            drpitm1.innerHTML = 'Vista correo <i class=\"fas fa-envelope\"></i>';\n            drpmenu.appendChild(drpitm1);\n            let drpitm2 = document.createElement('button');\n            let drpitm3 = document.createElement('button');\n            let d = doc.data().created.toDate();\n            if (doc.data().public) {\n                drpitm2.classList.add('dropdown-item');\n                drpitm2.onclick = function () {\n                    let month = d.getFullYear().toString();\n                    if (d.getMonth() < 9) {\n                        month += '0';\n                    }\n                    month += (d.getMonth() + 1);\n                    window.open(doc.data().url, '_blank').focus();\n                };\n                drpitm2.innerHTML = 'Ver artículo <i class=\"fas fa-eye\"></i>';\n                drpmenu.appendChild(drpitm2);\n                /*drpitm3.classList.add('dropdown-item');@# sync langs\n                drpitm3.onclick = function () {\n                    cookiesFSRef.doc(doc.id).update({\n                        public: false\n                    });\n                };\n                drpitm3.innerHTML = 'Volver privado <i class=\"fas fa-lock\"></i>';*/\n                drpmenu.appendChild(drpitm3);\n            }\n            drp.appendChild(drpmenu);\n            col1.appendChild(drp);\n            row.appendChild(col1);\n            h.appendChild(row);\n            card.appendChild(h);\n\n\n            let authTxt, noImgTxt, creatTxt, uptTxt, pubTxt, noPubTxt;\n            if (lang == \"es\") {\n                authTxt = \"Autor(es)\";\n                noImgTxt = \"No hay imagen\";\n                noPubTxt = \"Sin publicar\";\n                creatTxt = \"Creado: \";\n                uptTxt = \"Actualizado: \";\n                pubTxt = \"Publicado: \";\n            } else if (lang == \"en\") {\n                authTxt = \"Author(s)\";\n                noImgTxt = \"No image\";\n                noPubTxt = \"Not public\";\n                creatTxt = \"Created: \";\n                uptTxt = \"Updated: \";\n                pubTxt = \"Published: \";\n            }\n\n            let a = document.createElement('a');\n            if (lang == \"es\") {\n                a.href = '../editar?id=' + doc.id;\n            } else if (lang == \"en\") {\n                a.href = '../edit?id=' + doc.id;\n            }\n            a.classList.add('text-decoration-none');\n            a.classList.add('text-dark');\n            let img = document.createElement('img');\n            img.src = doc.data().picUrl;\n            img.classList.add('card-img-top');\n            img.alt = noImgTxt;\n            a.appendChild(img);\n            let cbody = document.createElement('div');\n            cbody.classList.add('card-body');\n            cbody.innerHTML = '<h3 class=\"card-title\">' + doc.data().title + '</h3>\\n<p>' + authTxt + ':' + doc.data().authors + '</p>\\n<p class=\"card-text\">' + doc.data().description + '</p>\\n'\n            a.appendChild(cbody);\n            let f = document.createElement('div');\n            f.classList.add('card-footer');\n            f.classList.add('text-muted');\n            f.innerHTML = '<p>' + creatTxt + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            d = doc.data().ledit.toDate();\n            f.innerHTML += '<p>' + uptTxt + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            if (doc.data().public) {\n                d = doc.data().published.toDate();\n                f.innerHTML += '<p>' + pubTxt + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            } else {\n                f.innerHTML += '<p>' + noPubTxt + '</p>\\n';\n            }\n            a.appendChild(f)\n            card.appendChild(a);\n\n            col.appendChild(card);\n            document.getElementById('crdContainer').appendChild(col);\n            if (idx == previewLim - 1) {\n                if (paglast[page] == undefined || paglast[page] == null) {\n                    paglast.push(docs[docs.length - 1]);\n                } else if (paglast[page] != docs[docs.length - 1]) {\n                    paglast.splice(page, 1, docs[docs.length - 1]);\n                }\n                nxtp = true;\n                document.getElementById(\"pgNavT\").classList.remove('d-none');\n                document.getElementById(\"pgNavB\").classList.remove('d-none');\n            }\n            idx++;\n        });\n        if (!nxtp) {\n            document.getElementById(\"pgTNxt\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBNxt\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTNxt\").removeAttribute('disabled');\n            document.getElementById(\"pgBNxt\").removeAttribute('disabled');\n        }\n        if (page == 1) {\n            document.getElementById(\"pgTPrv\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBPrv\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTPrv\").removeAttribute('disabled');\n            document.getElementById(\"pgBPrv\").removeAttribute('disabled');\n        }\n    }).catch(err => { console.log(err) });\n}\n\ndocument.getElementById(\"pgTPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgBPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgTNxt\").onclick = function () { reSrch(1); };\ndocument.getElementById(\"pgBNxt\").onclick = function () { reSrch(1); };\nfunction reSrch(np) {\n    if (page < 1 && np == -1) return;\n    if (!nxtp && np == 1) return;\n    page += np;\n    document.getElementById('disPgT').innerText = page;\n    document.getElementById('disPgB').innerText = page;\n    initSrch(true);\n    document.getElementById(\"cookCnt\").scrollIntoView();\n}\n\ndocument.getElementById('btnPlus').onclick = function () {\n    $('#mdlPlus').modal('show');\n};\n\nvar inFileChanged = false;\n\nfunction cancelPlus() {\n    document.getElementById('inTitle').value = \"\";\n    document.getElementById('inFile').value = \"\";\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n    inFileChanged = false;\n}\ndocument.getElementById('btnCanPlus0').onclick = function () {\n    cancelPlus();\n};\ndocument.getElementById('btnCanPlus1').onclick = function () {\n    cancelPlus();\n};\n\ndocument.getElementById('inTitle').onfocus = function () {\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n};\ndocument.getElementById('inTitle').onchange = function () {\n    document.getElementById('inTitle').value = document.getElementById('inTitle').value.trim();\n    if (inFileChanged) return;\n    let title = document.getElementById('inTitle').value;\n    title = rmDiacs(title);\n    title = title.toLowerCase();\n    document.getElementById('inFile').value = title.replaceAll(' ', '-');\n};\ndocument.getElementById('inFile').onfocus = function () {\n    inFileChanged = true;\n};\ndocument.getElementById('inFile').onchange = function () {\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n};\n\nfunction setprog(n) {\n    document.getElementById('bar').setAttribute('aria-valuenow', n);\n    document.getElementById('bar').style.width = n + '%';\n    document.getElementById('bar').innerText = n + '%';\n}\n\ndocument.getElementById('inFile').oninput = function () {\n    document.getElementById('inFile').value = rmDiacs(document.getElementById('inFile').value.trim().replaceAll(' ', '-'));\n}"],"names":["$6191ac609b4ef71647305280d672b2a9$var$rtDB","firebase","database","window","loaded","$6191ac609b4ef71647305280d672b2a9$var$initSrch","document","getElementById","addEventListener","e","preventDefault","srchStr","wordArr","value","split","i","length","location","href","newSrch","title","trim","file","cookiesFSRef","where","limit","get","then","snap","empty","id","classList","add","setAttribute","remove","$6191ac609b4ef71647305280d672b2a9$var$setprog","ref","transaction","today","last","err","lang","alertTop","console","log","promises","langs","forEach","l","push","db","collection","doc","set","authors","author","cont","type","media","picUrl","description","owner","uid","java","revised","notify","public","beenPublic","dledit","created","firestore","Timestamp","now","ledit","published","pop","likes","favs","url","fixedCats","cats","translations","es","Promise","all","setTimeout","catch","err1","plusCookie","$6191ac609b4ef71647305280d672b2a9$var$previewLim","$6191ac609b4ef71647305280d672b2a9$var$kywords","$6191ac609b4ef71647305280d672b2a9$var$srtOrd","$6191ac609b4ef71647305280d672b2a9$var$desc","$6191ac609b4ef71647305280d672b2a9$var$srchRef","$6191ac609b4ef71647305280d672b2a9$var$nxtp","$6191ac609b4ef71647305280d672b2a9$var$paglast","$6191ac609b4ef71647305280d672b2a9$var$page","stAf","urlSrch","replace","selected","undefined","orderBy","startAfter","dcookiesFSRef","innerHTML","docs","idx","col","createElement","card","helpStr","clas","data","h","row","col0","badge","innerText","appendChild","col1","drp","btndrp","onclick","contains","$","dropdown","drpmenu","drpitm0","drpitm1","open","focus","authTxt","noImgTxt","creatTxt","uptTxt","pubTxt","noPubTxt","drpitm2","drpitm3","d","toDate","month","getFullYear","toString","getMonth","a","img","src","alt","cbody","f","getDate","splice","removeAttribute","$6191ac609b4ef71647305280d672b2a9$var$shwSrch","$6191ac609b4ef71647305280d672b2a9$var$reSrch","np","scrollIntoView","modal","$6191ac609b4ef71647305280d672b2a9$var$inFileChanged","$6191ac609b4ef71647305280d672b2a9$var$cancelPlus","n","style","width","onfocus","onchange","rmDiacs","toLowerCase","replaceAll","oninput"],"version":3,"file":"drafts.js.map"}