!function(){var e;var t,n,l,d,c=[],o=!1,a=[null],i=1,r=!1;function m(m){c=allCats.slice(),t=[""],null!=urlSrch.get("c")&&(c=(c=urlSrch.get("c").split("+"))[0].split(" ")),null!=urlSrch.get("k")&&(t=urlSrch.get("k").split("+"),document.getElementById("srcBox").value=urlSrch.get("k").replace("+"," ")),(t=c.concat(t)).forEach((function(e,n){let l=e.toLowerCase();l=rmDiacs(l),t.splice(n,1,l)}));let s=!0;for(let n=0;n<e;n++)-1!=t.indexOf(document.getElementById("cat"+n).value)?document.getElementById("cat"+n).checked=!0:s=!1;s&&(r=!0,document.getElementById("catA").checked=!0),document.getElementById("inSrchOrd1").selected=!1,document.getElementById("inSrchOrd2").selected=!1,document.getElementById("inSrchOrd3").selected=!1,null!=(n=urlSrch.get("o"))?("new"==n&&(n="ledit",l=!0,document.getElementById("inSrchOrd1").selected=!0),"old"==n&&(n="ledit",l=!1,document.getElementById("inSrchOrd2").selected=!0),"pop"==n&&(l=!0,document.getElementById("inSrchOrd3").selected=!0)):(n="ledit",l=!0),d=i>1&&m&&null!=a[i-1]&&null!=a[i-1]?l?cookiesFSRef.where("public","==",!0).where("cats","array-contains-any",t).orderBy(n,"desc").startAfter(a[i-1]).limit(20):cookiesFSRef.where("public","==",!0).where("cats","array-contains-any",t).orderBy(n).startAfter(a[i-1]).limit(20):l?cookiesFSRef.where("public","==",!0).where("cats","array-contains-any",t).orderBy(n,"desc").limit(20):cookiesFSRef.where("public","==",!0).where("cats","array-contains-any",t).orderBy(n).limit(20),document.getElementById("cookiesCont").innerHTML="",d.get().then((e=>{let t=e.docs;if(o=!1,0==t.length){let e=document.createElement("a");classes(e,"text-decoration-none text-light");let t=document.createElement("div");classes(t,"media mb-3");let n=document.createElement("div");classes(n,"media-body"),n.innerHTML='<h5 class="mt-0 text-center">No se han encontrado resultados</h5>',e.appendChild(t),t.appendChild(n),document.getElementById("cookiesCont").appendChild(e)}t.forEach(((e,n)=>{if(0!=n){let e=document.createElement("div");classes(e,"dropdown-divider d-md-none"),document.getElementById("cookiesCont").appendChild(e)}let l=document.createElement("a");classes(l,"text-decoration-none text-light"),l.href=e.data().url;let d=document.createElement("div");classes(d,"media mb-3");let c=document.createElement("img");classes(c,"align-self-center mr-3"),c.style.width="64px",c.style.height="64px",c.src=e.data().picUrl;let r=document.createElement("div");classes(r,"media-body");let m=document.createElement("h5");classes(m,"mt-0"),m.innerHTML=e.data().title,r.appendChild(m);let s=document.createElement("p");s.innerHTML=e.data().description,r.appendChild(s);let u=document.createElement("p");if(classes(u,"my-0"),e.data().dledit){let t=e.data().ledit.toDate();u.innerText="Actualizado: "+t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}else{let t=e.data().published.toDate();u.innerText="Publicado: "+t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}r.appendChild(u);let g=document.createElement("p");classes(g,"mt-0"),g.innerText=" Autor(es):"+e.data().authors,r.appendChild(g),l.appendChild(d),d.appendChild(c),d.appendChild(r),document.getElementById("cookiesCont").appendChild(l),19==n&&(null==a[i]||null==a[i]?a.push(t[t.length-1]):a[i]!=t[t.length-1]&&a.splice(i,1,t[t.length-1]),o=!0,document.getElementById("pgNavT").classList.remove("d-none"),document.getElementById("pgNavB").classList.remove("d-none"))})),o?(document.getElementById("pgTNxt").removeAttribute("disabled"),document.getElementById("pgBNxt").removeAttribute("disabled")):(document.getElementById("pgTNxt").setAttribute("disabled","true"),document.getElementById("pgBNxt").setAttribute("disabled","true")),1==i?(document.getElementById("pgTPrv").setAttribute("disabled","true"),document.getElementById("pgBPrv").setAttribute("disabled","true")):(document.getElementById("pgTPrv").removeAttribute("disabled"),document.getElementById("pgBPrv").removeAttribute("disabled"))})).catch((e=>{console.log(e)}));const u=[];let g=[],h=null;for(let e=0;e<t.length;e++){let n=t[e];if(""==n||" "==n)continue;const l=firebase.database().ref("searchQs/"+n).transaction((e=>(e?(g.splice(g.indexOf(n),1),e.count++):g.push(n),e)));u.push(l)}h=Promise.all(u),h.then((()=>{g.forEach((e=>{firebase.database().ref("searchQs/"+e).set({count:1})}))})).catch((e=>{console.log("err")}))}function s(e){i<1&&-1==e||(o||1!=e)&&(i+=e,document.getElementById("disPgT").innerText=i,document.getElementById("disPgB").innerText=i,m(!0),document.getElementById("cookCnt").scrollIntoView())}document.getElementById("pgTPrv").onclick=function(){s(-1)},document.getElementById("pgBPrv").onclick=function(){s(-1)},document.getElementById("pgTNxt").onclick=function(){s(1)},document.getElementById("pgBNxt").onclick=function(){s(1)},window.loaded=function(){e=allCats.length,function(){document.getElementById("catA").onclick=function(){if(r)for(let t=0;t<e;t++)document.getElementById("cat"+t).checked=!1;else for(let t=0;t<e;t++)document.getElementById("cat"+t).checked=!0;r=!r};for(let t=0;t<e;t++)document.getElementById("cat"+t).onclick=function(){if(r)document.getElementById("catA").checked=!1,r=!1;else{let t=!0;for(let n=0;n<e;n++)if(0==document.getElementById("cat"+n).checked){t=!1;break}t&&(r=!0,document.getElementById("catA").checked=!0)}}}(),m(!1),calendarsFSRef.where("public","==",!0).orderBy("published","desc").limit(1).get().then((e=>{e.docs.forEach((e=>{let t=document.createElement("a");classes(t,"text-decoration-none text-light"),t.href=e.data().url;let n=document.createElement("div");classes(n,"media mb-3");let l=document.createElement("img");classes(l,"align-self-center mr-3"),l.style.width="64px",l.style.height="64px",l.src=e.data().picUrl;let d=document.createElement("div");classes(d,"media-body");let c=document.createElement("h5");classes(c,"mt-0"),c.innerHTML=e.data().title,d.appendChild(c);let o=document.createElement("p");o.innerHTML=e.data().descriptionShort,d.appendChild(o);let a=document.createElement("p");classes(a,"my-0"),t.appendChild(n),n.appendChild(l),n.appendChild(d),document.getElementById("calMain").appendChild(t),showEl(document.getElementById("calMain"))}))})).catch((e=>{console.log(e)})),document.getElementById("frmSrch").addEventListener("submit",(function(t){t.preventDefault(),function(){let t="?c=";document.getElementById("cat0").checked&&(t+=document.getElementById("cat0").value);for(let n=1;n<e;n++)document.getElementById("cat"+n).checked&&(t=t+"+"+document.getElementById("cat"+n).value);t+="&k=";let n=document.getElementById("srcBox").value.split(" ");t+=n[0];for(let e=1;e<n.length;e++)t=t+"+"+n[e];t=t+"&o="+document.getElementById("inOrd").value,window.location.href=t}()}))}}();
//# sourceMappingURL=index.js.map
