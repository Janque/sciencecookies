!function(){var e=firebase.database();window.loaded=function(){r(!1),document.getElementById("frmSrch").addEventListener("submit",(e=>{e.preventDefault(),function(){let e="?k=",t=document.getElementById("srcBox").value.split(" ");e+=t[0];for(let n=1;n<t.length;n++)e=e+"+"+t[n];e=e+"&o="+document.getElementById("inOrd").value,e=e+"&d="+document.getElementById("inDir").value,window.location.href=e}()})),document.getElementById("frmPlus").addEventListener("submit",(t=>{t.preventDefault(),function(){let t=document.getElementById("inTitle").value.trim(),n=document.getElementById("inFile").value;cookiesFSRef.where("file","==",n).limit(1).get().then((d=>{if(d.empty){let d;document.getElementById("btnPlusConf").classList.add("d-none"),document.getElementById("btnCanPlus0").setAttribute("disabled","true"),document.getElementById("btnCanPlus1").setAttribute("disabled","true"),document.getElementById("barCont").classList.remove("d-none"),g("3"),e.ref("tdaysID").transaction((e=>(e&&(e.last++,d=e.today,e.last<10&&(d+="0"),d+=e.last),e)),(e=>{if(e)g("0"),"es"==lang?alertTop("<strong>Ocurrió un error: "+e+".</strong><br>LLamar a Javier.",0,"alrtPlusContainer"):"en"==lang&&alertTop("<strong>There has been an error: "+e+".</strong><br>Call Javier.",0,"alrtPlusContainer"),console.log(e);else{g("52");const e=[];langs.forEach(((l,a)=>{g(30/langs.length*a),e.push(db.collection("cookies/langs/"+l).doc(d).set({authors:[author],cont:[{type:"head",title:t,author:[author]},{type:"ref",ref:[]}],media:[],picUrl:"",title:t,description:"",file:n,owner:uid,java:"",revised:{},notify:!1,public:!1,beenPublic:!1,dledit:!1,created:new firebase.firestore.Timestamp.now,ledit:new firebase.firestore.Timestamp.now,published:new firebase.firestore.Timestamp.now,pop:0,likes:0,favs:0,url:"",fixedCats:[],cats:[],translations:{es:n}}))})),Promise.all(e).then((()=>{g("90"),setTimeout((function(){g("100"),document.getElementById("bar").classList.add("bg-success"),"es"==lang?alertTop(`Creado con exito. Redirigiendo...<br>Si no te redirige automáticamente, haz <a class="btn-link-scckie" href="../editar?id=${d}">click aqui</a>.`,1,"alrtPlusContainer"):"en"==lang&&alertTop(`Successfully created. Redirigiendo...<br>If you aren't automatically redirected, <a class="btn-link-scckie" href="../edit?id=${d}">click here</a>.`,1,"alrtPlusContainer")}),1e3),setTimeout((function(){"es"==lang?window.location.href="../editar?id="+d:"en"==lang&&(window.location.href="../edit?id="+d)}),3e3)})).catch((e=>console.log(e)))}}))}else"es"==lang?alertTop("Ese nombre de archivo ya esta en uso.",0,"alrtPlusContainer"):"en"==lang&&alertTop("That file name is already in use.",0,"alrtPlusContainer")})).catch((e=>console.log(e)))}()}))};const t=21;var n,d,l,a,i=!1,o=[null],c=1;function r(e){switch(n="",null!=urlSrch.get("k")&&(n=urlSrch.get("k").replace("+"," "),document.getElementById("srcBox").value=n),document.getElementById("inSrchOrd0").selected=!1,document.getElementById("inSrchOrd1").selected=!1,document.getElementById("inSrchOrd2").selected=!1,document.getElementById("inSrchOrd3").selected=!1,d=urlSrch.get("o")){case"created":document.getElementById("inSrchOrd0").selected=!0;break;case"published":document.getElementById("inSrchOrd1").selected=!0;break;case"ledit":document.getElementById("inSrchOrd2").selected=!0;break;case"pop":document.getElementById("inSrchOrd3").selected=!0;break;default:d="created"}document.getElementById("inSrchDir0").selected=!1,document.getElementById("inSrchDir1").selected=!1,"asc"==(l=urlSrch.get("d"))?(l=!1,document.getElementById("inSrchDir1").selected=!0):(l=!0,document.getElementById("inSrchDir0").selected=!0),a=c>1&&e&&null!=o[c-1]&&null!=o[c-1]?null==n||null==n||""==n?l?cookiesFSRef.orderBy(d,"desc").startAfter(o[c-1]).limit(t):cookiesFSRef.orderBy(d).startAfter(o[c-1]).limit(t):l?dcookiesFSRef.where("title","==",n).orderBy(d,"desc").startAfter(o[c-1]).limit(t):cookiesFSRef.where("title","==",n).orderBy(d).startAfter(o[c-1]).limit(t):null==n||null==n||""==n?l?cookiesFSRef.orderBy(d,"desc").limit(t):cookiesFSRef.orderBy(d).limit(t):l?cookiesFSRef.where("title","==",n).orderBy(d,"desc").limit(t):cookiesFSRef.where("title","==",n).orderBy(d).limit(t),function(){document.getElementById("crdContainer").innerHTML=null!=n&&null!=n&&""!=n||1!=c?"":'<div class="col mb-4">\n            <div class="card text-dark bg-light h-100 cardBorder" style="border-color: #343a40;">\n                <a type="button" data-toggle="modal" data-target="#mdlPlus" class="text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center">\n                    <h1 style="font-size: 6rem;" class="mb-0"><i class="far fa-plus-square"></i></h1>\n                </a>\n            </div>\n        </div>';a.get().then((e=>{let t=e.docs;i=!1;let n=0;t.length<1&&(document.getElementById("crdContainer").innerHTML='<h5 class="mt-0 text-center">No se han encontrado resultados</h5><div class="col mb-4">\n            <div class="card text-dark bg-light h-100 cardBorder" style="border-color: #343a40;">\n                <a type="button" data-toggle="modal" data-target="#mdlPlus" class="text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center">\n                    <h1 style="font-size: 6rem;" class="mb-0"><i class="far fa-plus-square"></i></h1>\n                </a>\n            </div>\n        </div>'),t.forEach((function(e){let d=document.createElement("col");d.classList.add("col"),d.classList.add("mb-4");let l=document.createElement("div"),a="card text-dark bg-light h-100 cardBorder";a=a.split(" "),a.forEach((e=>{l.classList.add(e)})),e.data().owner==uid?l.classList.add("border-success"):l.classList.add("border-secondary");let r=document.createElement("div");a="card-header bg-light m-0 py-0 text-right",a=a.split(" "),a.forEach((e=>{r.classList.add(e)}));let s=document.createElement("div");if(s.classList.add("row"),s.classList.add("justify-content-between"),!e.data().public){let e=document.createElement("div");e.classList.add("col-auto"),e.classList.add("p-0");let t=document.createElement("span");t.classList.add("badge"),t.classList.add("badge-warning"),t.innerText="Draft",e.appendChild(t),s.appendChild(e)}let u=document.createElement("div");u.classList.add("col-auto"),u.classList.add("p-0"),u.classList.add("ml-auto");let m=document.createElement("div");m.classList.add("dropdown");let g=document.createElement("button");g.classList.add("btn"),g.classList.add("btn-light"),g.setAttribute("type","button"),g.setAttribute("data-toogle","dropdown"),g.setAttribute("aria-haspopup","true"),g.setAttribute("aria-expanded","false"),g.innerHTML='<i class="fas fa-ellipsis-h"></i>',g.onclick=function(){document.getElementById("drpMenu"+e.id).classList.contains("show")?$("#drpMenu"+e.id).dropdown("hide"):($("#drpMenu"+e.id).dropdown("show"),setTimeout((function(){$("#drpMenu"+e.id).dropdown("hide")}),5e3))},m.appendChild(g);let p=document.createElement("div");p.classList.add("dropdown-menu"),p.classList.add("dropdown-menu-right"),p.setAttribute("id","drpMenu"+e.id);let h=document.createElement("button");h.classList.add("dropdown-item"),h.onclick=function(){"es"==lang?window.location.href="../editar?id="+e.id:"en"==lang&&(window.location.href="../edit?id="+e.id)},"es"==lang?h.innerHTML='Editar <i class="fas fa-edit"></i>':"en"==lang&&(h.innerHTML='Edit <i class="fas fa-edit"></i>'),p.appendChild(h);let f=document.createElement("button");f.classList.add("dropdown-item"),f.onclick=function(){window.open("../vista-email/"+e.data().file,"_blank").focus()},f.innerHTML='Vista correo <i class="fas fa-envelope"></i>',p.appendChild(f);let y,b,E,B,I,v,L=document.createElement("button"),w=document.createElement("button"),T=e.data().created.toDate();e.data().public&&(L.classList.add("dropdown-item"),L.onclick=function(){let t=T.getFullYear().toString();T.getMonth()<9&&(t+="0"),t+=T.getMonth()+1,window.open(e.data().url,"_blank").focus()},L.innerHTML='Ver artículo <i class="fas fa-eye"></i>',p.appendChild(L),p.appendChild(w)),m.appendChild(p),u.appendChild(m),s.appendChild(u),r.appendChild(s),l.appendChild(r),"es"==lang?(y="Autor(es)",b="No hay imagen",v="Sin publicar",E="Creado: ",B="Actualizado: ",I="Publicado: "):"en"==lang&&(y="Author(s)",b="No image",v="Not public",E="Created: ",B="Updated: ",I="Published: ");let k=document.createElement("a");"es"==lang?k.href="../editar?id="+e.id:"en"==lang&&(k.href="../edit?id="+e.id),k.classList.add("text-decoration-none"),k.classList.add("text-dark");let C=document.createElement("img");C.src=e.data().picUrl,C.classList.add("card-img-top"),C.alt=b,k.appendChild(C);let P=document.createElement("div");P.classList.add("card-body"),P.innerHTML='<h3 class="card-title">'+e.data().title+"</h3>\n<p>"+y+":"+e.data().authors+'</p>\n<p class="card-text">'+e.data().description+"</p>\n",k.appendChild(P);let x=document.createElement("div");x.classList.add("card-footer"),x.classList.add("text-muted"),x.innerHTML="<p>"+E+T.getDate()+"/"+(T.getMonth()+1)+"/"+T.getFullYear()+"</p>\n",T=e.data().ledit.toDate(),x.innerHTML+="<p>"+B+T.getDate()+"/"+(T.getMonth()+1)+"/"+T.getFullYear()+"</p>\n",e.data().public?(T=e.data().published.toDate(),x.innerHTML+="<p>"+I+T.getDate()+"/"+(T.getMonth()+1)+"/"+T.getFullYear()+"</p>\n"):x.innerHTML+="<p>"+v+"</p>\n",k.appendChild(x),l.appendChild(k),d.appendChild(l),document.getElementById("crdContainer").appendChild(d),20==n&&(null==o[c]||null==o[c]?o.push(t[t.length-1]):o[c]!=t[t.length-1]&&o.splice(c,1,t[t.length-1]),i=!0,document.getElementById("pgNavT").classList.remove("d-none"),document.getElementById("pgNavB").classList.remove("d-none")),n++})),i?(document.getElementById("pgTNxt").removeAttribute("disabled"),document.getElementById("pgBNxt").removeAttribute("disabled")):(document.getElementById("pgTNxt").setAttribute("disabled","true"),document.getElementById("pgBNxt").setAttribute("disabled","true")),1==c?(document.getElementById("pgTPrv").setAttribute("disabled","true"),document.getElementById("pgBPrv").setAttribute("disabled","true")):(document.getElementById("pgTPrv").removeAttribute("disabled"),document.getElementById("pgBPrv").removeAttribute("disabled"))})).catch((e=>{console.log(e)}))}()}function s(e){c<1&&-1==e||(i||1!=e)&&(c+=e,document.getElementById("disPgT").innerText=c,document.getElementById("disPgB").innerText=c,r(!0),document.getElementById("cookCnt").scrollIntoView())}document.getElementById("pgTPrv").onclick=function(){s(-1)},document.getElementById("pgBPrv").onclick=function(){s(-1)},document.getElementById("pgTNxt").onclick=function(){s(1)},document.getElementById("pgBNxt").onclick=function(){s(1)},document.getElementById("btnPlus").onclick=function(){$("#mdlPlus").modal("show")};var u=!1;function m(){document.getElementById("inTitle").value="",document.getElementById("inFile").value="",document.getElementById("alrtPlusContainer").innerHTML="",u=!1}function g(e){document.getElementById("bar").setAttribute("aria-valuenow",e),document.getElementById("bar").style.width=e+"%",document.getElementById("bar").innerText=e+"%"}document.getElementById("btnCanPlus0").onclick=function(){m()},document.getElementById("btnCanPlus1").onclick=function(){m()},document.getElementById("inTitle").onfocus=function(){document.getElementById("alrtPlusContainer").innerHTML=""},document.getElementById("inTitle").onchange=function(){if(document.getElementById("inTitle").value=document.getElementById("inTitle").value.trim(),u)return;let e=document.getElementById("inTitle").value;e=rmDiacs(e),e=e.toLowerCase(),document.getElementById("inFile").value=e.replaceAll(" ","-")},document.getElementById("inFile").onfocus=function(){u=!0},document.getElementById("inFile").onchange=function(){document.getElementById("alrtPlusContainer").innerHTML=""},document.getElementById("inFile").oninput=function(){document.getElementById("inFile").value=rmDiacs(document.getElementById("inFile").value.trim().replaceAll(" ","-"))}}();
//# sourceMappingURL=drafts.js.map
