{"version":3,"sources":["js/edit.js"],"names":["docDat","docId","docRef","savedInterval","store","firebase","storage","rtDb","database","toDel","toAdd","lastSave","Date","now","saved","addFrom","toDelMed","toAddMed","newMedia","newMedSrc","keywords","saveDoc","console","log","d","published","toDate","month","getFullYear","toString","getMonth","galletasText","lang","url","file","fillKW","promises","Promise","langs","forEach","l","syncUpt","authors","media","java","notify","public","beenPublic","dledit","created","ledit","pop","likes","favs","revised","translations","push","db","collection","doc","update","all","then","normSave","clearInterval","setInterval","minutes","Math","floor","document","getElementById","innerText","catch","err","code","plusSect","type","newSect","html","text","title","vidUrl","ratio","medUrl","alt","caption","hasCapt","width","cont","splice","render","setprog","bar","n","setAttribute","style","removeMedia","medFileName","ref","delete","fillMed","innerHTML","itm","idx","col0","createElement","classes","card0","appendChild","img0","src","over0","paddingLeft","paddingRight","btns0","medBtnDel","onclick","click","medFile","picUrl","alertTop","setTimeout","tooltip","medBtnCopy","tltipTxt","window","open","focus","onmouseout","medBtnUnstar","medBtnStar","col1","btnA1","card1","img1","publishDate","firestore","Timestamp","item","sect","id","div","subt","subf","act","btnDel","btnEdit","btnCheck","btnAdd","toggleEl","getDate","ld","h","pPub","pLEdit","pAuth","author","fd0","fc0","in0","value","oninput","trim","fd1","fl1","fc1","in1","fd2","fl2","fc2","in2","fd3","fl3","fr3","f3c0","f3f0","inAu0","includes","inAuL0","f3c1","f3f1","inAu1","inAuL1","f3c2","f3f2","inAu2","inAuL2","uptAuthors","a0","a1","a2","arr","empty","slice","checked","refIdx","refR","cLink","cLinkFrm","cBtn","pRef","aRef","makeRefCite","makeRefWeb","href","changeRef","link","fr0","onchange","inOpt0","inOpt1","rBtnEdit","rBtnCheck","toggleRef","sort","a","b","linkA","toUpperCase","linkB","rBtnDel","btnPlusRef0","plusRef","btnPlusRef1","Number","titleTxt","p","removeAttribute","i","inOpt","fr1","f1c0","yt","iframe","in0L","convUrl","length","part","substr","help0","in1L","ratios","replaceAll","rat","classList","remove","fig","position","borderRadius","btnChange","capt","fontSize","fontWeight","rcont","rnL","ranR","ranRC0","in3","valL","ranRC1","in2L","fillTrans","opt","finishPub","$","modal","prog","allCats","cat","substring","split","c","ultraClean","toKW","description","rToKW","wrd","indexOf","kWObj","sum","wCount","banWrds","Object","entries","key","cats","loaded","cookiesFSRef","urlSrch","get","onSnapshot","data","add","uid","addEventListener","event","fileFrm","preventDefault","snap","showEl","hideEl","addMed","atempt","name","getDownloadURL","res","put","on","bytesTransferred","totalBytes","e","prevMed","read","target","files","FileReader","readAsDataURL","onload","e2","result","timePrev","fromMillis","getTime","revLangs","rev","uptMsg","uptDescrip","set"],"mappings":"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","file":"edit.7d837fa7.js","sourceRoot":"../src","sourcesContent":["import '../styles/edit.scss';\n\nvar store = firebase.storage();\nvar rtDb = firebase.database();\n\nlet docDat, docId, docRef;\nlet toDel = -1, toAdd = -1;\nlet lastSave = Date.now(), saved = false;\n\nlet addFrom = -1;\nlet toDelMed = -1, toAddMed = -1;\nlet newMedia = null;\nlet newMedSrc = null;\n\nlet keywords = [];\n\nwindow.loaded = function loaded() {\n    docRef = cookiesFSRef.doc(urlSrch.get('id'));\n    docRef.onSnapshot(doc => {\n        docDat = doc.data();\n        docId = doc.id;\n        document.getElementById('inFile').value = docDat.file;\n        document.getElementById('inDesc').value = docDat.description;\n        render();\n        fillMed();\n        if (docDat.public) {\n            document.getElementById('btnPrivate').classList.remove('d-none');\n            document.getElementById('btnAprove').classList.add('d-none');\n            document.getElementById('btnPub').classList.add('d-none');\n        } else {\n            document.getElementById('btnPrivate').classList.add('d-none');\n            document.getElementById('btnAprove').classList.remove('d-none');\n            document.getElementById('btnPub').classList.remove('d-none');\n        }\n        if (docDat.revised[lang] && docDat.revised[lang].includes(uid)) {\n            document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n        } else {\n            document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n        }\n        document.getElementById('btnPrevCook').href = docDat.url;\n        document.getElementById('btnPrevMail').href = '../vista-email/' + docDat.file;\n    }, err => { console.log(err) });\n\n    fillTrans();\n\n    function fileFrm() {\n        let file = document.getElementById('inFile').value;\n        docRef.get().then(snap => {\n            if (!snap.empty && file != docDat.file) {\n                if (lang = \"es\") {\n                    alertTop(\"Ese nombre de archivo ya esta en uso.\", 0, 'alrtPlusContainer');\n                } else if (lang = \"en\") {\n                    alertTop(\"That file name is already in use.\", 0, 'alrtPlusContainer');\n                }\n            } else {\n                docDat.description = document.getElementById('inDesc').value.trim();\n                docDat.file = file;\n                normSave();\n            }\n        }).then(() => { console.log('exito') }).catch(err => console.log(err));\n    }\n    document.getElementById(\"frmFile\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        fileFrm();\n    });\n\n    function addMed(atempt) {\n        let ref = store.ref('cookieMedia/' + docId + '/i' + atempt + newMedia.name);\n        ref.getDownloadURL().then(res => {\n            addMed(atempt + 1);\n        }).catch(err => {\n            if (err.code == 'storage/object-not-found') {\n                ref.put(newMedia).on('state_changed',\n                    function progress(snap) {\n                        setprog(document.getElementById('barNewMed'), (snap.bytesTransferred / snap.totalBytes) * 100);\n                    },\n                    function error(err) {\n                        if (lang = \"es\") {\n                            alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n                        } else if (lang = \"en\") {\n                            alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n                        }\n                        console.log(err);\n                        $('#mdlAddMed').modal('hide');\n                    },\n                    function complete() {\n                        ref.getDownloadURL().then(medUrl => {\n                            docDat.media.push({\n                                medFile: 'i' + atempt + newMedia.name,\n                                medUrl: medUrl\n                            });\n                            normSave();\n                            fillMed();\n                            $('#mdlAddMed').modal('hide');\n                            if (addFrom == 0) $('#mdlMedMan').modal('show');\n                            else $('#mdlMedCho').modal('show');\n                        }).catch(err => { console.log(err) });\n                    }\n                );\n            } else {\n                console.log(err);\n            }\n        });\n    }\n    function addExtMed() {\n        docDat.media.push({\n            medFile: 'externo',\n            medUrl: document.getElementById('inNewMedUrl').value\n        });\n        normSave();\n        $('#mdlAddMed').modal('hide');\n        if (addFrom == 0) $('#mdlMedMan').modal('show');\n        else $('#mdlMedCho').modal('show');\n    }\n    document.getElementById(\"frmAddMed\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        setprog(document.getElementById('barNewMed'), 0);\n        showEl(document.getElementById(\"barNewMedCont\"));\n        hideEl(document.getElementById(\"frmAddMed\"));\n        document.getElementById(\"btnCnfNewMed\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanNewMed0\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanNewMed1\").setAttribute('disabled', 'true');\n        if (newMedSrc == \"home\") addMed(0);\n        else addExtMed();\n    });\n}\n\nlet savedInterval;\nfunction saveDoc() {\n    console.log('Saving...');\n    let d = docDat.published.toDate();\n    let month = d.getFullYear().toString();\n    if (d.getMonth() < 9) {\n        month += '0';\n    }\n    month += (d.getMonth() + 1);\n    let galletasText = \"\";\n    switch (lang) {\n        case \"es\":\n            galletasText = \"galletas\";\n            break;\n        case \"en\":\n            galletasText = \"cookies\";\n            break;\n    }\n    docDat.url = 'https://sciencecookies.net/' + galletasText + '/' + month + '/' + docDat.file + '/';\n    fillKW();\n    const promises = [];\n    langs.forEach(l => {\n        if (l != lang) {\n            let syncUpt = {\n                authors: docDat.authors,\n                media: docDat.media,\n                java: docDat.java,\n                notify: docDat.notify,\n                public: docDat.public,\n                beenPublic: docDat.beenPublic,\n                dledit: docDat.dledit,\n                created: docDat.created,\n                ledit: docDat.ledit,\n                published: docDat.published,\n                pop: docDat.pop,\n                likes: docDat.likes,\n                favs: docDat.favs,\n                revised: docDat.revised,\n                translations: docDat.translations\n            }\n            syncUpt.translations[lang] = docDat.url;\n            promises.push(db.collection('cookies/langs/' + l).doc(docId).update(syncUpt));\n        }\n    })\n    return Promise.all(promises).then(() => {\n        return docRef.update(docDat);\n    });\n}\nfunction normSave() {\n    saveDoc().then(() => {\n        if (saved) clearInterval(savedInterval);\n        saved = true;\n        savedInterval = setInterval(() => {\n            let minutes = Math.floor((Date.now() - lastSave) / 60000);\n            if (minutes < 60) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n            else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n        }, 300010);\n        document.getElementById('tagLstSave').innerText = \"Se han guardado todos los cambios\";\n        lastSave = Date.now();\n    }).catch(err => {\n        document.getElementById('tagLstSave').innerText = \"Error, no se han guardado todos los cambios: \" + err.code;\n        console.log(err);\n    });\n}\n\nfunction plusSect(type) {\n    let newSect = null;\n    if (type == 'html') {\n        newSect = {\n            type: type,\n            html: \"\"\n        };\n    } else if (type == 'parra') {\n        newSect = {\n            type: type,\n            text: \"\",\n            title: \"0\"\n        };\n    } else if (type == 'youtube') {\n        newSect = {\n            type: type,\n            vidUrl: \"\",\n            ratio: \"16by9\"\n        };\n    } else if (type == 'medSimple') {\n        newSect = {\n            type: type,\n            medUrl: \"https://via.placeholder.com/150.webp\",\n            alt: \"\",\n            caption: \"\",\n            hasCapt: \"true\",\n            width: \"75%\"\n        };\n    }\n    //Add more@#\n    if (newSect != null) docDat.cont.splice(toAdd, 0, newSect);\n    render();\n}\n\nfunction setprog(bar, n) {\n    n = Math.floor(n);\n    bar.setAttribute('aria-valuenow', n);\n    bar.style.width = n + '%';\n    bar.innerText = n + '%';\n}\n\nfunction removeMedia(medFileName) {\n    return store.ref('cookieMedia/' + docId + '/' + medFileName).delete();\n}\n\nfunction fillMed() {\n    document.getElementById('contMedMan').innerHTML = `<div class=\"col mb-4\">\n        <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n            <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlAddMed\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\" onclick=\"addFrom=0;\">\n                <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n            </a>\n        </div>\n    </div>`;\n    document.getElementById('contMedCho').innerHTML = `<div class=\"col mb-4\">\n        <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n            <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlAddMed\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\" onclick=\"addFrom=1;\">\n                <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n            </a>\n        </div>\n    </div>`;\n\n    docDat.media.forEach((itm, idx) => {\n        let col0 = document.createElement('div');\n        classes(col0, \"col mb-4\");\n        let card0 = document.createElement('div');\n        classes(card0, \"card text-light bg-dark\");\n        col0.appendChild(card0);\n        let img0 = document.createElement('img');\n        classes(img0, \"card-img\");\n        img0.src = itm.medUrl;\n        card0.appendChild(img0);\n        let over0 = document.createElement('div');\n        classes(over0, \"card-img-overlay pt-0\");\n        over0.style.paddingLeft = \".9rem\";\n        over0.style.paddingRight = \".9rem\";\n        card0.appendChild(over0);\n        let btns0 = document.createElement('div');\n        classes(btns0, \"row mb-2 p-0\");\n        over0.appendChild(btns0);\n        let medBtnDel = document.createElement('button');\n        classes(medBtnDel, \"btn btn-light btn-scckie btn-sm\");\n        medBtnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n        medBtnDel.onclick = function () {\n            if (toDelMed == idx) {\n                toDelMed = -1;\n                if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                if (itm.medFile != 'externo') {\n                    removeMedia(itm.medFile).then(() => {\n                        if (itm.medUrl == docDat.picUrl) {\n                            docDat.picUrl = \"\";\n                        }\n                        docDat.media.splice(idx, 1);\n                        normSave();\n                    }).catch(err => console.log(err));\n                } else {\n                    if (itm.medUrl == docDat.picUrl) {\n                        docDat.picUrl = \"\";\n                    }\n                    docDat.media.splice(idx, 1);\n                    normSave();\n                }\n            } else {\n                if (lang = \"es\") {\n                    alertTop(\"<strong>¿Quieres eliminar esta imagen?</strong> Presiona de nuevo el botón para confirmar.\", 2);\n                } else if (lang = \"en\") {\n                    alertTop(\"<strong>Do you want to delete this image? </strong> Press the button again to confirm.\", 2);\n                }\n                toDelMed = idx;\n                setTimeout(() => {\n                    toDelMed = -1;\n                }, 3000);\n            }\n        };\n        btns0.appendChild(medBtnDel);\n        let tooltip = document.createElement('div');\n        classes(tooltip, \"tooltipn ml-auto\");\n        let medBtnCopy = document.createElement('button');\n        classes(medBtnCopy, \"btn btn-light btn-scckie btn-sm\");\n        let tltipTxt = document.createElement('span');\n        classes(tltipTxt, \"tooltipTextn\");\n        tltipTxt.innerHTML = \"Copiar\";\n        medBtnCopy.appendChild(tltipTxt);\n        medBtnCopy.innerHTML += '<i class=\"fas fa-link\"></i>';\n        medBtnCopy.onclick = function () {\n            /*var copyText = document.getElementById(\"toCopy\");\n            //copyText.classList.remove('d-none');\n            copyText.select();\n            copyText.setSelectionRange(0, 99999);\n            document.execCommand(\"copy\");\n            //classes(copyText, \"d-none\");*/\n            window.open(itm.medUrl).focus();\n\n            tltipTxt.innerHTML = \"URL copiado\";\n        };\n        medBtnCopy.onmouseout = function () {\n            tltipTxt.innerHTML = \"Copiar\";\n        }\n        tooltip.appendChild(medBtnCopy);\n        btns0.appendChild(tooltip);\n        let medBtnUnstar = document.createElement('button');\n        let medBtnStar = document.createElement('button');\n        if (itm.medUrl == docDat.picUrl) {\n            classes(medBtnUnstar, \"btn btn-light btn-scckie btn-sm ml-1\");\n            medBtnUnstar.innerHTML = '<i class=\"fas fa-star\"></i>';\n            medBtnUnstar.onclick = function () {\n                docDat.picUrl = \"\";\n                normSave();\n            };\n            btns0.appendChild(medBtnUnstar);\n        } else {\n            classes(medBtnStar, \"btn btn-light btn-scckie btn-sm ml-1\");\n            medBtnStar.innerHTML = '<i class=\"far fa-star\"></i>';\n            medBtnStar.onclick = function () {\n                docDat.picUrl = itm.medUrl;\n                normSave();\n            };\n            btns0.appendChild(medBtnStar);\n        }\n\n        document.getElementById('contMedMan').appendChild(col0);\n\n\n        let col1 = document.createElement('div');\n        classes(col1, \"col mb-4\");\n        let btnA1 = document.createElement('a');\n        classes(btnA1, 'text-decoration-none');\n        btnA1.setAttribute('type', 'button');\n        btnA1.onclick = function () {\n            if (toAddMed == -1) return;\n            docDat.cont[toAddMed].medUrl = itm.medUrl;\n            normSave();\n        };\n        btnA1.setAttribute(\"data-dismiss\", \"modal\");\n        col1.appendChild(btnA1);\n        let card1 = document.createElement('div');\n        classes(card1, \"card text-light bg-dark\");\n        btnA1.appendChild(card1);\n        let img1 = document.createElement('img');\n        classes(img1, \"card-img\");\n        img1.src = itm.medUrl;\n        card1.appendChild(img1);\n\n        document.getElementById('contMedCho').appendChild(col1);\n    });\n}\n\nfunction render() {\n    document.getElementById('cont').innerHTML = \"\";\n    let publishDate;\n    if (docDat.beenPublic) {\n        publishDate = docDat.published;\n    } else {\n        docDat.published = publishDate = new firebase.firestore.Timestamp.now();\n    }\n    docDat.cont.forEach((item, idx) => {\n        let sect = document.createElement('div');\n        sect.id = 'sect' + idx;\n        let div = document.createElement('div');\n        classes(div, 'dropdown-divider mx-2')\n        if (item.type != 'head') sect.appendChild(div);\n\n        let subt = document.createElement('div');\n        subt.id = \"sect\" + idx + \"t\";\n        let subf = document.createElement('div');\n        classes(subf, \"d-none\");\n        subf.id = \"sect\" + idx + \"f\";\n\n        let act = document.createElement('div');\n        classes(act, 'row mb-2 px-2');\n        let btnDel, btnEdit, btnCheck, btnAdd;\n\n        if (item.type != 'head' && item.type != 'ref') {\n            btnDel = document.createElement('button');\n            classes(btnDel, 'btn btn-light btn-link-scckie ml-2');\n            btnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n            btnDel.onclick = function () {\n                if (toDel == idx) {\n                    toDel = -1;\n                    if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                    docDat.cont.splice(idx, 1);\n                    render();//Important\n                    normSave();\n                } else {\n                    if (lang = \"es\") {\n                        alertTop(\"<strong>¿Quieres eliminar esta sección?</strong> Presiona de nuevo el botón para confirmar.\", 2);\n                    } else if (lang = \"en\") {\n                        alertTop(\"<strong>Do you want to delete this section? </strong> Press the button again to confirm.\", 2);\n                    }\n                    toDel = idx;\n                    setTimeout(() => {\n                        toDel = -1;\n                    }, 3000);\n                }\n            }\n            act.appendChild(btnDel);\n        }\n        if (item.type != 'ref') {\n            btnEdit = document.createElement('button');\n            classes(btnEdit, 'btn btn-light btn-link-scckie ml-auto');\n            btnEdit.innerHTML = '<i class=\"fas fa-edit\"></i>';\n            btnEdit.onclick = function () {\n                toggleEl(btnEdit);\n                toggleEl(btnCheck);\n                toggleEl(subf);\n                if (document.getElementById('tagLstSave').innerText == \"Se han guardado todos los cambios\") {\n                    let minutes = Math.floor((Date.now() - lastSave) / 60000);\n                    if (minutes > 0) {\n                        if (minutes > 59) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n                        else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n                    } else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor((Date.now() - lastSave) / 1000) + \" segundos\";\n                }\n            }\n            act.appendChild(btnEdit);\n            btnCheck = document.createElement('button');\n            classes(btnCheck, 'btn btn-light btn-link-scckie ml-auto d-none');\n            btnCheck.innerHTML = '<i class=\"fas fa-check\"></i>';\n            btnCheck.onclick = function () {\n                toggleEl(btnEdit);\n                toggleEl(btnCheck);\n                toggleEl(subf);\n                normSave();\n            }\n            act.appendChild(btnCheck);\n            btnAdd = document.createElement('button');\n            classes(btnAdd, 'btn btn-light btn-link-scckie mx-2');\n            btnAdd.innerHTML = '<i class=\"fas fa-plus\"></i>';\n            btnAdd.setAttribute('data-toggle', \"modal\");\n            btnAdd.setAttribute('data-target', \"#mdlPlusSect\");\n            btnAdd.onclick = function () {\n                toAdd = idx + 1;\n            }\n            act.appendChild(btnAdd);\n        }\n        sect.appendChild(act);\n\n        if (item.type == 'head') {\n            let d = publishDate.toDate();\n            d = d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();\n            let ld = docDat.ledit.toDate();\n            ld = ld.getDate() + '/' + (ld.getMonth() + 1) + '/' + ld.getFullYear();\n\n            let h = document.createElement('h1');\n            classes(h, \"text-center\");\n            h.innerHTML = docDat.cont[0].title;\n            subt.appendChild(h);\n            let pPub = document.createElement('p');\n            pPub.innerText = \"Publicado: \" + d;\n            subt.appendChild(pPub);\n            if (docDat.dledit) {\n                let pLEdit = document.createElement('p');\n                pLEdit.innerText = \"Ultima actualización: \" + ld;\n                subt.appendChild(pLEdit);\n            }\n            let pAuth = document.createElement('p');\n            pAuth.innerText = \"Autor(es):\" + docDat.cont[0].author;\n            subt.appendChild(pAuth);\n\n            let fd0 = document.createElement('div');\n            classes(fd0, \"row justify-content-center mb-2\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col col-lg-6\");\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control form-control-lg text-center\");\n            in0.setAttribute('type', 'text');\n            in0.setAttribute('placeholder', docDat.cont[0].title);\n            in0.value = docDat.cont[0].title;\n            fc0.appendChild(in0);\n            fd0.appendChild(fc0);\n            subf.appendChild(fd0);\n            in0.oninput = function () {\n                docDat.title = docDat.cont[0].title = in0.value.trim();\n                h.innerHTML = docDat.cont[0].title;\n            };\n\n            let fd1 = document.createElement('div');\n            classes(fd1, \"row mb-2\");\n            let fl1 = document.createElement('label');\n            classes(fl1, \"col-sm-2 col-form-label\");\n            fl1.innerText = \"Publicado: \";\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col\");\n            let in1 = document.createElement('input');\n            classes(in1, \"form-control\");\n            in1.setAttribute('type', 'text');\n            in1.setAttribute('readonly', 'true');\n            in1.value = d;\n            fc1.appendChild(in1);\n            fd1.appendChild(fl1);\n            fd1.appendChild(fc1);\n            subf.appendChild(fd1);\n\n            let fd2 = document.createElement('div');\n            let fl2 = document.createElement('label');\n            let fc2 = document.createElement('div');\n            let in2 = document.createElement('input');\n            if (docDat.dledit) {\n                classes(fd2, \"row mb-2\");\n                classes(fl2, \"col-sm-2 col-form-label\");\n                fl2.innerText = \"Ultima actualización: \";\n                classes(fc2, \"col\");\n                classes(in2, \"form-control\");\n                in2.setAttribute('type', 'text');\n                in2.setAttribute('readonly', 'true');\n                in2.value = ld;\n                fc2.appendChild(in2);\n                fd2.appendChild(fl2);\n                fd2.appendChild(fc2);\n                subf.appendChild(fd2);\n            }\n\n            let fd3 = document.createElement('div');\n            classes(fd3, \"row mb-2\");\n            let fl3 = document.createElement('label');\n            classes(fl3, \"col-sm-2 col-form-label\");\n            fl3.innerText = \"Autor(es): \";\n            let fr3 = document.createElement('div');\n            classes(fr3, \"form-row justify-content-around pt-2\");\n            let f3c0 = document.createElement('div');\n            classes(f3c0, \"form-group col-auto mr-2\");\n            let f3f0 = document.createElement('div');\n            classes(f3f0, \"form-check\");\n            f3c0.appendChild(f3f0);\n            let inAu0 = document.createElement('input');\n            classes(inAu0, \"form-check-input\");\n            inAu0.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Andrea Garma')) inAu0.setAttribute('checked', 'true');\n            inAu0.value = ' Andrea Garma';\n            let inAuL0 = document.createElement('label');\n            classes(inAuL0, \"form-check-label\");\n            inAu0.setAttribute('for', 'authr0');\n            inAuL0.innerText = \"Andrea Garma\";\n            f3f0.appendChild(inAu0);\n            f3f0.appendChild(inAuL0);\n            fr3.appendChild(f3c0);\n            let f3c1 = document.createElement('div');\n            classes(f3c1, \"form-group col-auto mr-2\");\n            let f3f1 = document.createElement('div');\n            classes(f3f1, \"form-check\");\n            f3c1.appendChild(f3f1);\n            let inAu1 = document.createElement('input');\n            classes(inAu1, \"form-check-input\");\n            inAu1.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Javier Pantoja')) inAu1.setAttribute('checked', 'true');\n            inAu1.value = ' Javier Pantoja';\n            let inAuL1 = document.createElement('label');\n            classes(inAuL1, \"form-check-label\");\n            inAu1.setAttribute('for', 'authr1');\n            inAuL1.innerText = \"Javier Pantoja\";\n            f3f1.appendChild(inAu1);\n            f3f1.appendChild(inAuL1);\n            fr3.appendChild(f3c1);\n            let f3c2 = document.createElement('div');\n            classes(f3c2, \"form-group col-auto mr-2\");\n            let f3f2 = document.createElement('div');\n            classes(f3f2, \"form-check\");\n            f3c2.appendChild(f3f2);\n            let inAu2 = document.createElement('input');\n            classes(inAu2, \"form-check-input\");\n            inAu2.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Paulina Vargas')) inAu2.setAttribute('checked', 'true');\n            inAu2.value = ' Paulina Vargas';\n            let inAuL2 = document.createElement('label');\n            classes(inAuL2, \"form-check-label\");\n            inAu2.setAttribute('for', 'authr2');\n            inAuL2.innerText = \"Paulina Vargas\";\n            f3f2.appendChild(inAu2);\n            f3f2.appendChild(inAuL2);\n            fr3.appendChild(f3c2);\n            function uptAuthors(a0, a1, a2) {\n                let arr = [];\n                if (a0) arr.push(\" Andrea Garma\");\n                if (a1) arr.push(\" Javier Pantoja\");\n                if (a2) arr.push(\" Paulina Vargas\");\n                if (arr.empty) arr.push(' Anónimo');\n                docDat.cont[0].author = arr.slice();\n                docDat.authors = arr.slice();\n                pAuth.innerText = \"Autor(es):\" + docDat.cont[0].author;\n            }\n            inAu0.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n            inAu1.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n            inAu2.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n\n            fd3.appendChild(fl3);\n            fd3.appendChild(fr3);\n            subf.appendChild(fd3);\n        } else if (item.type == 'ref') {\n            let h = document.createElement('h3');\n            h.innerHTML = '<br>Referencias';\n            subt.appendChild(h);\n            item.ref.forEach((ref, refIdx) => {\n                let refR = document.createElement('div');\n                classes(refR, \"row mb-2\");\n                let cLink = document.createElement('div');\n                classes(cLink, \"col\");\n                refR.appendChild(cLink);\n                let cLinkFrm = document.createElement('div');\n                classes(cLinkFrm, \"col d-none\");\n                refR.appendChild(cLinkFrm);\n                let cBtn = document.createElement('div');\n                classes(cBtn, \"col-auto\");\n                refR.appendChild(cBtn);\n                let pRef = document.createElement('p');\n                cLink.appendChild(pRef);\n                let aRef;\n\n                function makeRefCite(text) {\n                    pRef.innerHTML = text;\n                }\n                function makeRefWeb(text) {\n                    pRef.innerHTML = \"\";\n                    aRef = document.createElement('a');\n                    classes(aRef, \"text-warning text-break\")\n                    aRef.href = text;\n                    aRef.setAttribute('target', '_blank');\n                    aRef.setAttribute('rel', 'nofollow');\n                    aRef.innerHTML = text + ' <i class=\"fas fa-external-link-alt\"></i>'\n                    pRef.appendChild(aRef);\n                }\n                if (ref.type == 'web') {\n                    makeRefWeb(ref.link);\n                } else if (ref.type == 'cite') {\n                    makeRefCite(ref.link);\n                }\n\n                function changeRef() {\n                    in1.value = in1.value.trim();\n                    docDat.cont[idx].ref[refIdx].link = in0.value;\n                    docDat.cont[idx].ref[refIdx].type = in1.value;\n                    if (ref.type == 'web') {\n                        makeRefWeb(ref.link);\n                        in0.setAttribute('placeholder', 'https://google.com');\n                    } else if (ref.type == 'cite') {\n                        makeRefCite(ref.link);\n                        in0.setAttribute('placeholder', 'Referencia');\n                    }\n                }\n                let fr0 = document.createElement('div');\n                classes(fr0, \"row\");\n                let fc0 = document.createElement('div');\n                classes(fc0, \"col\");\n                let fc1 = document.createElement('div');\n                classes(fc1, \"col-auto\");\n                let in0 = document.createElement('input');\n                let in1 = document.createElement('select');\n                classes(in0, \"form-control\");\n                in0.setAttribute('type', 'text');\n                in0.value = ref.link;\n                if (ref.type == 'web') in0.setAttribute('placeholder', 'https://google.com');\n                if (ref.type == 'cite') in0.setAttribute('placeholder', 'Referencia');\n                in0.onchange = function () { changeRef(); }\n                classes(in1, \"form-control form-control-sm\");\n                let inOpt0 = document.createElement('option');\n                inOpt0.value = \"web\";\n                if (ref.type == 'web') inOpt0.setAttribute('selected', 'true');\n                inOpt0.innerText = 'Web';\n                in1.appendChild(inOpt0);\n                let inOpt1 = document.createElement('option');\n                if (ref.type == 'cite') inOpt1.setAttribute('selected', 'true');\n                inOpt1.value = \"cite\";\n                inOpt1.innerText = 'Otro';\n                in1.appendChild(inOpt1);\n                in1.onchange = function () { changeRef(); }\n                fc0.appendChild(in0);\n                fc1.appendChild(in1);\n                fr0.appendChild(fc0);\n                fr0.appendChild(fc1);\n                cLinkFrm.appendChild(fr0);\n\n                function toggleRef() {\n                    toggleEl(cLink);\n                    toggleEl(cLinkFrm);\n                    toggleEl(rBtnEdit);\n                    toggleEl(rBtnCheck);\n                }\n                let rBtnEdit, rBtnCheck;\n                rBtnEdit = document.createElement('button');\n                classes(rBtnEdit, 'btn btn-light btn-link-scckie ml-auto');\n                rBtnEdit.innerHTML = '<i class=\"fas fa-edit\"></i>';\n                rBtnEdit.onclick = function () {\n                    toggleRef();\n                    if (document.getElementById('tagLstSave').innerText == \"Se han guardado todos los cambios\") {\n                        document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor((Date.now() - lastSave) / 60000) + \" minutos\";\n                    }\n                };\n                rBtnCheck = document.createElement('button');\n                classes(rBtnCheck, 'btn btn-light btn-link-scckie ml-auto d-none');\n                rBtnCheck.innerHTML = '<i class=\"fas fa-check\"></i>';\n                rBtnCheck.onclick = function () {\n                    toggleRef();\n                    docDat.cont[idx].ref.sort((a, b) => {\n                        let linkA = a.link.toUpperCase();\n                        let linkB = b.link.toUpperCase();\n                        if (linkA < linkB) return -1;\n                        if (linkA > linkB) return 1;\n                        return 0;\n                    });\n                    normSave();\n                };\n                cBtn.appendChild(rBtnEdit);\n                cBtn.appendChild(rBtnCheck);\n                let rBtnDel = document.createElement('button');\n                classes(rBtnDel, 'btn btn-light btn-link-scckie ml-2');\n                rBtnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n                rBtnDel.onclick = function () {\n                    docDat.cont[idx].ref.splice(refIdx, 1);\n                    normSave();\n                };\n                cBtn.appendChild(rBtnDel);\n\n                subt.appendChild(refR);\n\n                if (ref.link == \"\") {\n                    rBtnEdit.click();\n                }\n            });\n            let btnPlusRef0 = document.createElement('a');\n            classes(btnPlusRef0, \"btn btn-light btn-scckie\");\n            btnPlusRef0.onclick = function () { plusRef(); };\n            btnPlusRef0.innerHTML = '<i class=\"fas fa-plus\"></i>'\n            h.appendChild(btnPlusRef0);\n            let btnPlusRef1 = document.createElement('a');\n            classes(btnPlusRef1, \"btn btn-light btn-scckie btn-lg btn-block border border-light\");\n            btnPlusRef1.onclick = function () { plusRef(); };\n            btnPlusRef1.innerHTML = '<i class=\"fas fa-plus\"></i>'\n            subt.appendChild(btnPlusRef1);\n            function plusRef() {\n                docDat.cont[idx].ref.push({\n                    type: \"web\",\n                    link: \"\"\n                });\n                render();\n            }\n        } else if (item.type == 'parra') {\n            let h;\n            if (Number(item.title) > 0) {\n                if (Number(item.title) == 2) subt.innerHTML = '<br>';\n                h = document.createElement('h' + item.title)\n                h.innerHTML = item.titleTxt;\n                subt.appendChild(h);\n            }\n            let p = document.createElement('p');\n            p.innerHTML = item.text;\n            subt.appendChild(p);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0 = document.createElement('input');\n            let in1 = document.createElement('select');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            if (Number(item.title) > 0) {\n                in0.value = item.titleTxt;\n                in0.setAttribute('placeholder', 'Subtítulo');\n                in0.removeAttribute('readonly');\n            } else {\n                in0.value = \"\";\n                in0.setAttribute('placeholder', '');\n                in0.setAttribute('readonly', 'true');\n            }\n            in0.oninput = function () {\n                docDat.cont[idx].titleTxt = h.innerHTML = in0.value;\n            }\n            classes(in1, \"form-control form-control-sm\");\n            for (let i = 0; i < 7; i++) {\n                let inOpt = document.createElement('option');\n                inOpt.value = i;\n                if (item.title == i) inOpt.setAttribute('selected', 'true');\n                inOpt.innerText = i;\n                in1.appendChild(inOpt);\n            }\n            in1.oninput = function () {\n                docDat.cont[idx].title = in1.value;\n                if (Number(in1.value) > 0) {\n                    in0.setAttribute('placeholder', 'Subtítulo');\n                    in0.removeAttribute('readonly');\n                    if (Number(item.title) == 2) subt.innerHTML = '<br>';\n                    else subt.innerHTML = \"\";\n                    h = document.createElement('h' + item.title)\n                    h.innerHTML = docDat.cont[idx].titleTxt = in0.value;\n                    subt.appendChild(h);\n                    subt.appendChild(p);\n                } else {\n                    in0.value = \"\";\n                    in0.setAttribute('placeholder', '');\n                    in0.setAttribute('readonly', 'true');\n                    docDat.cont[idx].titleTxt = in0.value;\n                    subt.innerHTML = \"\";\n                    subt.appendChild(p);\n                }\n            }\n            fc0.appendChild(in0);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            let fr1 = document.createElement('div');\n            classes(fr0, \"row mb-2\");\n            let f1c0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let in2 = document.createElement('textarea');\n            classes(in2, \"form-control\");\n            in2.setAttribute('rows', '8');\n            in2.value = item.text;\n            in2.oninput = function () {\n                docDat.cont[idx].text = p.innerHTML = in2.value.trim();\n            };\n            f1c0.appendChild(in2);\n            fr1.appendChild(f1c0);\n            subf.appendChild(fr1);\n\n            if (Number(item.title) > 0 && item.titleTxt == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'html') {\n            let html = document.createElement('div');\n            html.innerHTML = item.html;\n            subt.appendChild(html);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row mb-2\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let in0 = document.createElement('textarea');\n            classes(in0, \"form-control\");\n            in0.setAttribute('rows', '8');\n            in0.value = item.html;\n            in0.onchange = function () {\n                docDat.cont[idx].html = html.innerHTML = in0.value.trim();\n            };\n            fc0.appendChild(in0);\n            fr0.appendChild(fc0);\n            subf.appendChild(fr0);\n\n            if (item.html == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'youtube') {\n            let yt = document.createElement('div');\n            classes(yt, \"embed-responsive embed-responsive-\" + item.ratio);\n            let iframe = document.createElement('iframe');\n            iframe.src = item.vidUrl;\n            iframe.setAttribute('frameborder', \"0\");\n            iframe.setAttribute('allow', \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\");\n            iframe.setAttribute('allowfullscreen', \"true\");\n            yt.appendChild(iframe);\n            subt.appendChild(yt);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0L = document.createElement('label');\n            in0L.innerText = \"URL\";\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            in0.value = item.vidUrl;\n            in0.onchange = function () {\n                let convUrl = in0.value.trim();\n                if (convUrl.length == 11) convUrl = \"https://www.youtube.com/embed/\" + convUrl;\n                else {\n                    let part, i = 1;\n                    do {\n                        part = convUrl[i - 1] + convUrl[i];\n                        i++;\n                    } while (part != \"e/\" && part != \"v=\");\n                    convUrl = \"https://www.youtube.com/embed/\" + convUrl.substr(i, 11);\n                }\n                docDat.cont[idx].vidUrl = iframe.src = convUrl;\n            }\n            let help0 = document.createElement('small');\n            classes(help0, \"text-muted\");\n            help0.innerText = \"aaaaaaaaaaa o https://youtu.be/aaaaaaaaaaa o https://www.youtube.com/watch?v=aaaaaaaaaaa\";\n            let in1L = document.createElement('label');\n            in1L.innerText = \"Ratio\";\n            let in1 = document.createElement('select');\n            classes(in1, \"form-control form-control-sm\");\n            let ratios = ['21by9', '16by9', '4by3', '1by1'];\n            for (let i = 0; i < 4; i++) {\n                let inOpt = document.createElement('option');\n                inOpt.value = ratios[i];\n                if (item.ratio == ratios[i]) inOpt.setAttribute('selected', 'true');\n                inOpt.innerText = ratios[i].replaceAll('by', ':');\n                in1.appendChild(inOpt);\n            }\n            in1.oninput = function () {\n                docDat.cont[idx].ratio = in1.value;\n                ratios.forEach(rat => {\n                    yt.classList.remove('embed-responsive-' + rat);\n                })\n                classes(yt, \"embed-responsive-\" + item.ratio);\n            }\n            fc0.appendChild(in0L);\n            fc0.appendChild(in0);\n            fc0.appendChild(help0);\n            fc1.appendChild(in1L);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            if (item.vidUrl == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'medSimple') {\n            let fig = document.createElement('figure');\n            classes(fig, \"mx-auto\");\n            fig.style.width = item.width;\n            fig.style.position = \"relative\";\n            fig.style.borderRadius = \".25rem\";\n            let img0 = document.createElement('img');\n            img0.setAttribute('alt', item.alt);\n            img0.src = item.medUrl;\n            classes(img0, \"w-100\");\n            fig.appendChild(img0);\n            let over0 = document.createElement('div');\n            classes(over0, \"card-img-overlay pt-0\");\n            over0.style.paddingLeft = \".9rem\";\n            over0.style.paddingRight = \".9rem\";\n            let btns0 = document.createElement('div');\n            classes(btns0, \"row mb-2 p-0\");\n            over0.appendChild(btns0);\n            let btnChange = document.createElement('button');\n            classes(btnChange, \"btn btn-light btn-scckie btn-sm ml-auto\");\n            btnChange.innerHTML = '<i class=\"fas fa-exchange-alt\"></i>';\n            btnChange.setAttribute('data-toggle', \"modal\")\n            btnChange.setAttribute('data-target', \"#mdlMedCho\")\n            btnChange.onclick = function () {\n                toAddMed = idx;\n            };\n            btns0.appendChild(btnChange);\n            fig.appendChild(over0);\n            let capt = document.createElement('figcaption');\n            capt.style.fontSize = \"70%\";\n            capt.style.fontWeight = \"lighter\";\n            capt.innerHTML = item.caption;\n            if (item.hasCapt) {\n                fig.appendChild(capt);\n            }\n            subt.appendChild(fig);\n\n            let rcont = document.createElement('div');\n            classes(rcont, \"form-group mb-2\");\n            let rnL = document.createElement('label');\n            rnL.innerText = \"Tamaño\";\n            let ranR = document.createElement('div');\n            classes(ranR, \"row\");\n            let ranRC0 = document.createElement('div');\n            classes(ranRC0, \"col align-center d-flex pr-0\");\n            let in3 = document.createElement('input');\n            in3.setAttribute('type', 'range');\n            in3.setAttribute('max', '100');\n            in3.setAttribute('min', '0');\n            in3.setAttribute('step', '1');\n            in3.value = '75';\n            classes(in3, \"form-control-range\");\n            in3.oninput = function () {\n                valL.innerHTML = in3.value + '%';\n                fig.style.width = docDat.cont[idx].width = in3.value + '%';\n            }\n            ranRC0.appendChild(in3);\n            let valL = document.createElement('span');\n            classes(valL, \"badge badge-primary range-value-L\");\n            valL.innerText = '75%';\n            let ranRC1 = document.createElement('div');\n            classes(ranRC1, \"col-auto\");\n            ranRC1.appendChild(valL);\n            ranR.appendChild(ranRC0);\n            ranR.appendChild(ranRC1);\n            rcont.appendChild(rnL);\n            rcont.appendChild(ranR);\n            subf.appendChild(rcont);\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0L = document.createElement('label');\n            in0L.innerText = \"Pie de foto\";\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            in0.value = item.caption;\n            in0.oninput = function () {\n                capt.innerHTML = docDat.cont[idx].caption = in0.value.trim();\n            }\n            let in1 = document.createElement('select');\n            classes(in1, \"form-control form-control-sm\");\n            let inOpt0 = document.createElement('option');\n            inOpt0.value = \"true\";\n            if (item.hasCapt == \"true\") inOpt0.setAttribute('selected', 'true');\n            inOpt0.innerText = \"Sí\";\n            in1.appendChild(inOpt0);\n            let inOpt1 = document.createElement('option');\n            inOpt1.value = \"false\";\n            if (item.hasCapt == \"false\") inOpt1.setAttribute('selected', 'true');\n            inOpt1.innerText = \"No\";\n            in1.appendChild(inOpt1);\n            in1.oninput = function () {\n                docDat.cont[idx].hasCapt = in1.value;\n                if (in1.value == \"true\") {\n                    capt.innerHTML = in0.value = docDat.cont[idx].caption;\n                    in0.removeAttribute('readonly');\n                    fig.appendChild(capt);\n                } else {\n                    in0.value = docDat.cont[idx].caption = \"\";\n                    in0.setAttribute('readonly', 'true');\n                    capt.innerHTML = \"\";\n                    fig.innerHTML = \"\";\n                    fig.appendChild(img0);\n                    fig.appendChild(over0);\n                }\n            }\n            fc0.appendChild(in0L);\n            fc0.appendChild(in0);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            let fr1 = document.createElement('div');\n            classes(fr1, \"row\");\n            let f1c0 = document.createElement('div');\n            classes(f1c0, \"col\");\n            let in2L = document.createElement('label');\n            in2L.innerText = \"Alt\";\n            let in2 = document.createElement('input');\n            classes(in2, \"form-control\");\n            in2.setAttribute('type', 'text');\n            in2.value = item.alt;\n            in2.oninput = function () {\n                docDat.cont[idx].alt = in2.value.trim();\n                img0.setAttribute('alt', in2.value.trim());\n            }\n            f1c0.appendChild(in2L);\n            f1c0.appendChild(in2);\n            fr1.appendChild(f1c0);\n            subf.appendChild(fr1);\n\n            if (item.hasCapt == \"true\" && item.caption == \"\") {\n                btnEdit.click();\n            }\n        }//Add more@#*/\n        sect.appendChild(subt);\n        sect.appendChild(subf);\n        document.getElementById('cont').appendChild(sect);\n    });\n    document.getElementById('inJava').innerText = docDat.java;\n    document.getElementById('javaIns').innerHTML = docDat.java;\n}\n\ndocument.getElementById('inFile').oninput = function () {\n    document.getElementById('inFile').value = ultraClean(document.getElementById('inFile').value, '-');\n}\n\ndocument.getElementById('inJava').onchange = function () {\n    docDat.java = document.getElementById('javaIns').innerHTML = document.getElementById('inJava').value;\n}\ndocument.getElementById('btnEditJs').onclick = function () {\n    toggleEl(document.getElementById('btnEditJs'));\n    toggleEl(document.getElementById('btnCheckJs'));\n    document.getElementById('inJava').removeAttribute('readonly');\n};\ndocument.getElementById('btnCheckJs').onclick = function () {\n    toggleEl(document.getElementById('btnEditJs'));\n    toggleEl(document.getElementById('btnCheckJs'));\n    document.getElementById('inJava').setAttribute('readonly', 'true');\n    normSave();\n};\n\nfunction fillTrans() {\n    langs.forEach(l => {\n        if (l != lang) {\n            let opt = document.createElement('option');\n            opt.value = opt.innerText = l;\n            document.getElementById('inTransFrom').appendChild(opt);\n        }\n    })\n}\n\n$('#mdlAddMed').on('hidden.bs.modal', e => {\n    document.getElementById(\"prevNewMed\").src = '';\n    document.getElementById('inNewMedL').innerHTML = 'Elige una imagen';\n    document.getElementById('inNewMedUrl').value = \"\";\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"barNewMedCont\"));\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n    showEl(document.getElementById(\"frmAddMed\"));\n    document.getElementById(\"btnCnfNewMed\").removeAttribute('disabled');\n    document.getElementById(\"btnCanNewMed0\").removeAttribute('disabled');\n    document.getElementById(\"btnCanNewMed1\").removeAttribute('disabled');\n})\ndocument.getElementById('inNewMed').addEventListener('change', e => {\n    newMedia = e.target.files[0];\n    function prevMed() {\n        var read = new FileReader();\n        read.readAsDataURL(newMedia);\n        read.onload = function (e2) {\n            document.getElementById(\"prevNewMed\").src = e2.target.result;\n        };\n    };\n    newMedia.name = ultraClean(newMedia.name, '');\n    document.getElementById('inNewMedL').innerHTML = newMedia.name;\n    prevMed(newMedia);\n});\ndocument.getElementById('inNewMedUrl').onchange = function () {\n    document.getElementById(\"prevNewMed\").src = document.getElementById('inNewMedUrl').value;\n};\ndocument.getElementById('inMedSrc0').onclick = function () {\n    newMedSrc = \"home\";\n    document.getElementById('inNewMed').setAttribute('required', 'true');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    showEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n}\ndocument.getElementById('inMedSrc1').onclick = function () {\n    newMedSrc = \"out\";\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').setAttribute('required', 'true');\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    showEl(document.getElementById(\"inNewMedUrlCont\"));\n}\n\ndocument.getElementById('inSendUpt').onclick = function () {\n    if (document.getElementById('inSendUpt').checked) {\n        showEl(document.getElementById('uptDescCont'));\n        document.getElementById('inUptDesc').setAttribute('required', 'true');\n    } else {\n        hideEl(document.getElementById('uptDescCont'));\n        document.getElementById('inUptDesc').removeAttribute('required');\n    }\n}\n\ndocument.getElementById('btnPrevCook').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\ndocument.getElementById('btnPrevMail').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\n\ndocument.getElementById('btnPrivate').onclick = function () {\n    docDat.public = false;\n    normSave();\n};\n\ndocument.getElementById('btnAprove').onclick = function () {\n    if (docDat.revised[lang] && docDat.revised[lang].includes(uid)) {\n        docDat.revised[lang].splice(docDat.revised[lang].indexOf(uid), 1);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n    } else {\n        if (!docDat.revised[lang]) docDat.revised[lang] = [];\n        docDat.revised[lang].push(uid);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n    }\n    normSave();\n};\n\n$('#mdlAddMed').on('hiden.bs.modal', e => {\n    document.getElementById('inMedSrc0').setAttribute('checked', 'false');\n    document.getElementById('inMedSrc1').setAttribute('checked', 'false');\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n});\n\n$('#mdlPublish').on('show.bs.modal', e => {\n    let revLangs = 0;\n    langs.forEach(l => {\n        let rev = docDat.revised[l] ? docDat.revised[l].length : 0;\n        if (docDat.revised[l] && !docDat.revised[l].includes(uid)) rev++;\n        if (rev >= 2) revLangs++;\n    });\n    if (revLangs == langs.length) {\n        classes(document.getElementById('btnCnfPublish'), \"d-none\");\n        document.getElementById('mdlPublishTxt').innerText = \"Para publicar es necesario que lo hayan aprovado al menos dos personas.\";\n        document.getElementById('frmPublish').classList.add('d-none');\n    } else {\n        document.getElementById('btnCnfPublish').classList.remove(\"d-none\");\n        document.getElementById('mdlPublishTxt').innerText = \"La galleta está lista para publicar\";\n        document.getElementById('frmPublish').classList.remove('d-none');\n        if (docDat.beenPublic) document.getElementById('sendUptCont').classList.remove('d-none');\n    }\n});\n\nfunction finishPub() {\n    setprog(document.getElementById('barPublish'), 100);\n    classes(document.getElementById('barPublish'), 'bg-success');\n    if (lang = \"es\") {\n        alertTop(\"Publicado correctamente\", 1);\n    } else if (lang = \"en\") {\n        alertTop(\"Published successfully\", 1);\n    }\n    setTimeout(function () {\n        window.open(docDat.url, '_blank').focus();\n    }, 2500);\n    console.log(\"Data saved successfully.\");\n    $('#mdlPublish').modal('hide');\n}\nfunction fillKW() {\n    let n = 0\n    function prog() {\n        setprog(document.getElementById('barPublish'), n);\n    }\n    keywords = [];\n    keywords.push(docDat.published.toDate().getFullYear().toString());\n    keywords.push(docDat.ledit.toDate().getFullYear().toString());\n    n++;\n    prog();\n    allCats.forEach((cat, idx) => {\n        if (document.getElementById('cat' + idx).checked) keywords.push(cat);\n    });\n    n++;\n    prog();\n    docDat.authors.forEach(itm => {\n        itm.substring(1).split(' ').forEach(c => {\n            keywords.push(ultraClean(c, ''));\n        });\n        n += (3 / docDat.authors.length);\n        prog();\n    });\n\n    let toKW = [];\n\n    docDat.title.split(' ').forEach(itm => {\n        toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n    });\n    n++;\n    prog();\n\n    docDat.description.split(' ').forEach(itm => {\n        toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n        n += (3 / docDat.description.split(' ').length);\n        prog();\n    });\n\n    docDat.cont.forEach(sect => {\n        if (sect.type == 'parra') {\n            if (Number(sect.title) > 0) {\n                sect.titleTxt.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            sect.text.split(' ').forEach(itm => {\n                toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                n += (14 / docDat.cont.length / sect.text.split(' ').length);\n                prog();\n            });\n        } else if (sect.type == 'medSimple') {\n            if (sect.alt != \"\") {\n                sect.alt.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            if (sect.caption != \"\") {\n                sect.caption.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            n += (14 / docDat.cont.length);\n            prog();\n        }\n        //@#\n    });\n\n    let rToKW = [];\n    let l = toKW.length;\n    for (let i = 0; i < l; i++) {\n        let wrd = toKW[i];\n        let r = wrd.indexOf(' ');\n        if (r != -1) {\n            wrd.split(' ').forEach(itm => {\n                rToKW.push(itm);\n            });\n            toKW.splice(i, 1);\n            i--;\n            l--;\n        }\n    };\n\n    rToKW.forEach(itm => {\n        toKW.push(itm);\n    });\n    n++\n    prog();\n\n    l = toKW.length;\n    for (let i = 0; i < l; i++) {\n        toKW.splice(i, 1, ultraClean(toKW[i], ''));\n        n += (3 / toKW.length);\n        prog();\n    };\n\n    let kWObj = {}, sum = 0, wCount = 0;\n    let banWrds = [\"1\", \"2\", \"3\", \"4\", \"6\", \"7\", \"8\", \"9\", \"0\", \"tan\", \"ser\", \"los\", \"serian\", \"pero\", \"podemos\", \"su\", \"o\", \"y\", \"e\", \"la\", \"del\", \"es\", \"si\", \"en\", \"otro\", \"de\", \"tendrian\", \"no\", \"se\", \"una\", \"mas\", \"el\", \"a\", \"embargo\", \"las\", \"sin\", \"con\", \"un\", \"para\", \"por\", \"les\", \"\", \"vez\", \"gran\", \"este\", \"esta\", \"estos\", \"estas\", \"nos\", \"al\", \"dio\", \"has\", \"preguntado\", \"el\", \"lo\", \"tu\", \"tus\", \"hacen\", \"otros\", \"para\", \"ellos\", \"ellas\", \"ese\", \"esa\", \"esos\", \"esas\", \"detras\", \"delante\", \"nos\", \"le\", \"muy\", \"casi\", \"son\", \"pues\", \"a\", \"ha\", \"han\", \"fue\"];//@#\n    toKW.forEach(itm => {\n        if (!banWrds.includes(itm)) {\n            let num = kWObj[itm];\n            if (!num) {\n                kWObj[itm] = 1;\n                wCount++;\n            }\n            else kWObj[itm]++;\n            sum++;\n        }\n        n += (3 / toKW.length);\n        prog();\n    });\n\n    for (const [key, value] of Object.entries(kWObj)) {\n        if (value > sum / wCount) {\n            keywords.push(key);\n        }\n        n += (3 / Object.entries(kWObj).length);\n        prog();\n    }\n    docDat.cats = keywords;\n    console.log(keywords);\n}\n\ndocument.getElementById('btnCnfPublish').onclick = function () {\n    if (docDat.public) return;\n    setprog(document.getElementById('barPublish'), 0);\n    showEl(document.getElementById(\"barPublishCont\"));\n\n    docDat.public = true;\n    docDat.ledit = new firebase.firestore.Timestamp.now();\n    docDat.beenPublic = true;\n    docDat.revised = {};\n    setprog(document.getElementById('barPublish'), 31);\n\n    if (!docDat.beenPublic) {\n        docDat.notify = true;\n        docDat.published = new firebase.firestore.Timestamp.now();\n        setprog(document.getElementById('barPublish'), 62);\n    } else {\n        if (document.getElementById('inSendUpt').checked) {\n            docDat.dledit = true;\n            docDat.notify = true;\n        } else {\n            docDat.dledit = false;\n            docDat.notify = false;\n        }\n        setprog(document.getElementById('barPublish'), 45);\n        if (document.getElementById('inSendUpt').checked) {\n            docDat.uptMsg = true;\n            docDat.uptDescrip = document.getElementById('inUptDesc').value.trim();\n        } else {\n            docDat.uptMsg = false;\n            docDat.uptDescrip = \"\";\n        }\n        setprog(document.getElementById('barPublish'), 62);\n    }\n\n    saveDoc().then(() => {\n        rtDb.ref('galletas/' + docId).set({\n            pop: docDat.pop,\n            likes: docDat.likes,\n            favs: docDat.favs\n        }, err => {\n            if (err) {\n                console.log(\"Data could not be saved.\" + err);\n            } else {\n                setprog(document.getElementById('barPublish'), 84);\n                finishPub();\n            }\n        });\n    }).catch(err => {\n        if (lang = \"es\") {\n            alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n        } else if (lang = \"en\") {\n            alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n        }\n        console.log(err);\n    });\n};"]}