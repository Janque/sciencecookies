parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JCXk":[function(require,module,exports) {
var e,t,n,d,c,l,a,i,m,o,s,u,r,g,E,B,y,I=!1,b=!1,v=null;function f(){document.getElementById("inNewNck").value="",document.getElementById("inNwPP").value="",document.getElementById("preVIn").src="",document.getElementById("inNwPPL").innerHTML="Elige una imagen",document.getElementById("prBar").classList.add("d-none"),document.getElementById("frmChngPP").classList.remove("d-none"),document.getElementById("btnCnfNwPP").classList.remove("disabled"),document.getElementById("btnCanNwPP").classList.remove("disabled")}function P(){b?(document.getElementById("btnCanPref").disabled=!1,document.getElementById("btnCnfPref").disabled=!1):(document.getElementById("btnCanPref").setAttribute("disabled","true"),document.getElementById("btnCnfPref").setAttribute("disabled","true"))}function h(){document.getElementById("navBtnPrfl").classList.add("active"),document.getElementById("disPP").setAttribute("onerror","this.src='https://via.placeholder.com/20.webp'"),document.getElementById("disPP").src=photoURL,document.getElementById("disMail").innerHTML=email,document.getElementById("disName").innerHTML=displayName,document.getElementById("crdPrfl").classList.remove("d-none")}function L(){document.getElementById("navBtnFav").classList.add("active");let e="";c.forEach(function(t,n){e=e+'<li class="list-group-item text-light border-light bg-transparent"><a class="text-decoration-none text-light" href="galletas/'+l[n]+'">'+t+' <i class="fas fa-link"></i></a></li>'}),document.getElementById("cntFav").innerHTML=e,document.getElementById("crdFav").classList.remove("d-none")}function k(){document.getElementById("navBtnLike").classList.add("active");let e="";a.forEach(function(t,n){e=e+'<li class="list-group-item text-light border-light bg-transparent"><a class="text-decoration-none text-light" href="galletas/'+i[n]+'">'+t+' <i class="fas fa-link"></i></a></li>'}),document.getElementById("cntLike").innerHTML=e,document.getElementById("crdLike").classList.remove("d-none")}function p(){document.getElementById("navBtnPref").classList.add("active"),document.getElementById("inPubPrfl").checked=o,o?(document.getElementById("inPubEmail").disabled=!1,document.getElementById("inPubFL").disabled=!1,document.getElementById("inPubEmail").checked=vemail,document.getElementById("inPubFL").checked=u):(document.getElementById("inPubEmail").setAttribute("disabled","true"),document.getElementById("inPubFL").setAttribute("disabled","true"),document.getElementById("inPubEmail").checked=!1,document.getElementById("inPubFL").checked=!1),document.getElementById("inNews").checked=r,g=o,E=vemail,B=u,y=r,b=!1,P(),document.getElementById("crdPref").classList.remove("d-none")}function N(s){0==I?(db.collection("users").doc(uid).get().then(function(I){e=I.data().fav,t=I.data().liked,c=I.data().favn,l=I.data().favl,a=I.data().likedn,i=I.data().likedl,n=I.data().points,d=I.data().rank,m=I.data().publicID,o=I.data().visible,vemail=I.data().vemail,u=I.data().vfl,g=I.data().visible,E=I.data().vmail,B=I.data().vfl,r=I.data().rNews,y=I.data().rNews,w(s)}).catch(function(e){console.log(e)}),I=!0):w(s)}function w(e){"pref"==e?(document.getElementById("crdFav").classList.add("d-none"),document.getElementById("navBtnFav").classList.remove("active"),document.getElementById("crdLike").classList.add("d-none"),document.getElementById("navBtnLike").classList.remove("active"),document.getElementById("crdPrfl").classList.add("d-none"),document.getElementById("navBtnPrfl").classList.remove("active"),p()):"favs"==e?(document.getElementById("crdPrfl").classList.add("d-none"),document.getElementById("navBtnPrfl").classList.remove("active"),document.getElementById("crdLike").classList.add("d-none"),document.getElementById("navBtnLike").classList.remove("active"),document.getElementById("crdPref").classList.add("d-none"),document.getElementById("navBtnPref").classList.remove("active"),L()):"likes"==e?(document.getElementById("crdFav").classList.add("d-none"),document.getElementById("navBtnFav").classList.remove("active"),document.getElementById("crdPrfl").classList.add("d-none"),document.getElementById("navBtnPrfl").classList.remove("active"),document.getElementById("crdPref").classList.add("d-none"),document.getElementById("navBtnPref").classList.remove("active"),k()):(document.getElementById("crdFav").classList.add("d-none"),document.getElementById("navBtnFav").classList.remove("active"),document.getElementById("crdLike").classList.add("d-none"),document.getElementById("navBtnLike").classList.remove("active"),document.getElementById("crdPref").classList.add("d-none"),document.getElementById("navBtnPref").classList.remove("active"),h())}window.loaded=function(){firebase.auth().onAuthStateChanged(function(e){e?(document.getElementById("picUsr").setAttribute("onerror","this.src='https://via.placeholder.com/20.webp'"),document.getElementById("picUsr").src=photoURL,N(urlSrch.get("tab"))):$("#mdlRgstr").modal("show")}),document.getElementById("frmChngNk").addEventListener("submit",function(e){e.preventDefault(),displayName=document.getElementById("inNewNck").value,firebase.auth().currentUser.updateProfile({displayName:displayName}).then(function(){db.collection("usersPublic").doc(m).update({name:displayName,pic:photoURL,email:email,favn:c,favl:l,likedn:a,likedl:i,points:n,rank:d,visible:document.getElementById("inPubPrfl").checked,vemail:document.getElementById("inPubEmail").checked,vfl:document.getElementById("inPubFL").checked}).then(()=>{f(),document.getElementById("disName").innerHTML=newNk}).catch(e=>{console.log(e)})}).catch(function(e){console.log(e)}),$("#mdlCngNck").modal("hide")}),document.getElementById("frmPref").addEventListener("submit",function(e){e.preventDefault(),document.getElementById("btnCanPref").setAttribute("disabled","true"),document.getElementById("btnCnfPref").setAttribute("disabled","true"),db.collection("users").doc(uid).update({visible:document.getElementById("inPubPrfl").checked,vemail:document.getElementById("inPubEmail").checked,vfl:document.getElementById("inPubFL").checked,rNews:document.getElementById("inNews").checked}).then(()=>{if(r!=y){let e=db.collection("newsletters").doc("base");y?e.update({emails:firebase.firestore.FieldValue.arrayUnion(email)}):e.update({emails:firebase.firestore.FieldValue.arrayRemove(email)})}o=g,vemail=E,u=B,r=y,db.collection("usersPublic").doc(m).update({name:displayName,pic:photoURL,email:email,favn:c,favl:l,likedn:a,likedl:i,points:n,rank:d,visible:document.getElementById("inPubPrfl").checked,vemail:document.getElementById("inPubEmail").checked,vfl:document.getElementById("inPubFL").checked}).then(()=>{}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)}),(lang="es")?alertTop("Se han guardado los cambios",1):(lang="en")&&alertTop("Changes have been saved",1)}),document.getElementById("frmChngPP").addEventListener("submit",function(e){e.preventDefault(),document.getElementById("prBar").classList.remove("d-none"),document.getElementById("frmChngPP").classList.add("d-none"),document.getElementById("btnCnfNwPP").classList.add("disabled"),document.getElementById("btnCanNwPP").classList.add("disabled"),function(e){let t=storage.ref("ppics/"+m+"/pp");t.put(e).on("state_changed",function(e){let t=e.bytesTransferred/e.totalBytes*100;document.getElementById("prBarDis").style.width=t+"%"},function(e){f(),$("#mdlCngPP").modal("hide"),(lang="es")?alertTop("<strong>¡Ha ocurrido un error!</strong> Revisa que tu archivo cumpla los límites y sea una imagen e intenta de nuevo.",2):(lang="en")&&alertTop("<strong>¡There has been an error!</strong> Check that your file meets the limits and is an image and try again.",2)},function(){document.getElementById("picUsr").src=document.getElementById("preVIn").src,document.getElementById("disPP").src=document.getElementById("preVIn").src,f(),$("#mdlCngPP").modal("hide"),t.getDownloadURL().then(e=>{e=e.replace("pp?","pp_200x200?"),firebase.auth().currentUser.updateProfile({photoURL:e}).then(()=>{db.collection("usersPublic").doc(m).update({pic:e,email:email,favn:c,favl:l,likedn:a,likedl:i,points:n,rank:d}).then(()=>{}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})})}(v)}),document.getElementById("inNwPP").addEventListener("change",function(e){var t;v=e.target.files[0],document.getElementById("inNwPPL").innerHTML=v.name,(t=new FileReader).readAsDataURL(v),t.onload=function(e){document.getElementById("preVIn").src=e.target.result}})},document.getElementById("inPubPrfl").onclick=function(){g?(document.getElementById("inPubEmail").setAttribute("disabled","true"),document.getElementById("inPubFL").setAttribute("disabled","true"),document.getElementById("inPubEmail").checked=!1,document.getElementById("inPubFL").checked=!1):(document.getElementById("inPubEmail").disabled=!1,document.getElementById("inPubFL").disabled=!1,document.getElementById("inPubEmail").checked=E,document.getElementById("inPubFL").checked=B),g=!g,b=!(document.getElementById("inPubPrfl").checked==o&&document.getElementById("inPubEmail").checked==vemail&&document.getElementById("inPubFL").checked==u&&document.getElementById("inNews").checked==r),P()},document.getElementById("inPubEmail").onclick=function(){E=!E,b=!(document.getElementById("inPubPrfl").checked==o&&document.getElementById("inPubEmail").checked==vemail&&document.getElementById("inPubFL").checked==u&&document.getElementById("inNews").checked==r),P()},document.getElementById("inPubFL").onclick=function(){B=!B,b=!(document.getElementById("inPubPrfl").checked==o&&document.getElementById("inPubEmail").checked==vemail&&document.getElementById("inPubFL").checked==u&&document.getElementById("inNews").checked==r),P()},document.getElementById("inNews").onclick=function(){y=!y,b=!(document.getElementById("inPubPrfl").checked==o&&document.getElementById("inPubEmail").checked==vemail&&document.getElementById("inPubFL").checked==u&&document.getElementById("inNews").checked==r),P()};
},{}]},{},["JCXk"], null)
//# sourceMappingURL=/profile.92ff32f5.js.map