parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"AnJc":[function(require,module,exports) {

},{}],"ppKG":[function(require,module,exports) {
"use strict";function e(e,l){return o(e)||a(e,l)||n(e,l)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function a(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],l=!0,a=!1,o=void 0;try{for(var i,d=e[Symbol.iterator]();!(l=(i=d.next()).done)&&(n.push(i.value),!t||n.length!==t);l=!0);}catch(r){a=!0,o=r}finally{try{l||null==d.return||d.return()}finally{if(a)throw o}}return n}}function o(e){if(Array.isArray(e))return e}require("../styles/edit.scss");var i,d,r,c=firebase.storage(),s=firebase.database(),u=-1,m=-1,p=Date.now(),h=!1,b=-1,g=-1,f=-1,v=null,E=null,y=[];function C(){return console.log("Saving..."),db.collection("galletasCont").doc(d).update(i)}function I(){C().then(function(){h&&clearInterval(r),h=!0,r=setInterval(function(){var e=Math.floor((Date.now()-p)/6e4);document.getElementById("tagLstSave").innerText=e<60?"Guardado hace "+e+" minutos":"Guardado hace "+Math.floor(e/60)+" horas"},300010),document.getElementById("tagLstSave").innerText="Se han guardado todos los cambios",p=Date.now()}).catch(function(e){document.getElementById("tagLstSave").innerText="Error, no se han guardado todos los cambios: "+e.code,console.log(e)})}function B(e){var t=null;"html"==e?t={type:e,html:""}:"parra"==e?t={type:e,text:"",title:"0"}:"youtube"==e?t={type:e,vidUrl:"",ratio:"16by9"}:"medSimple"==e&&(t={type:e,medUrl:"img/noimg.png",alt:"",caption:"",hasCapt:"true",width:"75%"}),null!=t&&i.cont.splice(m,0,t),k()}function w(e,t){e.setAttribute("aria-valuenow",t),e.style.width=t+"%",e.innerText=t+"%"}function M(e){return c.ref("cookieMedia/"+d+"/"+e).delete()}function A(){document.getElementById("contMedMan").innerHTML='<div class="col mb-4">\n        <div class="card text-dark bg-light h-100 cardBorder" style="border-color: #343a40;">\n            <a type="button" data-toggle="modal" data-target="#mdlAddMed" data-dismiss="modal" aria-label="Close" class="text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center" onclick="addFrom=0;">\n                <h1 style="font-size: 6rem;" class="mb-0"><i class="far fa-plus-square"></i></h1>\n            </a>\n        </div>\n    </div>',document.getElementById("contMedCho").innerHTML='<div class="col mb-4">\n        <div class="card text-dark bg-light h-100 cardBorder" style="border-color: #343a40;">\n            <a type="button" data-toggle="modal" data-target="#mdlAddMed" data-dismiss="modal" aria-label="Close" class="text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center" onclick="addFrom=1;">\n                <h1 style="font-size: 6rem;" class="mb-0"><i class="far fa-plus-square"></i></h1>\n            </a>\n        </div>\n    </div>',i.media.forEach(function(e,t){var n=document.createElement("div");classes(n,"col mb-4");var l=document.createElement("div");classes(l,"card text-light bg-dark"),n.appendChild(l);var a=document.createElement("img");classes(a,"card-img"),a.src=e.medUrl,l.appendChild(a);var o=document.createElement("div");classes(o,"card-img-overlay pt-0"),o.style.paddingLeft=".9rem",o.style.paddingRight=".9rem",l.appendChild(o);var d=document.createElement("div");classes(d,"row mb-2 p-0"),o.appendChild(d);var r=document.createElement("button");classes(r,"btn btn-light btn-scckie btn-sm"),r.innerHTML='<i class="fas fa-trash-alt"></i>',r.onclick=function(){g==t?(g=-1,document.getElementById("btnAlrtClsSsn")&&document.getElementById("btnAlrtClsSsn").click(),"externo"!=e.medFile?M(e.medFile).then(function(){e.medUrl==i.picUrl&&(i.picUrl=""),i.media.splice(t,1),I()}).catch(function(e){return console.log(e)}):(e.medUrl==i.picUrl&&(i.picUrl=""),i.media.splice(t,1),I())):(document.getElementById("alrtClsSsn").innerHTML='<div id="alrtClsSsnAlrt" class="alert alert-danger alert-dismissible fade show fixed-top" role="alert">\n                    <strong>¿Quieres eliminar esta imagen?</strong> Presiona de nuevo el botón para confirmar.\n                    <button id="btnAlrtClsSsn" type="button" class="close" data-dismiss="alert" aria-label="Close">\n                        <span aria-hidden="true">&times;</span>\n                    </button>\n                </div>',g=t,setTimeout(function(){g=-1,document.getElementById("btnAlrtClsSsn")&&document.getElementById("btnAlrtClsSsn").click()},3e3))},d.appendChild(r);var c=document.createElement("div");classes(c,"tooltipn ml-auto");var s=document.createElement("button");classes(s,"btn btn-light btn-scckie btn-sm");var u=document.createElement("span");classes(u,"tooltipTextn"),u.innerHTML="Copiar",s.appendChild(u),s.innerHTML+='<i class="fas fa-link"></i>',s.onclick=function(){window.open(e.medUrl).focus(),u.innerHTML="URL copiado"},s.onmouseout=function(){u.innerHTML="Copiar"},c.appendChild(s),d.appendChild(c);var m=document.createElement("button"),p=document.createElement("button");e.medUrl==i.picUrl?(classes(m,"btn btn-light btn-scckie btn-sm ml-1"),m.innerHTML='<i class="fas fa-star"></i>',m.onclick=function(){i.picUrl="",I()},d.appendChild(m)):(classes(p,"btn btn-light btn-scckie btn-sm ml-1"),p.innerHTML='<i class="far fa-star"></i>',p.onclick=function(){i.picUrl=e.medUrl,I()},d.appendChild(p)),document.getElementById("contMedMan").appendChild(n);var h=document.createElement("div");classes(h,"col mb-4");var b=document.createElement("a");classes(b,"text-decoration-none"),b.setAttribute("type","button"),b.onclick=function(){-1!=f&&(i.cont[f].medUrl=e.medUrl,I())},b.setAttribute("data-dismiss","modal"),h.appendChild(b);var v=document.createElement("div");classes(v,"card text-light bg-dark"),b.appendChild(v);var E=document.createElement("img");classes(E,"card-img"),E.src=e.medUrl,v.appendChild(E),document.getElementById("contMedCho").appendChild(h)})}function k(){var e;document.getElementById("cont").innerHTML="",e=i.beenPublic?i.published:new firebase.firestore.Timestamp.now,i.cont.forEach(function(t,n){var l=document.createElement("div");l.id="sect"+n;var a=document.createElement("div");classes(a,"dropdown-divider mx-2"),"head"!=t.type&&l.appendChild(a);var o=document.createElement("div");o.id="sect"+n+"t";var d=document.createElement("div");classes(d,"d-none"),d.id="sect"+n+"f";var r,c,s,h,b=document.createElement("div");if(classes(b,"row mb-2 px-2"),"head"!=t.type&&"ref"!=t.type&&(r=document.createElement("button"),classes(r,"btn btn-light btn-link-scckie ml-2"),r.innerHTML='<i class="fas fa-trash-alt"></i>',r.onclick=function(){u==n?(u=-1,document.getElementById("btnAlrtClsSsn")&&document.getElementById("btnAlrtClsSsn").click(),i.cont.splice(n,1),k(),I()):(document.getElementById("alrtClsSsn").innerHTML='<div id="alrtClsSsnAlrt" class="alert alert-danger alert-dismissible fade show fixed-top" role="alert">\n                        <strong>¿Quieres eliminar esta sección?</strong> Presiona de nuevo el botón para confirmar.\n                        <button id="btnAlrtClsSsn" type="button" class="close" data-dismiss="alert" aria-label="Close">\n                            <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>',u=n,setTimeout(function(){u=-1,document.getElementById("btnAlrtClsSsn")&&document.getElementById("btnAlrtClsSsn").click()},3e3))},b.appendChild(r)),"ref"!=t.type&&(c=document.createElement("button"),classes(c,"btn btn-light btn-link-scckie ml-auto"),c.innerHTML='<i class="fas fa-edit"></i>',c.onclick=function(){if(toggleEl(c),toggleEl(s),toggleEl(d),"Se han guardado todos los cambios"==document.getElementById("tagLstSave").innerText){var e=Math.floor((Date.now()-p)/6e4);document.getElementById("tagLstSave").innerText=e>0?e>59?"Guardado hace "+Math.floor(e/60)+" horas":"Guardado hace "+e+" minutos":"Guardado hace "+Math.floor((Date.now()-p)/1e3)+" segundos"}},b.appendChild(c),s=document.createElement("button"),classes(s,"btn btn-light btn-link-scckie ml-auto d-none"),s.innerHTML='<i class="fas fa-check"></i>',s.onclick=function(){toggleEl(c),toggleEl(s),toggleEl(d),I()},b.appendChild(s),h=document.createElement("button"),classes(h,"btn btn-light btn-link-scckie mx-2"),h.innerHTML='<i class="fas fa-plus"></i>',h.setAttribute("data-toggle","modal"),h.setAttribute("data-target","#mdlPlusSect"),h.onclick=function(){m=n+1},b.appendChild(h)),l.appendChild(b),"head"==t.type){var g=e.toDate();g=g.getDate()+"/"+(g.getMonth()+1)+"/"+g.getFullYear();var v=i.ledit.toDate();v=v.getDate()+"/"+(v.getMonth()+1)+"/"+v.getFullYear();var E=document.createElement("h1");classes(E,"text-center"),E.innerHTML=i.cont[0].title,o.appendChild(E);var y=document.createElement("p");if(y.innerText="Publicado: "+g,o.appendChild(y),i.dledit){var C=document.createElement("p");C.innerText="Ultima actualización: "+v,o.appendChild(C)}var B=document.createElement("p");B.innerText="Autor(es):"+i.cont[0].author,o.appendChild(B);var w=document.createElement("div");classes(w,"row justify-content-center mb-2");var M=document.createElement("div");classes(M,"col col-lg-6");var A=document.createElement("input");classes(A,"form-control form-control-lg text-center"),A.setAttribute("type","text"),A.setAttribute("placeholder",i.cont[0].title),A.value=i.cont[0].title,M.appendChild(A),w.appendChild(M),d.appendChild(w),A.oninput=function(){i.title=i.cont[0].title=A.value.trim(),E.innerHTML=i.cont[0].title};var T=document.createElement("div");classes(T,"row mb-2");var x=document.createElement("label");classes(x,"col-sm-2 col-form-label"),x.innerText="Publicado: ";var L=document.createElement("div");classes(L,"col");var S=document.createElement("input");classes(S,"form-control"),S.setAttribute("type","text"),S.setAttribute("readonly","true"),S.value=g,L.appendChild(S),T.appendChild(x),T.appendChild(L),d.appendChild(T);var H=document.createElement("div"),U=document.createElement("label"),P=document.createElement("div"),N=document.createElement("input");i.dledit&&(classes(H,"row mb-2"),classes(U,"col-sm-2 col-form-label"),U.innerText="Ultima actualización: ",classes(P,"col"),classes(N,"form-control"),N.setAttribute("type","text"),N.setAttribute("readonly","true"),N.value=v,P.appendChild(N),H.appendChild(U),H.appendChild(P),d.appendChild(H));var D=document.createElement("div");classes(D,"row mb-2");var F=document.createElement("label");classes(F,"col-sm-2 col-form-label"),F.innerText="Autor(es): ";var j=document.createElement("div");classes(j,"form-row justify-content-around pt-2");var q=document.createElement("div");classes(q,"form-group col-auto mr-2");var J=document.createElement("div");classes(J,"form-check"),q.appendChild(J);var $=document.createElement("input");classes($,"form-check-input"),$.setAttribute("type","checkbox"),i.cont[0].author.includes(" Andrea Garma")&&$.setAttribute("checked","true"),$.value=" Andrea Garma";var R=document.createElement("label");classes(R,"form-check-label"),$.setAttribute("for","authr0"),R.innerText="Andrea Garma",J.appendChild($),J.appendChild(R),j.appendChild(q);var G=document.createElement("div");classes(G,"form-group col-auto mr-2");var O=document.createElement("div");classes(O,"form-check"),G.appendChild(O);var Y=document.createElement("input");classes(Y,"form-check-input"),Y.setAttribute("type","checkbox"),i.cont[0].author.includes(" Javier Pantoja")&&Y.setAttribute("checked","true"),Y.value=" Javier Pantoja";var z=document.createElement("label");classes(z,"form-check-label"),Y.setAttribute("for","authr1"),z.innerText="Javier Pantoja",O.appendChild(Y),O.appendChild(z),j.appendChild(G);var _=document.createElement("div");classes(_,"form-group col-auto mr-2");var V=document.createElement("div");classes(V,"form-check"),_.appendChild(V);var Q=document.createElement("input");classes(Q,"form-check-input"),Q.setAttribute("type","checkbox"),i.cont[0].author.includes(" Paulina Vargas")&&Q.setAttribute("checked","true"),Q.value=" Paulina Vargas";var W=document.createElement("label");function K(e,t,n){var l=[];e&&l.push(" Andrea Garma"),t&&l.push(" Javier Pantoja"),n&&l.push(" Paulina Vargas"),l.empty&&l.push(" Anónimo"),i.cont[0].author=l.slice(),i.authors=l.slice(),B.innerText="Autor(es):"+i.cont[0].author}classes(W,"form-check-label"),Q.setAttribute("for","authr2"),W.innerText="Paulina Vargas",V.appendChild(Q),V.appendChild(W),j.appendChild(_),$.onclick=function(){K($.checked,Y.checked,Q.checked)},Y.onclick=function(){K($.checked,Y.checked,Q.checked)},Q.onclick=function(){K($.checked,Y.checked,Q.checked)},D.appendChild(F),D.appendChild(j),d.appendChild(D)}else if("ref"==t.type){var X=document.createElement("h3");X.innerHTML="<br>Referencias",o.appendChild(X),t.ref.forEach(function(e,t){var l=document.createElement("div");classes(l,"row mb-2");var a=document.createElement("div");classes(a,"col"),l.appendChild(a);var d=document.createElement("div");classes(d,"col d-none"),l.appendChild(d);var r=document.createElement("div");classes(r,"col-auto"),l.appendChild(r);var c,s=document.createElement("p");function u(e){s.innerHTML=e}function m(e){s.innerHTML="",c=document.createElement("a"),classes(c,"text-warning text-break"),c.href=e,c.setAttribute("target","_blank"),c.setAttribute("rel","nofollow"),c.innerHTML=e+' <i class="fas fa-external-link-alt"></i>',s.appendChild(c)}function h(){E.value=E.value.trim(),i.cont[n].ref[t].link=v.value,i.cont[n].ref[t].type=E.value,"web"==e.type?(m(e.link),v.setAttribute("placeholder","https://google.com")):"cite"==e.type&&(u(e.link),v.setAttribute("placeholder","Referencia"))}a.appendChild(s),"web"==e.type?m(e.link):"cite"==e.type&&u(e.link);var b=document.createElement("div");classes(b,"row");var g=document.createElement("div");classes(g,"col");var f=document.createElement("div");classes(f,"col-auto");var v=document.createElement("input"),E=document.createElement("select");classes(v,"form-control"),v.setAttribute("type","text"),v.value=e.link,"web"==e.type&&v.setAttribute("placeholder","https://google.com"),"cite"==e.type&&v.setAttribute("placeholder","Referencia"),v.onchange=function(){h()},classes(E,"form-control form-control-sm");var y=document.createElement("option");y.value="web","web"==e.type&&y.setAttribute("selected","true"),y.innerText="Web",E.appendChild(y);var C,B,w=document.createElement("option");function M(){toggleEl(a),toggleEl(d),toggleEl(C),toggleEl(B)}"cite"==e.type&&w.setAttribute("selected","true"),w.value="cite",w.innerText="Otro",E.appendChild(w),E.onchange=function(){h()},g.appendChild(v),f.appendChild(E),b.appendChild(g),b.appendChild(f),d.appendChild(b),C=document.createElement("button"),classes(C,"btn btn-light btn-link-scckie ml-auto"),C.innerHTML='<i class="fas fa-edit"></i>',C.onclick=function(){M(),"Se han guardado todos los cambios"==document.getElementById("tagLstSave").innerText&&(document.getElementById("tagLstSave").innerText="Guardado hace "+Math.floor((Date.now()-p)/6e4)+" minutos")},B=document.createElement("button"),classes(B,"btn btn-light btn-link-scckie ml-auto d-none"),B.innerHTML='<i class="fas fa-check"></i>',B.onclick=function(){M(),i.cont[n].ref.sort(function(e,t){var n=e.link.toUpperCase(),l=t.link.toUpperCase();return n<l?-1:n>l?1:0}),I()},r.appendChild(C),r.appendChild(B);var A=document.createElement("button");classes(A,"btn btn-light btn-link-scckie ml-2"),A.innerHTML='<i class="fas fa-trash-alt"></i>',A.onclick=function(){i.cont[n].ref.splice(t,1),I()},r.appendChild(A),o.appendChild(l),""==e.link&&C.click()});var Z=document.createElement("a");classes(Z,"btn btn-light btn-scckie"),Z.onclick=function(){te()},Z.innerHTML='<i class="fas fa-plus"></i>',X.appendChild(Z);var ee=document.createElement("a");function te(){i.cont[n].ref.push({type:"web",link:""}),k()}classes(ee,"btn btn-light btn-scckie btn-lg btn-block border border-light"),ee.onclick=function(){te()},ee.innerHTML='<i class="fas fa-plus"></i>',o.appendChild(ee)}else if("parra"==t.type){var ne;Number(t.title)>0&&(2==Number(t.title)&&(o.innerHTML="<br>"),(ne=document.createElement("h"+t.title)).innerHTML=t.titleTxt,o.appendChild(ne));var le=document.createElement("p");le.innerHTML=t.text,o.appendChild(le);var ae=document.createElement("div");classes(ae,"row");var oe=document.createElement("div");classes(oe,"col");var ie=document.createElement("div");classes(ie,"col-auto");var de=document.createElement("input"),re=document.createElement("select");classes(de,"form-control"),de.setAttribute("type","text"),Number(t.title)>0?(de.value=t.titleTxt,de.setAttribute("placeholder","Subtítulo"),de.removeAttribute("readonly")):(de.value="",de.setAttribute("placeholder",""),de.setAttribute("readonly","true")),de.oninput=function(){i.cont[n].titleTxt=ne.innerHTML=de.value},classes(re,"form-control form-control-sm");for(var ce=0;ce<7;ce++){var se=document.createElement("option");se.value=ce,t.title==ce&&se.setAttribute("selected","true"),se.innerText=ce,re.appendChild(se)}re.oninput=function(){i.cont[n].title=re.value,Number(re.value)>0?(de.setAttribute("placeholder","Subtítulo"),de.removeAttribute("readonly"),2==Number(t.title)?o.innerHTML="<br>":o.innerHTML="",(ne=document.createElement("h"+t.title)).innerHTML=i.cont[n].titleTxt=de.value,o.appendChild(ne),o.appendChild(le)):(de.value="",de.setAttribute("placeholder",""),de.setAttribute("readonly","true"),i.cont[n].titleTxt=de.value,o.innerHTML="",o.appendChild(le))},oe.appendChild(de),ie.appendChild(re),ae.appendChild(oe),ae.appendChild(ie),d.appendChild(ae);var ue=document.createElement("div");classes(ae,"row mb-2");var me=document.createElement("div");classes(oe,"col");var pe=document.createElement("textarea");classes(pe,"form-control"),pe.setAttribute("rows","8"),pe.value=t.text,pe.oninput=function(){i.cont[n].text=le.innerHTML=pe.value.trim()},me.appendChild(pe),ue.appendChild(me),d.appendChild(ue),Number(t.title)>0&&""==t.titleTxt&&c.click()}else if("html"==t.type){var he=document.createElement("div");he.innerHTML=t.html,o.appendChild(he);var be=document.createElement("div");classes(be,"row mb-2");var ge=document.createElement("div");classes(ge,"col");var fe=document.createElement("textarea");classes(fe,"form-control"),fe.setAttribute("rows","8"),fe.value=t.html,fe.onchange=function(){i.cont[n].html=he.innerHTML=fe.value.trim()},ge.appendChild(fe),be.appendChild(ge),d.appendChild(be),""==t.html&&c.click()}else if("youtube"==t.type){var ve=document.createElement("div");classes(ve,"embed-responsive embed-responsive-"+t.ratio);var Ee=document.createElement("iframe");Ee.src=t.vidUrl,Ee.setAttribute("frameborder","0"),Ee.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),Ee.setAttribute("allowfullscreen","true"),ve.appendChild(Ee),o.appendChild(ve);var ye=document.createElement("div");classes(ye,"row");var Ce=document.createElement("div");classes(Ce,"col");var Ie=document.createElement("div");classes(Ie,"col-auto");var Be=document.createElement("label");Be.innerText="URL";var we=document.createElement("input");classes(we,"form-control"),we.setAttribute("type","text"),we.value=t.vidUrl,we.onchange=function(){var e=we.value.trim();if(11==e.length)e="https://www.youtube.com/embed/"+e;else{var t,l=1;do{t=e[l-1]+e[l],l++}while("e/"!=t&&"v="!=t);e="https://www.youtube.com/embed/"+e.substr(l,11)}i.cont[n].vidUrl=Ee.src=e};var Me=document.createElement("small");classes(Me,"text-muted"),Me.innerText="aaaaaaaaaaa o https://youtu.be/aaaaaaaaaaa o https://www.youtube.com/watch?v=aaaaaaaaaaa";var Ae=document.createElement("label");Ae.innerText="Ratio";var ke=document.createElement("select");classes(ke,"form-control form-control-sm");for(var Te=["21by9","16by9","4by3","1by1"],xe=0;xe<4;xe++){var Le=document.createElement("option");Le.value=Te[xe],t.ratio==Te[xe]&&Le.setAttribute("selected","true"),Le.innerText=Te[xe].replaceAll("by",":"),ke.appendChild(Le)}ke.oninput=function(){i.cont[n].ratio=ke.value,Te.forEach(function(e){ve.classList.remove("embed-responsive-"+e)}),classes(ve,"embed-responsive-"+t.ratio)},Ce.appendChild(Be),Ce.appendChild(we),Ce.appendChild(Me),Ie.appendChild(Ae),Ie.appendChild(ke),ye.appendChild(Ce),ye.appendChild(Ie),d.appendChild(ye),""==t.vidUrl&&c.click()}else if("medSimple"==t.type){var Se=document.createElement("figure");classes(Se,"mx-auto"),Se.style.width=t.width,Se.style.position="relative",Se.style.borderRadius=".25rem";var He=document.createElement("img");He.setAttribute("alt",t.alt),He.src=t.medUrl,classes(He,"w-100"),Se.appendChild(He);var Ue=document.createElement("div");classes(Ue,"card-img-overlay pt-0"),Ue.style.paddingLeft=".9rem",Ue.style.paddingRight=".9rem";var Pe=document.createElement("div");classes(Pe,"row mb-2 p-0"),Ue.appendChild(Pe);var Ne=document.createElement("button");classes(Ne,"btn btn-light btn-scckie btn-sm ml-auto"),Ne.innerHTML='<i class="fas fa-exchange-alt"></i>',Ne.setAttribute("data-toggle","modal"),Ne.setAttribute("data-target","#mdlMedCho"),Ne.onclick=function(){f=n},Pe.appendChild(Ne),Se.appendChild(Ue);var De=document.createElement("figcaption");De.style.fontSize="70%",De.style.fontWeight="lighter",De.innerHTML=t.caption,t.hasCapt&&Se.appendChild(De),o.appendChild(Se);var Fe=document.createElement("div");classes(Fe,"form-group mb-2");var je=document.createElement("label");je.innerText="Tamaño";var qe=document.createElement("div");classes(qe,"row");var Je=document.createElement("div");classes(Je,"col align-center d-flex pr-0");var $e=document.createElement("input");$e.setAttribute("type","range"),$e.setAttribute("max","100"),$e.setAttribute("min","0"),$e.setAttribute("step","1"),$e.value="75",classes($e,"form-control-range"),$e.oninput=function(){Re.innerHTML=$e.value+"%",Se.style.width=i.cont[n].width=$e.value+"%"},Je.appendChild($e);var Re=document.createElement("span");classes(Re,"badge badge-primary range-value-L"),Re.innerText="75%";var Ge=document.createElement("div");classes(Ge,"col-auto"),Ge.appendChild(Re),qe.appendChild(Je),qe.appendChild(Ge),Fe.appendChild(je),Fe.appendChild(qe),d.appendChild(Fe);var Oe=document.createElement("div");classes(Oe,"row");var Ye=document.createElement("div");classes(Ye,"col");var ze=document.createElement("div");classes(ze,"col-auto");var _e=document.createElement("label");_e.innerText="Pie de foto";var Ve=document.createElement("input");classes(Ve,"form-control"),Ve.setAttribute("type","text"),Ve.value=t.caption,Ve.oninput=function(){De.innerHTML=i.cont[n].caption=Ve.value.trim()};var Qe=document.createElement("select");classes(Qe,"form-control form-control-sm");var We=document.createElement("option");We.value="true","true"==t.hasCapt&&We.setAttribute("selected","true"),We.innerText="Sí",Qe.appendChild(We);var Ke=document.createElement("option");Ke.value="false","false"==t.hasCapt&&Ke.setAttribute("selected","true"),Ke.innerText="No",Qe.appendChild(Ke),Qe.oninput=function(){i.cont[n].hasCapt=Qe.value,"true"==Qe.value?(De.innerHTML=Ve.value=i.cont[n].caption,Ve.removeAttribute("readonly"),Se.appendChild(De)):(Ve.value=i.cont[n].caption="",Ve.setAttribute("readonly","true"),De.innerHTML="",Se.innerHTML="",Se.appendChild(He),Se.appendChild(Ue))},Ye.appendChild(_e),Ye.appendChild(Ve),ze.appendChild(Qe),Oe.appendChild(Ye),Oe.appendChild(ze),d.appendChild(Oe);var Xe=document.createElement("div");classes(Xe,"row");var Ze=document.createElement("div");classes(Ze,"col");var et=document.createElement("label");et.innerText="Alt";var tt=document.createElement("input");classes(tt,"form-control"),tt.setAttribute("type","text"),tt.value=t.alt,tt.oninput=function(){i.cont[n].alt=tt.value.trim(),He.setAttribute("alt",tt.value.trim())},Ze.appendChild(et),Ze.appendChild(tt),Xe.appendChild(Ze),d.appendChild(Xe),"true"==t.hasCapt&&""==t.caption&&c.click()}l.appendChild(o),l.appendChild(d),document.getElementById("cont").appendChild(l)}),document.getElementById("inJava").innerText=i.java,document.getElementById("javaIns").innerHTML=i.java}function T(){w(document.getElementById("barPublish"),"100"),classes(document.getElementById("barPublish"),"bg-success"),document.getElementById("alrtClsSsn").innerHTML='<div id="alrtClsSsnAlrt" class="alert alert-success alert-dismissible fade show fixed-bottom" role="alert">Publicado correctamente<strong></strong>                                                                           <button id="btnAlrtClsSsn" type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>';var e=i.published.toDate(),t=e.getFullYear().toString();e.getMonth()<9&&(t+="0"),t+=e.getMonth()+1,setTimeout(function(){window.open("../galletas/"+t+"/"+i.file,"_blank").focus()},2500),console.log("Data saved successfully."),setTimeout(function(){document.getElementById("btnAlrtClsSsn").click()},3e3),$("#alrtClsSsnAlrt").on("closed.bs.alert",function(){document.getElementById("alrtClsSsn").innerHTML=""}),$("#mdlPublish").modal("hide")}function x(){var t=0;function n(){w(document.getElementById("barPublish"),Math.floor(t).toString())}(y=[]).push(i.published.toDate().getFullYear().toString()),y.push(i.ledit.toDate().getFullYear().toString()),t++,n(),document.getElementById("cat0").checked&&y.push("astronomia"),document.getElementById("cat1").checked&&y.push("biologia"),document.getElementById("cat2").checked&&y.push("curiosidades"),document.getElementById("cat3").checked&&y.push("fisica"),document.getElementById("cat4").checked&&y.push("tecnologia"),t++,n(),i.authors.forEach(function(e){e.substring(1).split(" ").forEach(function(e){y.push(ultraClean(e,""))}),t+=3/i.authors.length,n()});var l=[];i.title.split(" ").forEach(function(e){l.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim())}),t++,n(),i.description.split(" ").forEach(function(e){l.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim()),t+=3/i.description.split(" ").length,n()}),i.cont.forEach(function(e){"parra"==e.type?(Number(e.title)>0&&e.titleTxt.split(" ").forEach(function(e){l.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim())}),e.text.split(" ").forEach(function(a){l.push(a.replaceAll(/(<([^>]*)>)/gi," ").trim()),t+=14/i.cont.length/e.text.split(" ").length,n()})):"medSimple"==e.type&&(""!=e.alt&&e.alt.split(" ").forEach(function(e){l.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim())}),""!=e.caption&&e.caption.split(" ").forEach(function(e){l.push(e.replaceAll(/(<([^>]*)>)/gi," ").trim())}),t+=14/i.cont.length,n())});for(var a=[],o=l.length,d=0;d<o;d++){var r=l[d];-1!=r.indexOf(" ")&&(r.split(" ").forEach(function(e){a.push(e)}),l.splice(d,1),d--,o--)}a.forEach(function(e){l.push(e)}),t++,n(),o=l.length;for(var c=0;c<o;c++)l.splice(c,1,ultraClean(l[c],"")),t+=3/l.length,n();var s={},u=0,m=0,p=["1","2","3","4","6","7","8","9","0","tan","ser","los","serian","pero","podemos","su","o","y","e","la","del","es","si","en","otro","de","tendrian","no","se","una","mas","el","a","embargo","las","sin","con","un","para","por","les","","vez","gran","este","esta","estos","estas","nos","al","dio","has","preguntado","el","lo","tu","tus","hacen","otros","para","ellos","ellas","ese","esa","esos","esas","detras","delante","nos","le","muy","casi","son","pues","a","ha","han","fue"];l.forEach(function(e){p.includes(e)||(s[e]?s[e]++:(s[e]=1,m++),u++);t+=3/l.length,n()});for(var h=0,b=Object.entries(s);h<b.length;h++){var g=e(b[h],2),f=g[0];g[1]>u/m&&y.push(f),t+=3/Object.entries(s).length,n()}console.log(y)}window.loaded=function(){db.collection("galletasCont").where("file","==",urlSrch.get("file")).limit(1).onSnapshot(function(e){e.empty?window.location.href="../404":e.forEach(function(e){i=e.data(),d=e.id,document.getElementById("inFile").value=i.file,document.getElementById("inDesc").value=i.description,k(),A(),i.public?(document.getElementById("btnPrivate").classList.remove("d-none"),document.getElementById("btnAprove").classList.add("d-none"),document.getElementById("btnPub").classList.add("d-none")):(document.getElementById("btnPrivate").classList.add("d-none"),document.getElementById("btnAprove").classList.remove("d-none"),document.getElementById("btnPub").classList.remove("d-none")),i.revised.includes(uid)?document.getElementById("btnAprove").innerHTML='<i class="fas fa-check-square"></i>':document.getElementById("btnAprove").innerHTML='<i class="far fa-check-square"></i>',x()})},function(e){return console.log(e)}),document.getElementById("frmFile").addEventListener("submit",function(e){var t;e.preventDefault(),t=document.getElementById("inFile").value,db.collection("galletasCont").where("file","==",t).limit(1).get().then(function(e){if(e.empty||t==urlSrch.get("file"))return i.description=document.getElementById("inDesc").value.trim(),i.file=t,C();document.getElementById("alrtPlusContainer").innerHTML='<div class="alert alert-danger alert-dismissible fade show fixed-top" role="alert">\n                    Ese nombre de archivo ya esta en uso.\n                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n                </div>'}).then(function(){window.location.href="?file="+t}).catch(function(e){return console.log(e)})}),document.getElementById("frmAddMed").addEventListener("submit",function(e){e.preventDefault(),w(document.getElementById("barNewMed"),"0"),showEl(document.getElementById("barNewMedCont")),hideEl(document.getElementById("frmAddMed")),document.getElementById("btnCnfNewMed").setAttribute("disabled","true"),document.getElementById("btnCanNewMed0").setAttribute("disabled","true"),document.getElementById("btnCanNewMed1").setAttribute("disabled","true"),"home"==E?function e(t){var n=c.ref("cookieMedia/"+d+"/i"+t+v.name);n.getDownloadURL().then(function(n){e(t+1)}).catch(function(e){"storage/object-not-found"==e.code?n.put(v).on("state_changed",function(e){w(document.getElementById("barNewMed"),Math.floor(e.bytesTransferred/e.totalBytes*100))},function(e){document.getElementById("alrtClsSsn").innerHTML='<div id="alrtClsSsnAlrt" class="alert alert-warning alert-dismissible fade show fixed-bottom" role="alert"><strong>¡Ocurrió un error!</strong> '+e.code+'<button id="btnAlrtClsSsn" type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',setTimeout(function(){document.getElementById("btnAlrtClsSsn")&&document.getElementById("btnAlrtClsSsn").click()},3e3),console.log(e),$("#mdlAddMed").modal("hide")},function(){n.getDownloadURL().then(function(e){i.media.push({medFile:"i"+t+v.name,medUrl:e}),I(),A(),$("#mdlAddMed").modal("hide"),0==b?$("#mdlMedMan").modal("show"):$("#mdlMedCho").modal("show")}).catch(function(e){console.log(e)})}):console.log(e)})}(0):(i.media.push({medFile:"externo",medUrl:document.getElementById("inNewMedUrl").value}),I(),$("#mdlAddMed").modal("hide"),0==b?$("#mdlMedMan").modal("show"):$("#mdlMedCho").modal("show"))})},document.getElementById("inFile").oninput=function(){document.getElementById("inFile").value=ultraClean(document.getElementById("inFile").value,"-")},document.getElementById("inJava").onchange=function(){i.java=document.getElementById("javaIns").innerHTML=document.getElementById("inJava").value},document.getElementById("btnEditJs").onclick=function(){toggleEl(document.getElementById("btnEditJs")),toggleEl(document.getElementById("btnCheckJs")),document.getElementById("inJava").removeAttribute("readonly")},document.getElementById("btnCheckJs").onclick=function(){toggleEl(document.getElementById("btnEditJs")),toggleEl(document.getElementById("btnCheckJs")),document.getElementById("inJava").setAttribute("readonly","true"),I()},$("#mdlAddMed").on("hidden.bs.modal",function(e){document.getElementById("prevNewMed").src="",document.getElementById("inNewMedL").innerHTML="Elige una imagen",document.getElementById("inNewMedUrl").value="",document.getElementById("inNewMed").removeAttribute("required"),document.getElementById("inNewMedUrl").removeAttribute("required"),hideEl(document.getElementById("barNewMedCont")),hideEl(document.getElementById("inNewMedFileCont")),hideEl(document.getElementById("inNewMedUrlCont")),showEl(document.getElementById("frmAddMed")),document.getElementById("btnCnfNewMed").removeAttribute("disabled"),document.getElementById("btnCanNewMed0").removeAttribute("disabled"),document.getElementById("btnCanNewMed1").removeAttribute("disabled")}),document.getElementById("inNewMed").addEventListener("change",function(e){var t;(v=e.target.files[0]).name=ultraClean(v.name,""),document.getElementById("inNewMedL").innerHTML=v.name,(t=new FileReader).readAsDataURL(v),t.onload=function(e){document.getElementById("prevNewMed").src=e.target.result}}),document.getElementById("inNewMedUrl").onchange=function(){document.getElementById("prevNewMed").src=document.getElementById("inNewMedUrl").value},document.getElementById("inMedSrc0").onclick=function(){E="home",document.getElementById("inNewMed").setAttribute("required","true"),document.getElementById("inNewMedUrl").removeAttribute("required"),showEl(document.getElementById("inNewMedFileCont")),hideEl(document.getElementById("inNewMedUrlCont"))},document.getElementById("inMedSrc1").onclick=function(){E="out",document.getElementById("inNewMed").removeAttribute("required"),document.getElementById("inNewMedUrl").setAttribute("required","true"),hideEl(document.getElementById("inNewMedFileCont")),showEl(document.getElementById("inNewMedUrlCont"))},document.getElementById("inSendUpt").onclick=function(){document.getElementById("inSendUpt").checked?(showEl(document.getElementById("uptDescCont")),document.getElementById("inUptDesc").setAttribute("required","true")):(hideEl(document.getElementById("uptDescCont")),document.getElementById("inUptDesc").removeAttribute("required"))},document.getElementById("btnPrevCook").onclick=function(){i.timePrev=new firebase.firestore.Timestamp.fromMillis(new Date(Date.now()).getTime()+9e5),C().then(function(){var e=i.published.toDate(),t=e.getFullYear().toString();e.getMonth()<9&&(t+="0"),t+=e.getMonth()+1,window.open("../galletas/"+t+"/"+i.file,"_blank").focus()}).catch(function(e){return console.log(e)})},document.getElementById("btnPrevMail").onclick=function(){i.timePrev=new firebase.firestore.Timestamp.fromMillis(new Date(Date.now()).getTime()+9e5),C().then(function(){window.open("../vista-email/"+i.file,"_blank").focus()}).catch(function(e){return console.log(e)})},document.getElementById("btnPrivate").onclick=function(){db.collection("galletasCont").doc(d).update({public:!1})},document.getElementById("btnAprove").onclick=function(){i.revised.includes(uid)?(i.revised.splice(i.revised.indexOf(uid),1),document.getElementById("btnAprove").innerHTML='<i class="far fa-check-square"></i>'):(i.revised.push(uid),document.getElementById("btnAprove").innerHTML='<i class="fas fa-check-square"></i>'),I()},$("#mdlAddMed").on("hiden.bs.modal",function(e){document.getElementById("inMedSrc0").setAttribute("checked","false"),document.getElementById("inMedSrc1").setAttribute("checked","false"),document.getElementById("inNewMed").removeAttribute("required"),document.getElementById("inNewMedUrl").removeAttribute("required"),hideEl(document.getElementById("inNewMedFileCont")),hideEl(document.getElementById("inNewMedUrlCont"))}),$("#mdlPublish").on("show.bs.modal",function(e){var t=i.revised.length;i.revised.includes(uid)||t++,t<2?(classes(document.getElementById("btnCnfPublish"),"d-none"),document.getElementById("mdlPublishTxt").innerText="Para publicar es necesario que lo hayan aprovado al menos dos personas.",document.getElementById("frmPublish").classList.add("d-none")):(document.getElementById("btnCnfPublish").classList.remove("d-none"),document.getElementById("mdlPublishTxt").innerText="La galleta está lista para publicar",document.getElementById("frmPublish").classList.remove("d-none"),i.beenPublic&&document.getElementById("sendUptCont").classList.remove("d-none"))}),document.getElementById("btnCnfPublish").onclick=function(){i.public||(w(document.getElementById("barPublish"),"0"),document.getElementById("barPublishCont").classList.remove("d-none"),x(),i.beenPublic?(w(document.getElementById("barPublish"),"30"),db.collection("galletasCont").doc(d).update({public:!0,ledit:new firebase.firestore.Timestamp.now,revised:[]}).then(function(){w(document.getElementById("barPublish"),"42");var e=i.published.toDate(),t=e.getFullYear().toString();e.getMonth()<9&&(t+="0"),t+=e.getMonth()+1;var n={title:i.title,descrip:i.description,url:"https://sciencecookies.net/galletas/"+t+"/"+i.file,picUrl:i.picUrl,authrs:i.authors,cats:y,public:!0};return w(document.getElementById("barPublish"),"57"),document.getElementById("inSendUpt").checked?(n.ledit=new firebase.firestore.Timestamp.now,n.dledit=!0,n.notify=!0):(n.dledit=!1,n.notify=!1),w(document.getElementById("barPublish"),"61"),document.getElementById("inSendUpt").checked?(n.uptMsg=!0,n.uptDescrip=document.getElementById("inUptDesc").value.trim()):(n.uptMsg=!1,n.uptDescrip=""),w(document.getElementById("barPublish"),"66"),db.collection("galletas").doc(d).update(n)}).then(function(){w(document.getElementById("barPublish"),"78"),T()}).catch(function(e){document.getElementById("alrtClsSsn").innerHTML='<div id="alrtClsSsnAlrt" class="alert alert-danger alert-dismissible fade show fixed-bottom" role="alert"><strong>!Ha ocurrido un error! </strong>'+e+'<button id="btnAlrtClsSsn" type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',console.log(e),setTimeout(function(){document.getElementById("btnAlrtClsSsn").click()},3e3),$("#alrtClsSsnAlrt").on("closed.bs.alert",function(){document.getElementById("alrtClsSsn").innerHTML=""})})):(w(document.getElementById("barPublish"),"30"),db.collection("galletasCont").doc(d).update({beenPublic:!0,public:!0,ledit:new firebase.firestore.Timestamp.now,published:new firebase.firestore.Timestamp.now,revised:[]}).then(function(){w(document.getElementById("barPublish"),"49");var e=i.published.toDate(),t=e.getFullYear().toString();return e.getMonth()<9&&(t+="0"),t+=e.getMonth()+1,db.collection("galletas").doc(d).set({likes:0,favs:0,pop:0,ledit:new firebase.firestore.Timestamp.now,date:new firebase.firestore.Timestamp.now,dledit:!1,notify:!1,public:!0,title:i.title,descrip:i.description,url:"https://sciencecookies.net/galletas/"+t+"/"+i.file,picUrl:i.picUrl,authrs:i.authors,cats:y})}).then(function(){w(document.getElementById("barPublish"),"78"),s.ref("galletas/"+d).set({pop:0,likes:0,favs:0},function(e){e?console.log("Data could not be saved."+e):(w(document.getElementById("barPublish"),"84"),T())})}).catch(function(e){document.getElementById("alrtClsSsn").innerHTML='<div id="alrtClsSsnAlrt" class="alert alert-danger alert-dismissible fade show fixed-bottom" role="alert"><strong>!Ha ocurrido un error! </strong>'+e+'<button id="btnAlrtClsSsn" type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',console.log(e),setTimeout(function(){document.getElementById("btnAlrtClsSsn").click()},3e3),$("#alrtClsSsnAlrt").on("closed.bs.alert",function(){document.getElementById("alrtClsSsn").innerHTML=""})})))};
},{"../styles/edit.scss":"AnJc"}]},{},["ppKG"], null)
//# sourceMappingURL=/edit.99ac59e2.js.map