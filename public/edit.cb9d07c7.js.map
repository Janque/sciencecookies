{"version":3,"sources":["js/edit.js"],"names":["store","firebase","storage","rtDb","database","docDat","docId","docRef","savedInterval","toDel","toAdd","lastSave","Date","now","saved","addFrom","toDelMed","toAddMed","newMedia","newMedSrc","keywords","translateSimple","text","from","target","translate","app","functions","httpsCallable","res","data","saveDoc","console","log","d","published","toDate","month","getFullYear","toString","getMonth","galletasText","lang","url","file","fillKW","promises","Promise","langs","forEach","l","syncUpt","authors","slice","media","java","notify","public","beenPublic","dledit","created","ledit","pop","likes","favs","revised","translations","fixedCats","cat","idx","splice","catTranslations","push","db","collection","doc","update","all","then","normSave","clearInterval","setInterval","minutes","Math","floor","document","getElementById","innerText","catch","err","code","setprog","bar","n","setAttribute","style","width","runprog","b","e","i","removeMedia","medFileName","ref","delete","fillMed","innerHTML","itm","col0","createElement","classes","card0","appendChild","img0","src","medUrl","over0","paddingLeft","paddingRight","btns0","medBtnDel","onclick","click","medFile","picUrl","alertTop","setTimeout","tooltip","medBtnCopy","tltipTxt","window","open","focus","onmouseout","medBtnUnstar","medBtnStar","col1","btnA1","cont","card1","img1","render","publishDate","firestore","Timestamp","item","sect","id","div","type","subt","subf","act","btnDel","btnEdit","btnCheck","btnAdd","btnTrans","selLang","selLangC","opt","value","get","title","html","titleTxt","alt","caption","toggleEl","getDate","ld","h","pPub","publishTxt","lstUptTxt","authrsTxt","pLEdit","pAuth","author","fd0","fc0","in0","oninput","trim","fd1","fl1","fc1","in1","fd2","fl2","fc2","in2","fd3","fl3","fr3","f3c0","f3f0","inAu0","includes","inAuL0","f3c1","f3f1","inAu1","inAuL1","f3c2","f3f2","inAu2","inAuL2","uptAuthors","a0","a1","a2","arr","empty","checked","refIdx","refR","cLink","cLinkFrm","cBtn","pRef","aRef","makeRefCite","makeRefWeb","href","changeRef","link","fr0","onchange","inOpt0","inOpt1","rBtnEdit","rBtnCheck","toggleRef","sort","a","linkA","toUpperCase","linkB","rBtnDel","btnPlusRef0","plusRef","btnPlusRef1","Number","p","removeAttribute","inOpt","fr1","f1c0","yt","ratio","iframe","vidUrl","in0L","convUrl","length","part","substr","help0","in1L","ratios","replaceAll","rat","classList","remove","fig","position","borderRadius","btnChange","capt","fontSize","fontWeight","hasCapt","rcont","rnL","ranR","ranRC0","in3","valL","ranRC1","in2L","fillTrans","finishPub","$","modal","prog","substring","split","c","ultraClean","toKW","description","rToKW","wrd","indexOf","kWObj","sum","wCount","banWrds","key","Object","entries","cats","loaded","fileFrm","cookiesFSRef","where","snap","allCats","fat","inp","lab","textCats","urlSrch","onSnapshot","add","uid","addEventListener","event","preventDefault","showEl","hideEl","ori","desc","toLowerCase","addMed","atempt","name","getDownloadURL","put","on","bytesTransferred","totalBytes","plusSect","newSect","files","prevMed","read","FileReader","readAsDataURL","onload","e2","result","timePrev","fromMillis","getTime","revLangs","rev","uptMsg","uptDescrip","set"],"mappings":"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","file":"edit.cb9d07c7.js","sourceRoot":"../src","sourcesContent":["import '../styles/edit.scss';\n\nvar store = firebase.storage();\nvar rtDb = firebase.database();\n\nlet docDat, docId, docRef;\nlet toDel = -1, toAdd = -1;\nlet lastSave = Date.now(), saved = false;\n\nlet addFrom = -1;\nlet toDelMed = -1, toAddMed = -1;\nlet newMedia = null;\nlet newMedSrc = null;\n\nlet keywords = [];\n\nasync function translateSimple(text, from, target) {\n    let translate = firebase.app().functions('us-east1').httpsCallable('translations-translateSimple');\n    let res = await translate({\n        text: text,\n        from: from,\n        target: target\n    });\n    return res.data;\n}\n\nwindow.loaded = function loaded() {\n    allCats.forEach((cat, i) => {\n        let fat = document.createElement('div');\n        classes(fat, \"form-group col-auto\");\n        let div = document.createElement('div');\n        classes(div, \"form-check\");\n        let inp = document.createElement('input');\n        inp.id = \"cat\" + i;\n        classes(inp, \"form-check-input\");\n        inp.value = cat;\n        inp.setAttribute('type', 'checkbox');\n        inp.onclick = function () {\n            if (inp.checked == true) {\n                docDat.fixedCats.push(this.value);\n            } else {\n                docDat.fixedCats.splice(docDat.fixedCats.indexOf(this.value), 1);\n            }\n        }\n        div.appendChild(inp);\n        let lab = document.createElement('label');\n        lab.setAttribute('for', 'cat' + i);\n        classes(lab, \"form-check-label\")\n        lab.innerText = textCats[i];\n        div.appendChild(lab);\n        fat.appendChild(div);\n        document.getElementById('catFrmCont').appendChild(fat);\n    });\n\n    docRef = cookiesFSRef.doc(urlSrch.get('id'));\n    docRef.onSnapshot(doc => {\n        docDat = doc.data();\n        docId = doc.id;\n        document.getElementById('inFile').value = docDat.file;\n        document.getElementById('inDesc').value = docDat.description;\n        allCats.forEach((cat, i) => {\n            document.getElementById('cat' + i).checked = docDat.fixedCats.includes(document.getElementById('cat' + i).value);\n        });\n        render();\n        fillMed();\n        if (docDat.public) {\n            document.getElementById('btnPrivate').classList.remove('d-none');\n            document.getElementById('btnAprove').classList.add('d-none');\n            document.getElementById('btnPub').classList.add('d-none');\n        } else {\n            document.getElementById('btnPrivate').classList.add('d-none');\n            document.getElementById('btnAprove').classList.remove('d-none');\n            document.getElementById('btnPub').classList.remove('d-none');\n        }\n        if (docDat.revised[lang] && docDat.revised[lang].includes(uid)) {\n            document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n        } else {\n            document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n        }\n        document.getElementById('btnPrevCook').href = docDat.url;\n        document.getElementById('btnPrevMail').href = '../vista-email/' + docDat.file;\n    }, err => { console.log(err) });\n\n    fillTrans();\n    function translateFrm() {\n        let translate = firebase.app().functions('us-east1').httpsCallable('translations-translateFullCookie');\n        return translate({\n            docId: docId,\n            from: document.getElementById('inTransFrom').value,\n            target: lang\n        });\n    }\n    document.getElementById(\"frmTranslate\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        classes(document.getElementById('btnCnfTranslate'), \"disabled\")\n        classes(document.getElementById('btnCanTranslate0'), \"disabled\")\n        classes(document.getElementById('btnCanTranslate1'), \"disabled\")\n        setprog('barTranslate', 0);\n        showEl(document.getElementById('barTranslateCont'));\n        runprog('barTranslate', 0, 90);\n        let transRes = translateFrm();\n        if (transRes) {\n            setprog('barTranslate', 100);\n            $('#mdlTranslate').modal('hide');\n            document.getElementById('btnCnfTranslate').classList.remove(\"disabled\");\n            document.getElementById('btnCanTranslate0').classList.remove(\"disabled\");\n            document.getElementById('btnCanTranslate1').classList.remove(\"disabled\");\n            hideEl(document.getElementById('barTranslateCont'))\n        } else {\n            if (lang = \"es\") {\n                alertTop(\"<strong>¡Ha ocurrido un error!</strong>\", 0);\n            } else if (lang = \"en\") {\n                alertTop(\"<strong>¡There has been an error!</strong>\", 0);\n            }\n            console.log('err');\n        }\n    });\n\n    function fileFrm() {\n        let file = document.getElementById('inFile').value;\n        cookiesFSRef.where(\"file\", \"==\", file).get().then(snap => {\n            if (!snap.empty && file != docDat.file) {\n                if (lang = \"es\") {\n                    alertTop(\"Ese nombre de archivo ya esta en uso.\", 0);\n                } else if (lang = \"en\") {\n                    alertTop(\"That file name is already in use.\", 0);\n                }\n            } else {\n                docDat.description = document.getElementById('inDesc').value.trim();\n                docDat.file = file;\n                normSave();\n            }\n        }).then(() => { console.log('exito') }).catch(err => console.log(err));\n    }\n    document.getElementById(\"frmFile\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        fileFrm();\n    });\n    langs.forEach((l, i) => {\n        if (l != lang) {\n            let opt = document.createElement('option');\n            if (i == 0) {\n                opt.setAttribute('selected', 'true');\n            }\n            opt.value = opt.innerText = l;\n            document.getElementById('selFileTrans').appendChild(opt);\n        }\n    })\n    document.getElementById('btnFileTrans').onclick = function () {\n        let ori = document.getElementById('selFileTrans').value\n        db.collection('cookies/langs/' + ori).doc(docId).get().then(async function (doc) {\n            let file = doc.data().file;\n            let desc = doc.data().description;\n            document.getElementById('inFile').value = await translateSimple(file, ori, lang);\n            document.getElementById('inFile').value = document.getElementById('inFile').value.trim().toLowerCase().replaceAll(' ', '-');\n            document.getElementById('inDesc').value = await translateSimple(desc, ori, lang);\n            fileFrm();\n        }).catch(err => console.log(err));\n    }\n\n    function addMed(atempt) {\n        let ref = store.ref('cookieMedia/' + docId + '/i' + atempt + newMedia.name);\n        ref.getDownloadURL().then(res => {\n            addMed(atempt + 1);\n        }).catch(err => {\n            if (err.code == 'storage/object-not-found') {\n                ref.put(newMedia).on('state_changed',\n                    function progress(snap) {\n                        setprog('barNewMed', (snap.bytesTransferred / snap.totalBytes) * 100);\n                    },\n                    function error(err) {\n                        if (lang = \"es\") {\n                            alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n                        } else if (lang = \"en\") {\n                            alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n                        }\n                        console.log(err);\n                        $('#mdlAddMed').modal('hide');\n                    },\n                    function complete() {\n                        ref.getDownloadURL().then(medUrl => {\n                            docDat.media.push({\n                                medFile: 'i' + atempt + newMedia.name,\n                                medUrl: medUrl\n                            });\n                            normSave();\n                            fillMed();\n                            $('#mdlAddMed').modal('hide');\n                            if (addFrom == 0) $('#mdlMedMan').modal('show');\n                            else $('#mdlMedCho').modal('show');\n                        }).catch(err => { console.log(err) });\n                    }\n                );\n            } else {\n                console.log(err);\n            }\n        });\n    }\n    function addExtMed() {\n        docDat.media.push({\n            medFile: 'externo',\n            medUrl: document.getElementById('inNewMedUrl').value\n        });\n        normSave();\n        $('#mdlAddMed').modal('hide');\n        if (addFrom == 0) $('#mdlMedMan').modal('show');\n        else $('#mdlMedCho').modal('show');\n    }\n    document.getElementById(\"frmAddMed\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        setprog('barNewMed', 0);\n        showEl(document.getElementById(\"barNewMedCont\"));\n        hideEl(document.getElementById(\"frmAddMed\"));\n        document.getElementById(\"btnCnfNewMed\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanNewMed0\").setAttribute('disabled', 'true');\n        document.getElementById(\"btnCanNewMed1\").setAttribute('disabled', 'true');\n        if (newMedSrc == \"home\") addMed(0);\n        else addExtMed();\n    });\n}\n\nlet savedInterval;\nfunction saveDoc() {\n    console.log('Saving...');\n    let d = docDat.published.toDate();\n    let month = d.getFullYear().toString();\n    if (d.getMonth() < 9) {\n        month += '0';\n    }\n    month += (d.getMonth() + 1);\n    let galletasText = \"\";\n    switch (lang) {\n        case \"es\":\n            galletasText = \"galletas\";\n            break;\n        case \"en\":\n            galletasText = \"cookies\";\n            break;\n    }\n    docDat.url = 'https://sciencecookies.net/' + galletasText + '/' + month + '/' + docDat.file + '/';\n    fillKW();\n    const promises = [];\n    langs.forEach(l => {\n        if (l != lang) {\n            let syncUpt = {\n                authors: docDat.authors.slice(),\n                media: docDat.media.slice(),\n                java: docDat.java,\n                notify: docDat.notify,\n                public: docDat.public,\n                beenPublic: docDat.beenPublic,\n                dledit: docDat.dledit,\n                created: docDat.created,\n                ledit: docDat.ledit,\n                published: docDat.published,\n                pop: docDat.pop,\n                likes: docDat.likes,\n                favs: docDat.favs,\n                revised: docDat.revised,\n                translations: docDat.translations,\n                fixedCats: docDat.fixedCats.slice()\n            }\n            syncUpt.fixedCats.forEach(function (cat, idx) {\n                syncUpt.fixedCats.splice(idx, 1, catTranslations[cat][l]);\n            });\n            syncUpt.translations[lang] = docDat.url;\n            promises.push(db.collection('cookies/langs/' + l).doc(docId).update(syncUpt));\n        }\n    })\n    return Promise.all(promises).then(() => {\n        return docRef.update(docDat);\n    });\n}\nfunction normSave() {\n    saveDoc().then(() => {\n        if (saved) clearInterval(savedInterval);\n        saved = true;\n        savedInterval = setInterval(() => {\n            let minutes = Math.floor((Date.now() - lastSave) / 60000);\n            if (minutes < 60) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n            else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n        }, 300010);\n        document.getElementById('tagLstSave').innerText = \"Se han guardado todos los cambios\";\n        lastSave = Date.now();\n    }).catch(err => {\n        document.getElementById('tagLstSave').innerText = \"Error, no se han guardado todos los cambios: \" + err.code;\n        console.log(err);\n    });\n}\n\nwindow.plusSect = function plusSect(type) {\n    let newSect = null;\n    if (type == 'html') {\n        newSect = {\n            type: type,\n            html: \"\"\n        };\n    } else if (type == 'parra') {\n        newSect = {\n            type: type,\n            text: \"\",\n            title: \"0\"\n        };\n    } else if (type == 'youtube') {\n        newSect = {\n            type: type,\n            vidUrl: \"\",\n            ratio: \"16by9\"\n        };\n    } else if (type == 'medSimple') {\n        newSect = {\n            type: type,\n            medUrl: \"https://via.placeholder.com/150.webp\",\n            alt: \"\",\n            caption: \"\",\n            hasCapt: \"true\",\n            width: \"75%\"\n        };\n    }\n    //Add more@#\n    if (newSect != null) docDat.cont.splice(toAdd, 0, newSect);\n    render();\n}\n\nfunction setprog(bar, n) {\n    bar = document.getElementById(bar);\n    n = Math.floor(n);\n    bar.setAttribute('aria-valuenow', n);\n    bar.style.width = n + '%';\n    bar.innerText = n + '%';\n}\nfunction runprog(bar, b, e) {\n    b = Math.floor(b);\n    e = Math.floor(e);\n    for (let i = b; i <= e; i++) {\n        setprog(bar, i);\n    }\n}\n\nfunction removeMedia(medFileName) {\n    return store.ref('cookieMedia/' + docId + '/' + medFileName).delete();\n}\n\nfunction fillMed() {\n    document.getElementById('contMedMan').innerHTML = `<div class=\"col mb-4\">\n        <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n            <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlAddMed\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\" onclick=\"addFrom=0;\">\n                <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n            </a>\n        </div>\n    </div>`;\n    document.getElementById('contMedCho').innerHTML = `<div class=\"col mb-4\">\n        <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n            <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlAddMed\" data-dismiss=\"modal\" aria-label=\"Close\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\" onclick=\"addFrom=1;\">\n                <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n            </a>\n        </div>\n    </div>`;\n\n    docDat.media.forEach((itm, idx) => {\n        let col0 = document.createElement('div');\n        classes(col0, \"col mb-4\");\n        let card0 = document.createElement('div');\n        classes(card0, \"card text-light bg-dark\");\n        col0.appendChild(card0);\n        let img0 = document.createElement('img');\n        classes(img0, \"card-img\");\n        img0.src = itm.medUrl;\n        card0.appendChild(img0);\n        let over0 = document.createElement('div');\n        classes(over0, \"card-img-overlay pt-0\");\n        over0.style.paddingLeft = \".9rem\";\n        over0.style.paddingRight = \".9rem\";\n        card0.appendChild(over0);\n        let btns0 = document.createElement('div');\n        classes(btns0, \"row mb-2 p-0\");\n        over0.appendChild(btns0);\n        let medBtnDel = document.createElement('button');\n        classes(medBtnDel, \"btn btn-light btn-scckie btn-sm\");\n        medBtnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n        medBtnDel.onclick = function () {\n            if (toDelMed == idx) {\n                toDelMed = -1;\n                if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                if (itm.medFile != 'externo') {\n                    removeMedia(itm.medFile).then(() => {\n                        if (itm.medUrl == docDat.picUrl) {\n                            docDat.picUrl = \"\";\n                        }\n                        docDat.media.splice(idx, 1);\n                        normSave();\n                    }).catch(err => console.log(err));\n                } else {\n                    if (itm.medUrl == docDat.picUrl) {\n                        docDat.picUrl = \"\";\n                    }\n                    docDat.media.splice(idx, 1);\n                    normSave();\n                }\n            } else {\n                if (lang = \"es\") {\n                    alertTop(\"<strong>¿Quieres eliminar esta imagen?</strong> Presiona de nuevo el botón para confirmar.\", 2);\n                } else if (lang = \"en\") {\n                    alertTop(\"<strong>Do you want to delete this image? </strong> Press the button again to confirm.\", 2);\n                }\n                toDelMed = idx;\n                setTimeout(() => {\n                    toDelMed = -1;\n                }, 3000);\n            }\n        };\n        btns0.appendChild(medBtnDel);\n        let tooltip = document.createElement('div');\n        classes(tooltip, \"tooltipn ml-auto\");\n        let medBtnCopy = document.createElement('button');\n        classes(medBtnCopy, \"btn btn-light btn-scckie btn-sm\");\n        let tltipTxt = document.createElement('span');\n        classes(tltipTxt, \"tooltipTextn\");\n        tltipTxt.innerHTML = \"Copiar\";\n        medBtnCopy.appendChild(tltipTxt);\n        medBtnCopy.innerHTML += '<i class=\"fas fa-link\"></i>';\n        medBtnCopy.onclick = function () {\n            /*var copyText = document.getElementById(\"toCopy\");\n            //copyText.classList.remove('d-none');\n            copyText.select();\n            copyText.setSelectionRange(0, 99999);\n            document.execCommand(\"copy\");\n            //classes(copyText, \"d-none\");*/\n            window.open(itm.medUrl).focus();\n\n            tltipTxt.innerHTML = \"URL copiado\";\n        };\n        medBtnCopy.onmouseout = function () {\n            tltipTxt.innerHTML = \"Copiar\";\n        }\n        tooltip.appendChild(medBtnCopy);\n        btns0.appendChild(tooltip);\n        let medBtnUnstar = document.createElement('button');\n        let medBtnStar = document.createElement('button');\n        if (itm.medUrl == docDat.picUrl) {\n            classes(medBtnUnstar, \"btn btn-light btn-scckie btn-sm ml-1\");\n            medBtnUnstar.innerHTML = '<i class=\"fas fa-star\"></i>';\n            medBtnUnstar.onclick = function () {\n                docDat.picUrl = \"\";\n                normSave();\n            };\n            btns0.appendChild(medBtnUnstar);\n        } else {\n            classes(medBtnStar, \"btn btn-light btn-scckie btn-sm ml-1\");\n            medBtnStar.innerHTML = '<i class=\"far fa-star\"></i>';\n            medBtnStar.onclick = function () {\n                docDat.picUrl = itm.medUrl;\n                normSave();\n            };\n            btns0.appendChild(medBtnStar);\n        }\n\n        document.getElementById('contMedMan').appendChild(col0);\n\n\n        let col1 = document.createElement('div');\n        classes(col1, \"col mb-4\");\n        let btnA1 = document.createElement('a');\n        classes(btnA1, 'text-decoration-none');\n        btnA1.setAttribute('type', 'button');\n        btnA1.onclick = function () {\n            if (toAddMed == -1) return;\n            docDat.cont[toAddMed].medUrl = itm.medUrl;\n            normSave();\n        };\n        btnA1.setAttribute(\"data-dismiss\", \"modal\");\n        col1.appendChild(btnA1);\n        let card1 = document.createElement('div');\n        classes(card1, \"card text-light bg-dark\");\n        btnA1.appendChild(card1);\n        let img1 = document.createElement('img');\n        classes(img1, \"card-img\");\n        img1.src = itm.medUrl;\n        card1.appendChild(img1);\n\n        document.getElementById('contMedCho').appendChild(col1);\n    });\n}\n\nfunction render() {\n    document.getElementById('cont').innerHTML = \"\";\n    let publishDate;\n    if (docDat.beenPublic) {\n        publishDate = docDat.published;\n    } else {\n        docDat.published = publishDate = new firebase.firestore.Timestamp.now();\n    }\n    docDat.cont.forEach((item, idx) => {\n        let sect = document.createElement('div');\n        sect.id = 'sect' + idx;\n        let div = document.createElement('div');\n        classes(div, 'dropdown-divider mx-2')\n        if (item.type != 'head') sect.appendChild(div);\n\n        let subt = document.createElement('div');\n        subt.id = \"sect\" + idx + \"t\";\n        let subf = document.createElement('div');\n        classes(subf, \"d-none\");\n        subf.id = \"sect\" + idx + \"f\";\n\n        let act = document.createElement('div');\n        classes(act, 'row mb-2 px-2');\n        let btnDel, btnEdit, btnCheck, btnAdd, btnTrans, selLang;\n\n        if (item.type != 'head' && item.type != 'ref') {\n            btnDel = document.createElement('button');\n            classes(btnDel, 'btn btn-light btn-link-scckie ml-2');\n            btnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n            btnDel.onclick = function () {\n                if (toDel == idx) {\n                    toDel = -1;\n                    if (document.getElementById(\"btnAlrtClsSsn\")) document.getElementById(\"btnAlrtClsSsn\").click();\n                    docDat.cont.splice(idx, 1);\n                    render();//Important\n                    normSave();\n                } else {\n                    if (lang = \"es\") {\n                        alertTop(\"<strong>¿Quieres eliminar esta sección?</strong> Presiona de nuevo el botón para confirmar.\", 2);\n                    } else if (lang = \"en\") {\n                        alertTop(\"<strong>Do you want to delete this section? </strong> Press the button again to confirm.\", 2);\n                    }\n                    toDel = idx;\n                    setTimeout(() => {\n                        toDel = -1;\n                    }, 3000);\n                }\n            }\n            act.appendChild(btnDel);\n        }\n\n        let selLangC = document.createElement('div');\n        classes(selLangC, \"col-auto\");\n        selLang = document.createElement('select');\n        classes(selLang, \"form-control mr-0 ml-2 h-100\");\n        langs.forEach((l, i) => {\n            if (l != lang) {\n                let opt = document.createElement('option');\n                if (i == 0) {\n                    opt.setAttribute('selected', 'true');\n                }\n                opt.value = opt.innerText = l;\n                selLang.appendChild(opt);\n            }\n        })\n\n        if (item.type != 'ref') {\n            selLangC.appendChild(selLang);\n            act.appendChild(selLangC);\n            btnTrans = document.createElement('button');\n            classes(btnTrans, 'btn btn-light btn-link-scckie');\n            btnTrans.innerHTML = '<i class=\"fas fa-language\"></i>';\n            btnTrans.onclick = function () {\n                db.collection('cookies/langs/' + selLang.value).doc(docId).get().then(async function (doc) {\n                    let sect = doc.data().cont[idx];\n                    if (item.type != sect.type) return;\n                    if (sect.type == 'head') {\n                        docDat.cont[idx].title = await translateSimple(sect.title, selLang.value, lang);\n                    } else if (sect.type == 'html') {\n                        docDat.cont[idx].html = await translateSimple(sect.html, selLang.value, lang);\n                    } else if (sect.type == 'parra') {\n                        docDat.cont[idx].text = await translateSimple(sect.text, selLang.value, lang);\n                        if (sect.title != \"0\") {\n                            docDat.cont[idx].titleTxt = await translateSimple(sect.titleTxt, selLang.value, lang);\n                        }\n                    } else if (sect.type == 'medSimple') {\n                        docDat.cont[idx].alt = await translateSimple(sect.alt, selLang.value, lang);\n                        docDat.cont[idx].caption = await translateSimple(sect.caption, selLang.value, lang);\n                    }\n                    console.log(docDat.cont[idx]);\n                    normSave();\n                }).catch(err => console.log(err));\n            }\n            act.appendChild(btnTrans);\n\n            btnEdit = document.createElement('button');\n            classes(btnEdit, 'btn btn-light btn-link-scckie ml-auto');\n            btnEdit.innerHTML = '<i class=\"fas fa-edit\"></i>';\n            btnEdit.onclick = function () {\n                toggleEl(btnEdit);\n                toggleEl(btnCheck);\n                toggleEl(subf);\n                if (document.getElementById('tagLstSave').innerText == \"Se han guardado todos los cambios\") {\n                    let minutes = Math.floor((Date.now() - lastSave) / 60000);\n                    if (minutes > 0) {\n                        if (minutes > 59) document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor(minutes / 60) + \" horas\";\n                        else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + minutes + \" minutos\";\n                    } else document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor((Date.now() - lastSave) / 1000) + \" segundos\";\n                }\n            }\n            act.appendChild(btnEdit);\n            btnCheck = document.createElement('button');\n            classes(btnCheck, 'btn btn-light btn-link-scckie ml-auto d-none');\n            btnCheck.innerHTML = '<i class=\"fas fa-check\"></i>';\n            btnCheck.onclick = function () {\n                toggleEl(btnEdit);\n                toggleEl(btnCheck);\n                toggleEl(subf);\n                normSave();\n            }\n            act.appendChild(btnCheck);\n            btnAdd = document.createElement('button');\n            classes(btnAdd, 'btn btn-light btn-link-scckie mx-2');\n            btnAdd.innerHTML = '<i class=\"fas fa-plus\"></i>';\n            btnAdd.setAttribute('data-toggle', \"modal\");\n            btnAdd.setAttribute('data-target', \"#mdlPlusSect\");\n            btnAdd.onclick = function () {\n                toAdd = idx + 1;\n            }\n            act.appendChild(btnAdd);\n        }\n        sect.appendChild(act);\n\n        if (item.type == 'head') {\n            let d = publishDate.toDate();\n            d = d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();\n            let ld = docDat.ledit.toDate();\n            ld = ld.getDate() + '/' + (ld.getMonth() + 1) + '/' + ld.getFullYear();\n\n            let h = document.createElement('h1');\n            classes(h, \"text-center\");\n            h.innerHTML = docDat.cont[0].title;\n            subt.appendChild(h);\n            let pPub = document.createElement('p');\n            let publishTxt, lstUptTxt, authrsTxt;\n            if (lang == \"es\") {\n                publishTxt = \"Publicado: \";\n                lstUptTxt = \"Ultima actualización: \";\n                authrsTxt = \"Autor(es): \"\n            } else if (lang == \"en\") {\n                publishTxt = \"Published: \";\n                lstUptTxt = \"Last updated: \";\n                authrsTxt = \"Author(s):\"\n            }\n            pPub.innerText = publishTxt + d;\n            subt.appendChild(pPub);\n            if (docDat.dledit) {\n                let pLEdit = document.createElement('p');\n                pLEdit.innerText = lstUptTxt + ld;\n                subt.appendChild(pLEdit);\n            }\n            let pAuth = document.createElement('p');\n            pAuth.innerText = authrsTxt + docDat.cont[0].author;\n            subt.appendChild(pAuth);\n\n            let fd0 = document.createElement('div');\n            classes(fd0, \"row justify-content-center mb-2\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col col-lg-6\");\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control form-control-lg text-center\");\n            in0.setAttribute('type', 'text');\n            in0.setAttribute('placeholder', docDat.cont[0].title);\n            in0.value = docDat.cont[0].title;\n            fc0.appendChild(in0);\n            fd0.appendChild(fc0);\n            subf.appendChild(fd0);\n            in0.oninput = function () {\n                docDat.title = docDat.cont[0].title = in0.value.trim();\n                h.innerHTML = docDat.cont[0].title;\n            };\n\n            let fd1 = document.createElement('div');\n            classes(fd1, \"row mb-2\");\n            let fl1 = document.createElement('label');\n            classes(fl1, \"col-sm-2 col-form-label\");\n            fl1.innerText = publishTxt;\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col\");\n            let in1 = document.createElement('input');\n            classes(in1, \"form-control\");\n            in1.setAttribute('type', 'text');\n            in1.setAttribute('readonly', 'true');\n            in1.value = d;\n            fc1.appendChild(in1);\n            fd1.appendChild(fl1);\n            fd1.appendChild(fc1);\n            subf.appendChild(fd1);\n\n            let fd2 = document.createElement('div');\n            let fl2 = document.createElement('label');\n            let fc2 = document.createElement('div');\n            let in2 = document.createElement('input');\n            if (docDat.dledit) {\n                classes(fd2, \"row mb-2\");\n                classes(fl2, \"col-sm-2 col-form-label\");\n                fl2.innerText = lstUptTxt;\n                classes(fc2, \"col\");\n                classes(in2, \"form-control\");\n                in2.setAttribute('type', 'text');\n                in2.setAttribute('readonly', 'true');\n                in2.value = ld;\n                fc2.appendChild(in2);\n                fd2.appendChild(fl2);\n                fd2.appendChild(fc2);\n                subf.appendChild(fd2);\n            }\n\n            let fd3 = document.createElement('div');\n            classes(fd3, \"row mb-2\");\n            let fl3 = document.createElement('label');\n            classes(fl3, \"col-sm-2 col-form-label\");\n            fl3.innerText = authrsTxt;\n            let fr3 = document.createElement('div');\n            classes(fr3, \"form-row justify-content-around pt-2\");\n            let f3c0 = document.createElement('div');\n            classes(f3c0, \"form-group col-auto mr-2\");\n            let f3f0 = document.createElement('div');\n            classes(f3f0, \"form-check\");\n            f3c0.appendChild(f3f0);\n            let inAu0 = document.createElement('input');\n            classes(inAu0, \"form-check-input\");\n            inAu0.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Andrea Garma')) inAu0.setAttribute('checked', 'true');\n            inAu0.value = ' Andrea Garma';\n            let inAuL0 = document.createElement('label');\n            classes(inAuL0, \"form-check-label\");\n            inAu0.setAttribute('for', 'authr0');\n            inAuL0.innerText = \"Andrea Garma\";\n            f3f0.appendChild(inAu0);\n            f3f0.appendChild(inAuL0);\n            fr3.appendChild(f3c0);\n            let f3c1 = document.createElement('div');\n            classes(f3c1, \"form-group col-auto mr-2\");\n            let f3f1 = document.createElement('div');\n            classes(f3f1, \"form-check\");\n            f3c1.appendChild(f3f1);\n            let inAu1 = document.createElement('input');\n            classes(inAu1, \"form-check-input\");\n            inAu1.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Javier Pantoja')) inAu1.setAttribute('checked', 'true');\n            inAu1.value = ' Javier Pantoja';\n            let inAuL1 = document.createElement('label');\n            classes(inAuL1, \"form-check-label\");\n            inAu1.setAttribute('for', 'authr1');\n            inAuL1.innerText = \"Javier Pantoja\";\n            f3f1.appendChild(inAu1);\n            f3f1.appendChild(inAuL1);\n            fr3.appendChild(f3c1);\n            let f3c2 = document.createElement('div');\n            classes(f3c2, \"form-group col-auto mr-2\");\n            let f3f2 = document.createElement('div');\n            classes(f3f2, \"form-check\");\n            f3c2.appendChild(f3f2);\n            let inAu2 = document.createElement('input');\n            classes(inAu2, \"form-check-input\");\n            inAu2.setAttribute('type', 'checkbox');\n            if (docDat.cont[0].author.includes(' Paulina Vargas')) inAu2.setAttribute('checked', 'true');\n            inAu2.value = ' Paulina Vargas';\n            let inAuL2 = document.createElement('label');\n            classes(inAuL2, \"form-check-label\");\n            inAu2.setAttribute('for', 'authr2');\n            inAuL2.innerText = \"Paulina Vargas\";\n            f3f2.appendChild(inAu2);\n            f3f2.appendChild(inAuL2);\n            fr3.appendChild(f3c2);\n            function uptAuthors(a0, a1, a2) {\n                let arr = [];\n                if (a0) arr.push(\" Andrea Garma\");\n                if (a1) arr.push(\" Javier Pantoja\");\n                if (a2) arr.push(\" Paulina Vargas\");\n                if (arr.empty) arr.push(' Anónimo');\n                docDat.cont[0].author = arr.slice();\n                docDat.authors = arr.slice();\n                pAuth.innerText = \"Autor(es):\" + docDat.cont[0].author;\n            }\n            inAu0.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n            inAu1.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n            inAu2.onclick = function () {\n                uptAuthors(inAu0.checked, inAu1.checked, inAu2.checked);\n            };\n\n            fd3.appendChild(fl3);\n            fd3.appendChild(fr3);\n            subf.appendChild(fd3);\n        } else if (item.type == 'ref') {\n            let h = document.createElement('h3');\n            if (lang == \"es\") {\n                h.innerHTML = '<br>Referencias';\n            } else if (lang == \"en\") {\n                h.innerHTML = '<br>References';\n            }\n            subt.appendChild(h);\n            item.ref.forEach((ref, refIdx) => {\n                let refR = document.createElement('div');\n                classes(refR, \"row mb-2\");\n                let cLink = document.createElement('div');\n                classes(cLink, \"col\");\n                refR.appendChild(cLink);\n                let cLinkFrm = document.createElement('div');\n                classes(cLinkFrm, \"col d-none\");\n                refR.appendChild(cLinkFrm);\n                let cBtn = document.createElement('div');\n                classes(cBtn, \"col-auto\");\n                refR.appendChild(cBtn);\n                let pRef = document.createElement('p');\n                cLink.appendChild(pRef);\n                let aRef;\n\n                function makeRefCite(text) {\n                    pRef.innerHTML = text;\n                }\n                function makeRefWeb(text) {\n                    pRef.innerHTML = \"\";\n                    aRef = document.createElement('a');\n                    classes(aRef, \"text-warning text-break\")\n                    aRef.href = text;\n                    aRef.setAttribute('target', '_blank');\n                    aRef.setAttribute('rel', 'nofollow');\n                    aRef.innerHTML = text + ' <i class=\"fas fa-external-link-alt\"></i>'\n                    pRef.appendChild(aRef);\n                }\n                if (ref.type == 'web') {\n                    makeRefWeb(ref.link);\n                } else if (ref.type == 'cite') {\n                    makeRefCite(ref.link);\n                }\n\n                function changeRef() {\n                    in1.value = in1.value.trim();\n                    docDat.cont[idx].ref[refIdx].link = in0.value;\n                    docDat.cont[idx].ref[refIdx].type = in1.value;\n                    if (ref.type == 'web') {\n                        makeRefWeb(ref.link);\n                        in0.setAttribute('placeholder', 'https://google.com');\n                    } else if (ref.type == 'cite') {\n                        makeRefCite(ref.link);\n                        in0.setAttribute('placeholder', 'Ref');\n                    }\n                }\n                let fr0 = document.createElement('div');\n                classes(fr0, \"row\");\n                let fc0 = document.createElement('div');\n                classes(fc0, \"col\");\n                let fc1 = document.createElement('div');\n                classes(fc1, \"col-auto\");\n                let in0 = document.createElement('input');\n                let in1 = document.createElement('select');\n                classes(in0, \"form-control\");\n                in0.setAttribute('type', 'text');\n                in0.value = ref.link;\n                if (ref.type == 'web') in0.setAttribute('placeholder', 'https://google.com');\n                if (ref.type == 'cite') in0.setAttribute('placeholder', 'Ref');\n                in0.onchange = function () { changeRef(); }\n                classes(in1, \"form-control form-control-sm\");\n                let inOpt0 = document.createElement('option');\n                inOpt0.value = \"web\";\n                if (ref.type == 'web') inOpt0.setAttribute('selected', 'true');\n                inOpt0.innerText = 'Web';\n                in1.appendChild(inOpt0);\n                let inOpt1 = document.createElement('option');\n                if (ref.type == 'cite') inOpt1.setAttribute('selected', 'true');\n                inOpt1.value = \"cite\";\n                inOpt1.innerText = 'Otro';\n                in1.appendChild(inOpt1);\n                in1.onchange = function () { changeRef(); }\n                fc0.appendChild(in0);\n                fc1.appendChild(in1);\n                fr0.appendChild(fc0);\n                fr0.appendChild(fc1);\n                cLinkFrm.appendChild(fr0);\n\n                function toggleRef() {\n                    toggleEl(cLink);\n                    toggleEl(cLinkFrm);\n                    toggleEl(rBtnEdit);\n                    toggleEl(rBtnCheck);\n                }\n                let rBtnEdit, rBtnCheck;\n                rBtnEdit = document.createElement('button');\n                classes(rBtnEdit, 'btn btn-light btn-link-scckie ml-auto');\n                rBtnEdit.innerHTML = '<i class=\"fas fa-edit\"></i>';\n                rBtnEdit.onclick = function () {\n                    toggleRef();\n                    if (document.getElementById('tagLstSave').innerText == \"Se han guardado todos los cambios\") {\n                        document.getElementById('tagLstSave').innerText = \"Guardado hace \" + Math.floor((Date.now() - lastSave) / 60000) + \" minutos\";\n                    }\n                };\n                rBtnCheck = document.createElement('button');\n                classes(rBtnCheck, 'btn btn-light btn-link-scckie ml-auto d-none');\n                rBtnCheck.innerHTML = '<i class=\"fas fa-check\"></i>';\n                rBtnCheck.onclick = function () {\n                    toggleRef();\n                    docDat.cont[idx].ref.sort((a, b) => {\n                        let linkA = a.link.toUpperCase();\n                        let linkB = b.link.toUpperCase();\n                        if (linkA < linkB) return -1;\n                        if (linkA > linkB) return 1;\n                        return 0;\n                    });\n                    normSave();\n                };\n                cBtn.appendChild(rBtnEdit);\n                cBtn.appendChild(rBtnCheck);\n                let rBtnDel = document.createElement('button');\n                classes(rBtnDel, 'btn btn-light btn-link-scckie ml-2');\n                rBtnDel.innerHTML = '<i class=\"fas fa-trash-alt\"></i>';\n                rBtnDel.onclick = function () {\n                    docDat.cont[idx].ref.splice(refIdx, 1);\n                    normSave();\n                    render();//@#Important, why?\n                };\n                cBtn.appendChild(rBtnDel);\n\n                subt.appendChild(refR);\n\n                if (ref.link == \"\") {\n                    rBtnEdit.click();\n                }\n            });\n            let btnPlusRef0 = document.createElement('a');\n            classes(btnPlusRef0, \"btn btn-light btn-scckie\");\n            btnPlusRef0.onclick = function () { plusRef(); };\n            btnPlusRef0.innerHTML = '<i class=\"fas fa-plus\"></i>'\n            h.appendChild(btnPlusRef0);\n            let btnPlusRef1 = document.createElement('a');\n            classes(btnPlusRef1, \"btn btn-light btn-scckie btn-lg btn-block border border-light\");\n            btnPlusRef1.onclick = function () { plusRef(); };\n            btnPlusRef1.innerHTML = '<i class=\"fas fa-plus\"></i>'\n            subt.appendChild(btnPlusRef1);\n            function plusRef() {\n                docDat.cont[idx].ref.push({\n                    type: \"web\",\n                    link: \"\"\n                });\n                render();\n            }\n        } else if (item.type == 'parra') {\n            let h;\n            if (Number(item.title) > 0) {\n                if (Number(item.title) == 2) subt.innerHTML = '<br>';\n                h = document.createElement('h' + item.title)\n                h.innerHTML = item.titleTxt;\n                subt.appendChild(h);\n            }\n            let p = document.createElement('p');\n            p.innerHTML = item.text;\n            subt.appendChild(p);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0 = document.createElement('input');\n            let in1 = document.createElement('select');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            if (Number(item.title) > 0) {\n                in0.value = item.titleTxt;\n                in0.setAttribute('placeholder', 'Subtítulo');\n                in0.removeAttribute('readonly');\n            } else {\n                in0.value = \"\";\n                in0.setAttribute('placeholder', '');\n                in0.setAttribute('readonly', 'true');\n            }\n            in0.oninput = function () {\n                docDat.cont[idx].titleTxt = h.innerHTML = in0.value;\n            }\n            classes(in1, \"form-control form-control-sm\");\n            for (let i = 0; i < 7; i++) {\n                let inOpt = document.createElement('option');\n                inOpt.value = i;\n                if (item.title == i) inOpt.setAttribute('selected', 'true');\n                inOpt.innerText = i;\n                in1.appendChild(inOpt);\n            }\n            in1.oninput = function () {\n                docDat.cont[idx].title = in1.value;\n                if (Number(in1.value) > 0) {\n                    in0.setAttribute('placeholder', 'Subtítulo');\n                    in0.removeAttribute('readonly');\n                    if (Number(item.title) == 2) subt.innerHTML = '<br>';\n                    else subt.innerHTML = \"\";\n                    h = document.createElement('h' + item.title)\n                    h.innerHTML = docDat.cont[idx].titleTxt = in0.value;\n                    subt.appendChild(h);\n                    subt.appendChild(p);\n                } else {\n                    in0.value = \"\";\n                    in0.setAttribute('placeholder', '');\n                    in0.setAttribute('readonly', 'true');\n                    docDat.cont[idx].titleTxt = in0.value;\n                    subt.innerHTML = \"\";\n                    subt.appendChild(p);\n                }\n            }\n            fc0.appendChild(in0);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            let fr1 = document.createElement('div');\n            classes(fr0, \"row mb-2\");\n            let f1c0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let in2 = document.createElement('textarea');\n            classes(in2, \"form-control\");\n            in2.setAttribute('rows', '8');\n            in2.value = item.text;\n            in2.oninput = function () {\n                docDat.cont[idx].text = p.innerHTML = in2.value.trim();\n            };\n            f1c0.appendChild(in2);\n            fr1.appendChild(f1c0);\n            subf.appendChild(fr1);\n\n            if (Number(item.title) > 0 && item.titleTxt == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'html') {\n            let html = document.createElement('div');\n            html.innerHTML = item.html;\n            subt.appendChild(html);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row mb-2\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let in0 = document.createElement('textarea');\n            classes(in0, \"form-control\");\n            in0.setAttribute('rows', '8');\n            in0.value = item.html;\n            in0.onchange = function () {\n                docDat.cont[idx].html = html.innerHTML = in0.value.trim();\n            };\n            fc0.appendChild(in0);\n            fr0.appendChild(fc0);\n            subf.appendChild(fr0);\n\n            if (item.html == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'youtube') {\n            let yt = document.createElement('div');\n            classes(yt, \"embed-responsive embed-responsive-\" + item.ratio);\n            let iframe = document.createElement('iframe');\n            iframe.src = item.vidUrl;\n            iframe.setAttribute('frameborder', \"0\");\n            iframe.setAttribute('allow', \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\");\n            iframe.setAttribute('allowfullscreen', \"true\");\n            yt.appendChild(iframe);\n            subt.appendChild(yt);\n\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0L = document.createElement('label');\n            in0L.innerText = \"URL\";\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            in0.value = item.vidUrl;\n            in0.onchange = function () {\n                let convUrl = in0.value.trim();\n                if (convUrl.length == 11) convUrl = \"https://www.youtube.com/embed/\" + convUrl;\n                else {\n                    let part, i = 1;\n                    do {\n                        part = convUrl[i - 1] + convUrl[i];\n                        i++;\n                    } while (part != \"e/\" && part != \"v=\");\n                    convUrl = \"https://www.youtube.com/embed/\" + convUrl.substr(i, 11);\n                }\n                docDat.cont[idx].vidUrl = iframe.src = convUrl;\n            }\n            let help0 = document.createElement('small');\n            classes(help0, \"text-muted\");\n            help0.innerText = \"aaaaaaaaaaa o https://youtu.be/aaaaaaaaaaa o https://www.youtube.com/watch?v=aaaaaaaaaaa\";\n            let in1L = document.createElement('label');\n            in1L.innerText = \"Ratio\";\n            let in1 = document.createElement('select');\n            classes(in1, \"form-control form-control-sm\");\n            let ratios = ['21by9', '16by9', '4by3', '1by1'];\n            for (let i = 0; i < 4; i++) {\n                let inOpt = document.createElement('option');\n                inOpt.value = ratios[i];\n                if (item.ratio == ratios[i]) inOpt.setAttribute('selected', 'true');\n                inOpt.innerText = ratios[i].replaceAll('by', ':');\n                in1.appendChild(inOpt);\n            }\n            in1.oninput = function () {\n                docDat.cont[idx].ratio = in1.value;\n                ratios.forEach(rat => {\n                    yt.classList.remove('embed-responsive-' + rat);\n                })\n                classes(yt, \"embed-responsive-\" + item.ratio);\n            }\n            fc0.appendChild(in0L);\n            fc0.appendChild(in0);\n            fc0.appendChild(help0);\n            fc1.appendChild(in1L);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            if (item.vidUrl == \"\") {\n                btnEdit.click();\n            }\n        } else if (item.type == 'medSimple') {\n            let fig = document.createElement('figure');\n            classes(fig, \"mx-auto\");\n            fig.style.width = item.width;\n            fig.style.position = \"relative\";\n            fig.style.borderRadius = \".25rem\";\n            let img0 = document.createElement('img');\n            img0.setAttribute('alt', item.alt);\n            img0.src = item.medUrl;\n            classes(img0, \"w-100\");\n            fig.appendChild(img0);\n            let over0 = document.createElement('div');\n            classes(over0, \"card-img-overlay pt-0\");\n            over0.style.paddingLeft = \".9rem\";\n            over0.style.paddingRight = \".9rem\";\n            let btns0 = document.createElement('div');\n            classes(btns0, \"row mb-2 p-0\");\n            over0.appendChild(btns0);\n            let btnChange = document.createElement('button');\n            classes(btnChange, \"btn btn-light btn-scckie btn-sm ml-auto\");\n            btnChange.innerHTML = '<i class=\"fas fa-exchange-alt\"></i>';\n            btnChange.setAttribute('data-toggle', \"modal\")\n            btnChange.setAttribute('data-target', \"#mdlMedCho\")\n            btnChange.onclick = function () {\n                toAddMed = idx;\n            };\n            btns0.appendChild(btnChange);\n            fig.appendChild(over0);\n            let capt = document.createElement('figcaption');\n            capt.style.fontSize = \"70%\";\n            capt.style.fontWeight = \"lighter\";\n            capt.innerHTML = item.caption;\n            if (item.hasCapt) {\n                fig.appendChild(capt);\n            }\n            subt.appendChild(fig);\n\n            let rcont = document.createElement('div');\n            classes(rcont, \"form-group mb-2\");\n            let rnL = document.createElement('label');\n            rnL.innerText = \"Tamaño\";\n            let ranR = document.createElement('div');\n            classes(ranR, \"row\");\n            let ranRC0 = document.createElement('div');\n            classes(ranRC0, \"col align-center d-flex pr-0\");\n            let in3 = document.createElement('input');\n            in3.setAttribute('type', 'range');\n            in3.setAttribute('max', '100');\n            in3.setAttribute('min', '0');\n            in3.setAttribute('step', '1');\n            in3.value = '75';\n            classes(in3, \"form-control-range\");\n            in3.oninput = function () {\n                valL.innerHTML = in3.value + '%';\n                fig.style.width = docDat.cont[idx].width = in3.value + '%';\n            }\n            ranRC0.appendChild(in3);\n            let valL = document.createElement('span');\n            classes(valL, \"badge badge-primary range-value-L\");\n            valL.innerText = '75%';\n            let ranRC1 = document.createElement('div');\n            classes(ranRC1, \"col-auto\");\n            ranRC1.appendChild(valL);\n            ranR.appendChild(ranRC0);\n            ranR.appendChild(ranRC1);\n            rcont.appendChild(rnL);\n            rcont.appendChild(ranR);\n            subf.appendChild(rcont);\n            let fr0 = document.createElement('div');\n            classes(fr0, \"row\");\n            let fc0 = document.createElement('div');\n            classes(fc0, \"col\");\n            let fc1 = document.createElement('div');\n            classes(fc1, \"col-auto\");\n            let in0L = document.createElement('label');\n            in0L.innerText = \"Pie de foto\";\n            let in0 = document.createElement('input');\n            classes(in0, \"form-control\");\n            in0.setAttribute('type', 'text');\n            in0.value = item.caption;\n            in0.oninput = function () {\n                capt.innerHTML = docDat.cont[idx].caption = in0.value.trim();\n            }\n            let in1 = document.createElement('select');\n            classes(in1, \"form-control form-control-sm\");\n            let inOpt0 = document.createElement('option');\n            inOpt0.value = \"true\";\n            if (item.hasCapt == \"true\") inOpt0.setAttribute('selected', 'true');\n            inOpt0.innerText = \"Sí\";\n            in1.appendChild(inOpt0);\n            let inOpt1 = document.createElement('option');\n            inOpt1.value = \"false\";\n            if (item.hasCapt == \"false\") inOpt1.setAttribute('selected', 'true');\n            inOpt1.innerText = \"No\";\n            in1.appendChild(inOpt1);\n            in1.oninput = function () {\n                docDat.cont[idx].hasCapt = in1.value;\n                if (in1.value == \"true\") {\n                    capt.innerHTML = in0.value = docDat.cont[idx].caption;\n                    in0.removeAttribute('readonly');\n                    fig.appendChild(capt);\n                } else {\n                    in0.value = docDat.cont[idx].caption = \"\";\n                    in0.setAttribute('readonly', 'true');\n                    capt.innerHTML = \"\";\n                    fig.innerHTML = \"\";\n                    fig.appendChild(img0);\n                    fig.appendChild(over0);\n                }\n            }\n            fc0.appendChild(in0L);\n            fc0.appendChild(in0);\n            fc1.appendChild(in1);\n            fr0.appendChild(fc0);\n            fr0.appendChild(fc1);\n            subf.appendChild(fr0);\n\n            let fr1 = document.createElement('div');\n            classes(fr1, \"row\");\n            let f1c0 = document.createElement('div');\n            classes(f1c0, \"col\");\n            let in2L = document.createElement('label');\n            in2L.innerText = \"Alt\";\n            let in2 = document.createElement('input');\n            classes(in2, \"form-control\");\n            in2.setAttribute('type', 'text');\n            in2.value = item.alt;\n            in2.oninput = function () {\n                docDat.cont[idx].alt = in2.value.trim();\n                img0.setAttribute('alt', in2.value.trim());\n            }\n            f1c0.appendChild(in2L);\n            f1c0.appendChild(in2);\n            fr1.appendChild(f1c0);\n            subf.appendChild(fr1);\n\n            if (item.hasCapt == \"true\" && item.caption == \"\") {\n                btnEdit.click();\n            }\n        }//Add more@#*/\n        sect.appendChild(subt);\n        sect.appendChild(subf);\n        document.getElementById('cont').appendChild(sect);\n    });\n    document.getElementById('inJava').innerText = docDat.java;\n    document.getElementById('javaIns').innerHTML = docDat.java;\n}\n\ndocument.getElementById('inFile').oninput = function () {\n    document.getElementById('inFile').value = ultraClean(document.getElementById('inFile').value, '-');\n}\n\ndocument.getElementById('inJava').onchange = function () {\n    docDat.java = document.getElementById('javaIns').innerHTML = document.getElementById('inJava').value;\n}\ndocument.getElementById('btnEditJs').onclick = function () {\n    toggleEl(document.getElementById('btnEditJs'));\n    toggleEl(document.getElementById('btnCheckJs'));\n    document.getElementById('inJava').removeAttribute('readonly');\n};\ndocument.getElementById('btnCheckJs').onclick = function () {\n    toggleEl(document.getElementById('btnEditJs'));\n    toggleEl(document.getElementById('btnCheckJs'));\n    document.getElementById('inJava').setAttribute('readonly', 'true');\n    normSave();\n};\n\nfunction fillTrans() {\n    langs.forEach(l => {\n        if (l != lang) {\n            let opt = document.createElement('option');\n            opt.value = opt.innerText = l;\n            document.getElementById('inTransFrom').appendChild(opt);\n        }\n    })\n}\n\n$('#mdlAddMed').on('hidden.bs.modal', e => {\n    document.getElementById(\"prevNewMed\").src = '';\n    document.getElementById('inNewMedL').innerHTML = 'Elige una imagen';\n    document.getElementById('inNewMedUrl').value = \"\";\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"barNewMedCont\"));\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n    showEl(document.getElementById(\"frmAddMed\"));\n    document.getElementById(\"btnCnfNewMed\").removeAttribute('disabled');\n    document.getElementById(\"btnCanNewMed0\").removeAttribute('disabled');\n    document.getElementById(\"btnCanNewMed1\").removeAttribute('disabled');\n})\ndocument.getElementById('inNewMed').addEventListener('change', e => {\n    newMedia = e.target.files[0];\n    function prevMed() {\n        var read = new FileReader();\n        read.readAsDataURL(newMedia);\n        read.onload = function (e2) {\n            document.getElementById(\"prevNewMed\").src = e2.target.result;\n        };\n    };\n    newMedia.name = ultraClean(newMedia.name, '');\n    document.getElementById('inNewMedL').innerHTML = newMedia.name;\n    prevMed(newMedia);\n});\ndocument.getElementById('inNewMedUrl').onchange = function () {\n    document.getElementById(\"prevNewMed\").src = document.getElementById('inNewMedUrl').value;\n};\ndocument.getElementById('inMedSrc0').onclick = function () {\n    newMedSrc = \"home\";\n    document.getElementById('inNewMed').setAttribute('required', 'true');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    showEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n}\ndocument.getElementById('inMedSrc1').onclick = function () {\n    newMedSrc = \"out\";\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').setAttribute('required', 'true');\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    showEl(document.getElementById(\"inNewMedUrlCont\"));\n}\n\ndocument.getElementById('inSendUpt').onclick = function () {\n    if (document.getElementById('inSendUpt').checked) {\n        showEl(document.getElementById('uptDescCont'));\n        document.getElementById('inUptDesc').setAttribute('required', 'true');\n    } else {\n        hideEl(document.getElementById('uptDescCont'));\n        document.getElementById('inUptDesc').removeAttribute('required');\n    }\n}\n\ndocument.getElementById('btnPrevCook').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\ndocument.getElementById('btnPrevMail').onclick = function () {\n    docDat.timePrev = new firebase.firestore.Timestamp.fromMillis((new Date(Date.now())).getTime() + 900000);\n    normSave();\n};\n\ndocument.getElementById('btnPrivate').onclick = function () {\n    docDat.public = false;\n    normSave();\n};\n\ndocument.getElementById('btnAprove').onclick = function () {\n    if (docDat.revised[lang] && docDat.revised[lang].includes(uid)) {\n        docDat.revised[lang].splice(docDat.revised[lang].indexOf(uid), 1);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"far fa-check-square\"></i>';\n    } else {\n        if (!docDat.revised[lang]) docDat.revised[lang] = [];\n        docDat.revised[lang].push(uid);\n        document.getElementById('btnAprove').innerHTML = '<i class=\"fas fa-check-square\"></i>';\n    }\n    normSave();\n};\n\n$('#mdlAddMed').on('hiden.bs.modal', e => {\n    document.getElementById('inMedSrc0').setAttribute('checked', 'false');\n    document.getElementById('inMedSrc1').setAttribute('checked', 'false');\n    document.getElementById('inNewMed').removeAttribute('required');\n    document.getElementById('inNewMedUrl').removeAttribute('required');\n    hideEl(document.getElementById(\"inNewMedFileCont\"));\n    hideEl(document.getElementById(\"inNewMedUrlCont\"));\n});\n\n$('#mdlPublish').on('show.bs.modal', e => {\n    let revLangs = 0;\n    langs.forEach(l => {\n        let rev = docDat.revised[l] ? docDat.revised[l].length : 0;\n        if (docDat.revised[l] && !docDat.revised[l].includes(uid)) rev++;\n        if (rev >= 2) revLangs++;\n    });\n    if (revLangs == langs.length) {\n        classes(document.getElementById('btnCnfPublish'), \"d-none\");\n        document.getElementById('mdlPublishTxt').innerText = \"Para publicar es necesario que lo hayan aprovado al menos dos personas.\";\n        document.getElementById('frmPublish').classList.add('d-none');\n    } else {\n        document.getElementById('btnCnfPublish').classList.remove(\"d-none\");\n        document.getElementById('mdlPublishTxt').innerText = \"La galleta está lista para publicar\";\n        document.getElementById('frmPublish').classList.remove('d-none');\n        if (docDat.beenPublic) document.getElementById('sendUptCont').classList.remove('d-none');\n    }\n});\n\nfunction finishPub() {\n    setprog('barPublish', 100);\n    classes(document.getElementById('barPublish'), 'bg-success');\n    if (lang = \"es\") {\n        alertTop(\"Publicado correctamente\", 1);\n    } else if (lang = \"en\") {\n        alertTop(\"Published successfully\", 1);\n    }\n    setTimeout(function () {\n        window.open(docDat.url, '_blank').focus();\n    }, 2500);\n    console.log(\"Data saved successfully.\");\n    $('#mdlPublish').modal('hide');\n}\nfunction fillKW() {\n    let n = 0\n    function prog() {\n        setprog('barPublish', n);\n    }\n    keywords = [];\n    keywords.push(docDat.published.toDate().getFullYear().toString());\n    if (docDat.published.toDate().getFullYear().toString() != docDat.ledit.toDate().getFullYear().toString()) keywords.push(docDat.ledit.toDate().getFullYear().toString());\n    n++;\n    prog();\n    docDat.authors.forEach(itm => {\n        itm.substring(1).split(' ').forEach(c => {\n            keywords.push(ultraClean(c, ''));\n        });\n        n += (3 / docDat.authors.length);\n        prog();\n    });\n\n    let toKW = [];\n\n    docDat.title.split(' ').forEach(itm => {\n        toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n    });\n    n++;\n    prog();\n\n    docDat.description.split(' ').forEach(itm => {\n        toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n        n += (3 / docDat.description.split(' ').length);\n        prog();\n    });\n\n    docDat.cont.forEach(sect => {\n        if (sect.type == 'parra') {\n            if (Number(sect.title) > 0) {\n                sect.titleTxt.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            sect.text.split(' ').forEach(itm => {\n                toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                n += (14 / docDat.cont.length / sect.text.split(' ').length);\n                prog();\n            });\n        } else if (sect.type == 'medSimple') {\n            if (sect.alt != \"\") {\n                sect.alt.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            if (sect.caption != \"\") {\n                sect.caption.split(' ').forEach(itm => {\n                    toKW.push(itm.replaceAll(/(<([^>]*)>)/gi, \" \").trim());\n                });\n            }\n            n += (14 / docDat.cont.length);\n            prog();\n        }\n        //@#\n    });\n\n    let rToKW = [];\n    let l = toKW.length;\n    for (let i = 0; i < l; i++) {\n        let wrd = toKW[i];\n        let r = wrd.indexOf(' ');\n        if (r != -1) {\n            wrd.split(' ').forEach(itm => {\n                rToKW.push(itm);\n            });\n            toKW.splice(i, 1);\n            i--;\n            l--;\n        }\n    };\n\n    rToKW.forEach(itm => {\n        toKW.push(itm);\n    });\n    n++\n    prog();\n\n    l = toKW.length;\n    for (let i = 0; i < l; i++) {\n        toKW.splice(i, 1, ultraClean(toKW[i], ''));\n        n += (3 / toKW.length);\n        prog();\n    };\n\n    let kWObj = {}, sum = 0, wCount = 0;\n    let banWrds = [\"1\", \"2\", \"3\", \"4\", \"6\", \"7\", \"8\", \"9\", \"0\", \"tan\", \"ser\", \"los\", \"serian\", \"pero\", \"podemos\", \"su\", \"o\", \"y\", \"e\", \"la\", \"del\", \"es\", \"si\", \"en\", \"otro\", \"de\", \"tendrian\", \"no\", \"se\", \"una\", \"mas\", \"el\", \"a\", \"embargo\", \"las\", \"sin\", \"con\", \"un\", \"para\", \"por\", \"les\", \"\", \"vez\", \"gran\", \"este\", \"esta\", \"estos\", \"estas\", \"nos\", \"al\", \"dio\", \"has\", \"preguntado\", \"el\", \"lo\", \"tu\", \"tus\", \"hacen\", \"otros\", \"para\", \"ellos\", \"ellas\", \"ese\", \"esa\", \"esos\", \"esas\", \"detras\", \"delante\", \"nos\", \"le\", \"muy\", \"casi\", \"son\", \"pues\", \"a\", \"ha\", \"han\", \"fue\"];//@#\n    toKW.forEach(itm => {\n        if (!banWrds.includes(itm)) {\n            let num = kWObj[itm];\n            if (!num) {\n                kWObj[itm] = 1;\n                wCount++;\n            }\n            else kWObj[itm]++;\n            sum++;\n        }\n        n += (3 / toKW.length);\n        prog();\n    });\n\n    for (const [key, value] of Object.entries(kWObj)) {\n        if (value > sum / wCount) {\n            keywords.push(key);\n        }\n        n += (3 / Object.entries(kWObj).length);\n        prog();\n    }\n    docDat.fixedCats.forEach(itm => {\n        keywords.push(itm);\n    });\n    docDat.cats = keywords;\n    console.log(keywords);\n}\n\ndocument.getElementById('btnCnfPublish').onclick = function () {\n    if (docDat.public) return;\n    setprog('barPublish', 0);\n    showEl(document.getElementById(\"barPublishCont\"));\n\n    docDat.public = true;\n    docDat.ledit = new firebase.firestore.Timestamp.now();\n    docDat.beenPublic = true;\n    docDat.revised = {};\n    setprog('barPublish', 31);\n\n    if (!docDat.beenPublic) {\n        docDat.notify = true;\n        docDat.published = new firebase.firestore.Timestamp.now();\n        setprog('barPublish', 62);\n    } else {\n        if (document.getElementById('inSendUpt').checked) {\n            docDat.dledit = true;\n            docDat.notify = true;\n        } else {\n            docDat.dledit = false;\n            docDat.notify = false;\n        }\n        setprog('barPublish', 45);\n        if (document.getElementById('inSendUpt').checked) {\n            docDat.uptMsg = true;\n            docDat.uptDescrip = document.getElementById('inUptDesc').value.trim();\n        } else {\n            docDat.uptMsg = false;\n            docDat.uptDescrip = \"\";\n        }\n        setprog('barPublish', 62);\n    }\n\n    saveDoc().then(() => {\n        rtDb.ref('galletas/' + docId).set({\n            pop: docDat.pop,\n            likes: docDat.likes,\n            favs: docDat.favs\n        }, err => {\n            if (err) {\n                console.log(\"Data could not be saved.\" + err);\n            } else {\n                setprog('barPublish', 84);\n                finishPub();\n            }\n        });\n    }).catch(err => {\n        if (lang = \"es\") {\n            alertTop(\"<strong>¡Ha ocurrido un error!</strong> \" + err.code, 0);\n        } else if (lang = \"en\") {\n            alertTop(\"<strong>¡There has been an error!</strong> \" + err.code, 0);\n        }\n        console.log(err);\n    });\n};"]}