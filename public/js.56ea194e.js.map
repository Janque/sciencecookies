{"version":3,"sources":["js/index.js"],"names":["catnmb","previewLim","kywords","srtOrd","desc","srchRef","cats","nxtp","paglast","page","allChk","initSrch","stAf","allCats","slice","urlSrch","get","split","document","getElementById","value","replace","concat","forEach","itm","idx","str","toLowerCase","rmDiacs","splice","all","i","indexOf","checked","selected","undefined","cookiesFSRef","where","orderBy","startAfter","limit","shwSrch","promises","notSrchd","allP","length","p","firebase","database","ref","transaction","search","count","push","Promise","then","set","catch","err","console","log","innerHTML","snap","docs","a","createElement","classes","med","bod","appendChild","doc","divi","href","data","url","img","style","width","height","src","picUrl","tit","title","descr","description","dates","dledit","dl","ledit","toDate","innerText","getDate","getMonth","getFullYear","d","published","auhtTxt","authors","classList","remove","removeAttribute","setAttribute","reSrch","np","scrollIntoView","prepCatBtns","onclick","shwCalMain","calendarsFSRef","descriptionShort","showEl","window","loaded","addEventListener","event","preventDefault","send","srchStr","wordArr","location"],"mappings":"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","file":"js.56ea194e.js","sourceRoot":"../src","sourcesContent":["import '../styles/index.scss';\n\nvar catnmb;\nconst previewLim = 20;\n\n//Get search params\nvar cats = [], kywords, srtOrd, desc, srchRef;\nvar nxtp = false, paglast = [null], page = 1;\nvar allChk = false;\nfunction initSrch(stAf) {\n    cats = allCats.slice();\n    kywords = [''];\n    if (urlSrch.get('c') != null) {\n        cats = urlSrch.get('c').split('+');\n        cats = cats[0].split(' ');\n    }\n    if (urlSrch.get('k') != null) {\n        kywords = urlSrch.get('k').split('+');\n        document.getElementById('srcBox').value = urlSrch.get('k').replace('+', ' ');\n    };\n    kywords = cats.concat(kywords);\n    kywords.forEach(function (itm, idx) {\n        let str = itm.toLowerCase();\n        str = rmDiacs(str);\n        kywords.splice(idx, 1, str);\n    });\n    let all = true;\n    for (let i = 0; i < catnmb; i++) {\n        if (kywords.indexOf(document.getElementById('cat' + i).value) != -1) {\n            document.getElementById('cat' + i).checked = true;\n        } else all = false;\n    }\n    if (all) {\n        allChk = true;\n        document.getElementById('catA').checked = true;\n    }\n    document.getElementById(\"inSrchOrd1\").selected = false;\n    document.getElementById(\"inSrchOrd2\").selected = false;\n    document.getElementById(\"inSrchOrd3\").selected = false;\n    srtOrd = urlSrch.get('o');\n    if (srtOrd != null) {\n        if (srtOrd == 'new') {\n            srtOrd = 'ledit';\n            desc = true;\n            document.getElementById(\"inSrchOrd1\").selected = true;\n        }\n        if (srtOrd == 'old') {\n            srtOrd = 'ledit';\n            desc = false;\n            document.getElementById(\"inSrchOrd2\").selected = true;\n        }\n        if (srtOrd == 'pop') {\n            desc = true;\n            document.getElementById(\"inSrchOrd3\").selected = true;\n        }\n    } else {\n        srtOrd = 'ledit';\n        desc = true;\n    }\n    if (page > 1 && stAf && paglast[page - 1] != null && paglast[page - 1] != undefined) {\n        if (!desc) {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n        } else {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n        }\n    } else {\n        if (!desc) {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd).limit(previewLim);\n        } else {\n            srchRef = cookiesFSRef.where('public', '==', true).where('cats', 'array-contains-any', kywords).orderBy(srtOrd, 'desc').limit(previewLim);\n        }\n    }\n    shwSrch();\n    const promises = [];\n    let notSrchd = [], allP = null;\n    for (let i = 0; i < kywords.length; i++) {\n        let itm = kywords[i];\n        if (itm == '' || itm == ' ') continue;\n        const p = firebase.database().ref('searchQs/' + itm).transaction(search => {\n            if (search) {\n                notSrchd.splice(notSrchd.indexOf(itm), 1);\n                search.count++;\n            } else {\n                notSrchd.push(itm);\n            }\n            return search;\n        });\n        promises.push(p);\n    }\n    allP = Promise.all(promises);\n    allP.then(() => {\n        notSrchd.forEach((itm) => {\n            firebase.database().ref('searchQs/' + itm).set({\n                count: 1\n            });\n        })\n    }).catch(err => { console.log('err') });\n}\nfunction shwSrch() {\n    document.getElementById('cookiesCont').innerHTML = \"\";\n    srchRef.get().then(snap => {\n        let docs = snap.docs;\n        nxtp = false;\n        if (docs.length == 0) {\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            bod.innerHTML = '<h5 class=\"mt-0 text-center\">No se han encontrado resultados</h5>';\n            a.appendChild(med);\n            med.appendChild(bod);\n            document.getElementById('cookiesCont').appendChild(a);\n        }\n        docs.forEach((doc, idx) => {\n            if (idx != 0) {\n                let divi = document.createElement('div');\n                classes(divi, \"dropdown-divider d-md-none\");\n                document.getElementById('cookiesCont').appendChild(divi);\n            }\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            a.href = doc.data().url;\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let img = document.createElement('img');\n            classes(img, \"align-self-center mr-3\");\n            img.style.width = \"64px\";\n            img.style.height = \"64px\";\n            img.src = doc.data().picUrl;\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            let tit = document.createElement('h5');\n            classes(tit, \"mt-0\");\n            tit.innerHTML = doc.data().title;\n            bod.appendChild(tit);\n            let descr = document.createElement('p');\n            descr.innerHTML = doc.data().description;\n            bod.appendChild(descr);\n            let dates = document.createElement('p');\n            classes(dates, \"my-0\");\n            if (doc.data().dledit) {\n                let dl = doc.data().ledit.toDate();\n                dates.innerText = 'Actualizado: ' + dl.getDate() + '/' + (dl.getMonth() + 1) + '/' + dl.getFullYear();\n            } else {\n                let d = doc.data().published.toDate();\n                dates.innerText = 'Publicado: ' + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();\n            }\n            bod.appendChild(dates);\n            let auhtTxt = document.createElement('p');\n            classes(auhtTxt, \"mt-0\");\n            auhtTxt.innerText = ' Autor(es):' + doc.data().authors;\n            bod.appendChild(auhtTxt);\n            a.appendChild(med);\n            med.appendChild(img);\n            med.appendChild(bod);\n            document.getElementById('cookiesCont').appendChild(a);\n            if (idx == previewLim - 1) {\n                if (paglast[page] == undefined || paglast[page] == null) {\n                    paglast.push(docs[docs.length - 1]);\n                } else if (paglast[page] != docs[docs.length - 1]) {\n                    paglast.splice(page, 1, docs[docs.length - 1]);\n                }\n                nxtp = true;\n                document.getElementById(\"pgNavT\").classList.remove('d-none');\n                document.getElementById(\"pgNavB\").classList.remove('d-none');\n            }\n        });\n        if (!nxtp) {\n            document.getElementById(\"pgTNxt\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBNxt\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTNxt\").removeAttribute('disabled');\n            document.getElementById(\"pgBNxt\").removeAttribute('disabled');\n        }\n        if (page == 1) {\n            document.getElementById(\"pgTPrv\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBPrv\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTPrv\").removeAttribute('disabled');\n            document.getElementById(\"pgBPrv\").removeAttribute('disabled');\n        }\n    }).catch(err => { console.log(err) });\n}\n\ndocument.getElementById(\"pgTPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgBPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgTNxt\").onclick = function () { reSrch(1); };\ndocument.getElementById(\"pgBNxt\").onclick = function () { reSrch(1); };\nfunction reSrch(np) {\n    if (page < 1 && np == -1) return;\n    if (!nxtp && np == 1) return;\n    page += np;\n    document.getElementById('disPgT').innerText = page;\n    document.getElementById('disPgB').innerText = page;\n    initSrch(true);\n    document.getElementById(\"cookCnt\").scrollIntoView();\n}\n\nfunction prepCatBtns() {\n    //Submit search\n    document.getElementById('catA').onclick = function () {\n        if (!allChk) {\n            for (let i = 0; i < catnmb; i++) {\n                document.getElementById('cat' + i).checked = true;\n            }\n        } else {\n            for (let i = 0; i < catnmb; i++) {\n                document.getElementById('cat' + i).checked = false;\n            }\n        }\n        allChk = !allChk;\n    };\n    for (let i = 0; i < catnmb; i++) {\n        document.getElementById('cat' + i).onclick = function () {\n            if (allChk) {\n                document.getElementById('catA').checked = false;\n                allChk = false;\n            }\n            else {\n                let all = true;\n                for (let i = 0; i < catnmb; i++) {\n                    if (document.getElementById('cat' + i).checked == false) {\n                        all = false;\n                        break;\n                    }\n                }\n                if (all) {\n                    allChk = true;\n                    document.getElementById('catA').checked = true;\n                }\n            }\n        };\n    }\n}\nfunction shwCalMain() {\n    calendarsFSRef.where(\"public\", \"==\", true).orderBy('published', 'desc').limit(1).get().then(snap => {\n        let docs = snap.docs;\n        docs.forEach(doc => {\n            let a = document.createElement('a');\n            classes(a, \"text-decoration-none text-light\");\n            a.href = doc.data().url;\n            let med = document.createElement('div');\n            classes(med, \"media mb-3\");\n            let img = document.createElement('img');\n            classes(img, \"align-self-center mr-3\");\n            img.style.width = \"64px\";\n            img.style.height = \"64px\";\n            img.src = doc.data().picUrl;\n            let bod = document.createElement('div');\n            classes(bod, \"media-body\");\n            let tit = document.createElement('h5');\n            classes(tit, \"mt-0\");\n            tit.innerHTML = doc.data().title;\n            bod.appendChild(tit);\n            let descr = document.createElement('p');\n            descr.innerHTML = doc.data().descriptionShort;\n            bod.appendChild(descr);\n            let dates = document.createElement('p');\n            classes(dates, \"my-0\");\n            a.appendChild(med);\n            med.appendChild(img);\n            med.appendChild(bod);\n            document.getElementById('calMain').appendChild(a);\n            showEl(document.getElementById('calMain'));\n        });\n    }).catch(err => { console.log(err) });\n}\n\nwindow.loaded = function loaded() {\n    catnmb = allCats.length;\n    prepCatBtns();\n    initSrch(false);\n    shwCalMain();\n    function send() {\n        let srchStr = '?c=';\n        if (document.getElementById('cat0').checked) srchStr = srchStr + document.getElementById('cat0').value;\n        for (let i = 1; i < catnmb; i++) {\n            if (document.getElementById('cat' + i).checked) {\n                srchStr = srchStr + '+' + document.getElementById('cat' + i).value;\n            }\n        }\n        srchStr = srchStr + '&k=';\n        let wordArr = document.getElementById('srcBox').value.split(' ');\n        srchStr = srchStr + wordArr[0];\n        for (let i = 1; i < wordArr.length; i++) {\n            srchStr = srchStr + '+' + wordArr[i];\n        }\n        srchStr = srchStr + '&o=' + document.getElementById('inOrd').value;\n        window.location.href = srchStr;\n    }\n    document.getElementById(\"frmSrch\").addEventListener(\"submit\", function (event) {\n        event.preventDefault();\n        send();\n    });\n}"]}