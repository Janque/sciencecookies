{"version":3,"sources":["js/drafts.js"],"names":["rtDB","firebase","database","window","loaded","initSrch","document","getElementById","addEventListener","e","preventDefault","newSrch","srchStr","wordArr","value","split","i","length","location","href","plusCookie","trim","title","file","cookiesFSRef","where","limit","get","then","snap","id","empty","classList","add","setAttribute","remove","setprog","ref","transaction","today","last","err","innerHTML","console","log","db","collection","doc","set","authors","author","cont","type","media","picUrl","description","owner","uid","java","revised","notify","public","beenPublic","dledit","created","firestore","Timestamp","now","ledit","published","pop","likes","favs","url","cats","translations","setTimeout","catch","kywords","srtOrd","desc","srchRef","previewLim","nxtp","paglast","page","allChk","stAf","urlSrch","replace","selected","undefined","orderBy","startAfter","dcookiesFSRef","shwSrch","docs","idx","forEach","col","createElement","card","helpStr","clas","data","h","row","col0","badge","innerText","appendChild","col1","drp","btndrp","onclick","contains","$","dropdown","drpmenu","drpitm0","drpitm1","open","focus","drpitm2","drpitm3","d","toDate","getFullYear","toString","getMonth","update","a","img","src","alt","cbody","f","getDate","push","splice","removeAttribute","reSrch","np","scrollIntoView","modal","inFileChanged","cancelPlus","n","style","width","onfocus","onchange","rmDiacs","toLowerCase","replaceAll","oninput"],"mappings":"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","file":"drafts.859365b4.js","sourceRoot":"../src","sourcesContent":["var rtDB = firebase.database();\n\nwindow.loaded = function loaded() {\n    initSrch(false);\n    function newSrch() {\n        let srchStr = '?k=';\n        let wordArr = document.getElementById('srcBox').value.split(' ');\n        srchStr = srchStr + wordArr[0];\n        for (let i = 1; i < wordArr.length; i++) {\n            srchStr = srchStr + '+' + wordArr[i];\n        }\n        srchStr = srchStr + '&o=' + document.getElementById('inOrd').value;\n        srchStr = srchStr + '&d=' + document.getElementById('inDir').value;\n        window.location.href = srchStr;\n    }\n    document.getElementById(\"frmSrch\").addEventListener(\"submit\", e => {\n        e.preventDefault();\n        newSrch();\n    });\n\n    function plusCookie() {\n        let title = document.getElementById('inTitle').value.trim();\n        let file = document.getElementById('inFile').value;\n        cookiesFSRef.where('file', '==', file).limit(1).get().then(snap => {\n            if (!snap.empty) {\n                document.getElementById('alrtPlusContainer').innerHTML = `<div class=\"alert alert-danger alert-dismissible fade show fixed-top\" role=\"alert\">\n                    Ese nombre de archivo ya esta en uso.\n                    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                </div>`;\n            } else {\n                document.getElementById('btnPlusConf').classList.add('d-none');\n                document.getElementById('btnCanPlus0').setAttribute('disabled', 'true');\n                document.getElementById('btnCanPlus1').setAttribute('disabled', 'true');\n                document.getElementById('barCont').classList.remove('d-none');\n                setprog('3');\n                let id;\n                rtDB.ref('tdaysID').transaction(today => {\n                    if (today) {\n                        today.last++;\n                        id = today.today;\n                        if (today.last < 10) id += '0';\n                        id += today.last;\n                    }\n                    return today;\n                }, err => {\n                    if (err) {\n                        setprog('0');\n                        document.getElementById('alrtPlusContainer').innerHTML = `<div class=\"alert alert-danger alert-dismissible fade show fixed-top\" role=\"alert\">\n                            <strong>Ocurrió un error: ${err}.</strong><br>LLamar a Javier.\n                            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                        </div>`;\n                        console.log(err);\n                    } else {\n                        setprog('52');\n                        db.collection('cookies/langs/es').doc(id).set({\n                            authors: [author],\n                            cont: [\n                                {\n                                    type: \"head\",\n                                    title: \"Sin título\",\n                                    author: [author]\n                                },\n                                {\n                                    type: \"ref\",\n                                    ref: []\n                                }\n                            ],\n                            media: [],\n                            picUrl: \"\",\n                            title: \"Sin título\",\n                            description: \"Sin descripción\",\n                            file: \"\",\n                            owner: uid,\n                            java: \"\",\n                            revised: [],\n                            notify: false,\n                            public: false,\n                            beenPublic: false,\n                            dledit: false,\n                            created: new firebase.firestore.Timestamp.now(),\n                            ledit: new firebase.firestore.Timestamp.now(),\n                            published: new firebase.firestore.Timestamp.now(),\n                            pop: 0,\n                            likes: 0,\n                            favs: 0,\n                            url:\"\",\n                            cats: [],\n                            translations: {}\n                        }).then(() => {\n                            setprog('63');\n                            return db.collection('cookies/langs/en').doc(id).set({\n                                authors: [author],\n                                cont: [\n                                    {\n                                        type: \"head\",\n                                        title: \"No title\",\n                                        author: [author]\n                                    },\n                                    {\n                                        type: \"ref\",\n                                        ref: []\n                                    }\n                                ],\n                                media: [],\n                                picUrl: \"\",\n                                title: \"No title\",\n                                description: \"No description\",\n                                file: \"\",\n                                owner: uid,\n                                java: \"\",\n                                revised: [],\n                                notify: false,\n                                public: false,\n                                beenPublic: false,\n                                dledit: false,\n                                created: new firebase.firestore.Timestamp.now(),\n                                ledit: new firebase.firestore.Timestamp.now(),\n                                published: new firebase.firestore.Timestamp.now(),\n                                pop: 0,\n                                likes: 0,\n                                favs: 0,\n                                url:\"\",\n                                cats: [],\n                                translations: {}\n                            });\n                        }).then(() => {\n                            setprog('80');\n                            setTimeout(function () {\n                                setprog('100');\n                                document.getElementById('bar').classList.add('bg-success');\n                                document.getElementById('alrtPlusContainer').innerHTML = `<div class=\"alert alert-success alert-dismissible fade show fixed-top\" role=\"alert\">\n                                    Creado con exito. Redirigiendo...<br>\n                                    Si no te redirige automáticamente, haz <a class=\"btn-link-scckie\" href=\"../editar?id=${id}\">click aqui</a>.\n                                    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                                </div>`;\n                            }, 1000);\n                            setTimeout(function () {\n                                window.location.href = '../editar?id=' + id;\n                            }, 3000);\n                        }).catch(err => console.log(err));\n                    }\n                });\n            }\n        }).catch(err => console.log(err));\n    }\n    document.getElementById(\"frmPlus\").addEventListener(\"submit\", e => {\n        e.preventDefault();\n        plusCookie();\n    });\n}\n\nconst previewLim = 21;\n//Get search params\nvar kywords, srtOrd, desc, srchRef;\nvar nxtp = false, paglast = [null], page = 1;\nvar allChk = false;\nfunction initSrch(stAf) {\n    kywords = \"\";\n    if (urlSrch.get('k') != null) {\n        kywords = urlSrch.get('k').replace('+', ' ');\n        document.getElementById('srcBox').value = kywords;\n    };\n    document.getElementById(\"inSrchOrd0\").selected = false;\n    document.getElementById(\"inSrchOrd1\").selected = false;\n    document.getElementById(\"inSrchOrd2\").selected = false;\n    document.getElementById(\"inSrchOrd3\").selected = false;\n    srtOrd = urlSrch.get('o');\n    switch (srtOrd) {\n        case 'created':\n            document.getElementById(\"inSrchOrd0\").selected = true;\n            break;\n        case 'published':\n            document.getElementById(\"inSrchOrd1\").selected = true;\n            break;\n        case 'ledit':\n            document.getElementById(\"inSrchOrd2\").selected = true;\n            break;\n        case 'pop':\n            document.getElementById(\"inSrchOrd3\").selected = true;\n            break;\n        default:\n            srtOrd = 'created';\n            break;\n    }\n    document.getElementById(\"inSrchDir0\").selected = false;\n    document.getElementById(\"inSrchDir1\").selected = false;\n    desc = urlSrch.get('d');\n    if (desc == 'asc') {\n        desc = false;\n        document.getElementById(\"inSrchDir1\").selected = true;\n    } else {\n        desc = true;\n        document.getElementById(\"inSrchDir0\").selected = true;\n    }\n    if (page > 1 && stAf && paglast[page - 1] != null && paglast[page - 1] != undefined) {\n        if (kywords == undefined || kywords == null || kywords == \"\") {\n            if (!desc) {\n                srchRef = cookiesFSRef.orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n            }\n        } else {\n            if (!desc) {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd).startAfter(paglast[page - 1]).limit(previewLim);\n            } else {\n                srchRef = dcookiesFSRef.where('title', '==', kywords).orderBy(srtOrd, 'desc').startAfter(paglast[page - 1]).limit(previewLim);\n            }\n        }\n    } else {\n        if (kywords == undefined || kywords == null || kywords == \"\") {\n            if (!desc) {\n                srchRef = cookiesFSRef.orderBy(srtOrd).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.orderBy(srtOrd, 'desc').limit(previewLim);\n            }\n        } else {\n            if (!desc) {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd).limit(previewLim);\n            } else {\n                srchRef = cookiesFSRef.where('title', '==', kywords).orderBy(srtOrd, 'desc').limit(previewLim);\n            }\n        }\n    }\n    shwSrch();\n}\nfunction shwSrch() {\n    if ((kywords == undefined || kywords == null || kywords == \"\") && page == 1) {\n        document.getElementById('crdContainer').innerHTML = `<div class=\"col mb-4\">\n            <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n                <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlPlus\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\">\n                    <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n                </a>\n            </div>\n        </div>`;\n    } else {\n        document.getElementById('crdContainer').innerHTML = \"\";\n    }\n    srchRef.get().then(snap => {\n        let docs = snap.docs;\n        nxtp = false;\n        let idx = 0;\n        if (docs.length < 1) {\n            document.getElementById('crdContainer').innerHTML = `<h5 class=\"mt-0 text-center\">No se han encontrado resultados</h5><div class=\"col mb-4\">\n            <div class=\"card text-dark bg-light h-100 cardBorder\" style=\"border-color: #343a40;\">\n                <a type=\"button\" data-toggle=\"modal\" data-target=\"#mdlPlus\" class=\"text-decoration-none text-dark h-100 d-flex align-items-center justify-content-center\">\n                    <h1 style=\"font-size: 6rem;\" class=\"mb-0\"><i class=\"far fa-plus-square\"></i></h1>\n                </a>\n            </div>\n        </div>`;\n        }\n        docs.forEach(function (doc) {\n            let col = document.createElement('col');\n            col.classList.add('col');\n            col.classList.add('mb-4');\n\n            let card = document.createElement('div');\n            let helpStr = \"card text-dark bg-light h-100 cardBorder\";\n            helpStr = helpStr.split(' ');\n            helpStr.forEach(clas => {\n                card.classList.add(clas);\n            });\n            if (doc.data().owner == uid) {\n                card.classList.add('border-success');\n            } else {\n                card.classList.add('border-secondary');\n            }\n\n            let h = document.createElement('div');\n            helpStr = \"card-header bg-light m-0 py-0 text-right\";\n            helpStr = helpStr.split(' ');\n            helpStr.forEach(clas => {\n                h.classList.add(clas);\n            });\n            let row = document.createElement('div');\n            row.classList.add('row');\n            row.classList.add('justify-content-between');\n            if (!doc.data().public) {\n                let col0 = document.createElement('div');\n                col0.classList.add('col-auto');\n                col0.classList.add('p-0');\n                let badge = document.createElement('span');\n                badge.classList.add('badge');\n                badge.classList.add('badge-warning');\n                badge.innerText = 'Draft';\n                col0.appendChild(badge);\n                row.appendChild(col0);\n            }\n            let col1 = document.createElement('div');\n            col1.classList.add('col-auto');\n            col1.classList.add('p-0');\n            col1.classList.add('ml-auto');\n            let drp = document.createElement('div');\n            drp.classList.add('dropdown');\n            let btndrp = document.createElement('button');\n            btndrp.classList.add('btn');\n            btndrp.classList.add('btn-light');\n            btndrp.setAttribute('type', 'button');\n            btndrp.setAttribute('data-toogle', 'dropdown');\n            btndrp.setAttribute('aria-haspopup', \"true\");\n            btndrp.setAttribute('aria-expanded', \"false\");\n            btndrp.innerHTML = '<i class=\"fas fa-ellipsis-h\"></i>';\n            btndrp.onclick = function () {\n                if (document.getElementById(\"drpMenu\" + doc.id).classList.contains('show')) {\n                    $(\"#drpMenu\" + doc.id).dropdown('hide');\n                } else {\n                    $(\"#drpMenu\" + doc.id).dropdown('show');\n                    setTimeout(function () {\n                        $(\"#drpMenu\" + doc.id).dropdown('hide');\n                    }, 5000);\n                }\n            };\n            drp.appendChild(btndrp);\n            let drpmenu = document.createElement('div');\n            drpmenu.classList.add('dropdown-menu');\n            drpmenu.classList.add('dropdown-menu-right');\n            drpmenu.setAttribute('id', \"drpMenu\" + doc.id);\n            let drpitm0 = document.createElement('button');\n            drpitm0.classList.add('dropdown-item');\n            drpitm0.onclick = function () {\n                window.location.href = '../editar?id=' + doc.id;\n            };\n            drpitm0.innerHTML = 'Editar <i class=\"fas fa-edit\"></i>';\n            drpmenu.appendChild(drpitm0);\n            let drpitm1 = document.createElement('button');\n            drpitm1.classList.add('dropdown-item');\n            drpitm1.onclick = function () {\n                window.open('../vista-email/' + doc.data().file, '_blank').focus();\n            };\n            drpitm1.innerHTML = 'Vista correo <i class=\"fas fa-envelope\"></i>';\n            drpmenu.appendChild(drpitm1);\n            let drpitm2 = document.createElement('button');\n            let drpitm3 = document.createElement('button');\n            let d = doc.data().created.toDate();\n            if (doc.data().public) {\n                drpitm2.classList.add('dropdown-item');\n                drpitm2.onclick = function () {\n                    let month = d.getFullYear().toString();\n                    if (d.getMonth() < 9) {\n                        month += '0';\n                    }\n                    month += (d.getMonth() + 1);\n                    window.open(doc.data().url, '_blank').focus();\n                };\n                drpitm2.innerHTML = 'Ver artículo <i class=\"fas fa-eye\"></i>';\n                drpmenu.appendChild(drpitm2);\n                drpitm3.classList.add('dropdown-item');\n                drpitm3.onclick = function () {\n                    cookiesFSRef.doc(doc.id).update({\n                        public: false\n                    });\n                };\n                drpitm3.innerHTML = 'Volver privado <i class=\"fas fa-lock\"></i>';\n                drpmenu.appendChild(drpitm3);\n            }\n            drp.appendChild(drpmenu);\n            col1.appendChild(drp);\n            row.appendChild(col1);\n            h.appendChild(row);\n            card.appendChild(h);\n\n            let a = document.createElement('a');\n            a.href = '../editar?id=' + doc.id;\n            a.classList.add('text-decoration-none');\n            a.classList.add('text-dark');\n            let img = document.createElement('img');\n            img.src = doc.data().picUrl;\n            img.classList.add('card-img-top');\n            img.alt = 'No hay imagen'\n            a.appendChild(img);\n            let cbody = document.createElement('div');\n            cbody.classList.add('card-body');\n            cbody.innerHTML = '<h3 class=\"card-title\">' + doc.data().title + '</h3>\\n<p>Autor(es):' + doc.data().authors + '</p>\\n<p class=\"card-text\">' + doc.data().description + '</p>\\n'\n            a.appendChild(cbody);\n            let f = document.createElement('div');\n            f.classList.add('card-footer');\n            f.classList.add('text-muted');\n            f.innerHTML = '<p>Creado: ' + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            d = doc.data().ledit.toDate();\n            f.innerHTML += '<p>Acutalizado: ' + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            if (doc.data().public) {\n                d = doc.data().published.toDate();\n                f.innerHTML += '<p>Publicado: ' + d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + '</p>\\n';\n            } else {\n                f.innerHTML += '<p>Sin publicar</p>\\n';\n            }\n            a.appendChild(f)\n            card.appendChild(a);\n\n            col.appendChild(card);\n            document.getElementById('crdContainer').appendChild(col);\n            if (idx == previewLim - 1) {\n                if (paglast[page] == undefined || paglast[page] == null) {\n                    paglast.push(docs[docs.length - 1]);\n                } else if (paglast[page] != docs[docs.length - 1]) {\n                    paglast.splice(page, 1, docs[docs.length - 1]);\n                }\n                nxtp = true;\n                document.getElementById(\"pgNavT\").classList.remove('d-none');\n                document.getElementById(\"pgNavB\").classList.remove('d-none');\n            }\n            idx++;\n        });\n        if (!nxtp) {\n            document.getElementById(\"pgTNxt\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBNxt\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTNxt\").removeAttribute('disabled');\n            document.getElementById(\"pgBNxt\").removeAttribute('disabled');\n        }\n        if (page == 1) {\n            document.getElementById(\"pgTPrv\").setAttribute('disabled', 'true');\n            document.getElementById(\"pgBPrv\").setAttribute('disabled', 'true');\n        } else {\n            document.getElementById(\"pgTPrv\").removeAttribute('disabled');\n            document.getElementById(\"pgBPrv\").removeAttribute('disabled');\n        }\n    }).catch(err => { console.log(err) });\n}\n\ndocument.getElementById(\"pgTPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgBPrv\").onclick = function () { reSrch(-1); };\ndocument.getElementById(\"pgTNxt\").onclick = function () { reSrch(1); };\ndocument.getElementById(\"pgBNxt\").onclick = function () { reSrch(1); };\nfunction reSrch(np) {\n    if (page < 1 && np == -1) return;\n    if (!nxtp && np == 1) return;\n    page += np;\n    document.getElementById('disPgT').innerText = page;\n    document.getElementById('disPgB').innerText = page;\n    initSrch(true);\n    document.getElementById(\"cookCnt\").scrollIntoView();\n}\n\ndocument.getElementById('btnPlus').onclick = function () {\n    $('#mdlPlus').modal('show');\n};\n\nvar inFileChanged = false;\n\nfunction cancelPlus() {\n    document.getElementById('inTitle').value = \"\";\n    document.getElementById('inFile').value = \"\";\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n    inFileChanged = false;\n}\ndocument.getElementById('btnCanPlus0').onclick = function () {\n    cancelPlus();\n};\ndocument.getElementById('btnCanPlus1').onclick = function () {\n    cancelPlus();\n};\n\ndocument.getElementById('inTitle').onfocus = function () {\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n};\ndocument.getElementById('inTitle').onchange = function () {\n    document.getElementById('inTitle').value = document.getElementById('inTitle').value.trim();\n    if (inFileChanged) return;\n    let title = document.getElementById('inTitle').value;\n    title = rmDiacs(title);\n    title = title.toLowerCase();\n    document.getElementById('inFile').value = title.replaceAll(' ', '-');\n};\ndocument.getElementById('inFile').onfocus = function () {\n    inFileChanged = true;\n};\ndocument.getElementById('inFile').onchange = function () {\n    document.getElementById('alrtPlusContainer').innerHTML = '';\n};\n\nfunction setprog(n) {\n    document.getElementById('bar').setAttribute('aria-valuenow', n);\n    document.getElementById('bar').style.width = n + '%';\n    document.getElementById('bar').innerText = n + '%';\n}\n\ndocument.getElementById('inFile').oninput = function () {\n    document.getElementById('inFile').value = rmDiacs(document.getElementById('inFile').value.trim().replaceAll(' ', '-'));\n}"]}